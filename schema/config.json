{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "LocalConfig",
  "type": "object",
  "properties": {
    "config": {
      "type": "object",
      "properties": {
        "enableIpv6": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "localXdsPath": {
          "description": "Local XDS path. If not specified, the current configuration file will be used.",
          "type": [
            "string",
            "null"
          ]
        },
        "caAddress": {
          "type": [
            "string",
            "null"
          ]
        },
        "caAuthToken": {
          "type": [
            "string",
            "null"
          ]
        },
        "xdsAddress": {
          "type": [
            "string",
            "null"
          ]
        },
        "xdsAuthToken": {
          "type": [
            "string",
            "null"
          ]
        },
        "namespace": {
          "type": [
            "string",
            "null"
          ]
        },
        "gateway": {
          "type": [
            "string",
            "null"
          ]
        },
        "trustDomain": {
          "type": [
            "string",
            "null"
          ]
        },
        "serviceAccount": {
          "type": [
            "string",
            "null"
          ]
        },
        "clusterId": {
          "type": [
            "string",
            "null"
          ]
        },
        "network": {
          "type": [
            "string",
            "null"
          ]
        },
        "adminAddr": {
          "description": "Admin UI address in the format \"ip:port\"",
          "type": [
            "string",
            "null"
          ]
        },
        "statsAddr": {
          "description": "Stats/metrics server address in the format \"ip:port\"",
          "type": [
            "string",
            "null"
          ]
        },
        "readinessAddr": {
          "description": "Readiness probe server address in the format \"ip:port\"",
          "type": [
            "string",
            "null"
          ]
        },
        "connectionTerminationDeadline": {
          "type": [
            "string",
            "null"
          ],
          "default": null
        },
        "connectionMinTerminationDeadline": {
          "type": [
            "string",
            "null"
          ],
          "default": null
        },
        "workerThreads": {
          "type": [
            "string",
            "null"
          ]
        },
        "tracing": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "otlpEndpoint": {
              "type": "string"
            },
            "headers": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "default": {}
            },
            "otlpProtocol": {
              "type": "string",
              "enum": [
                "grpc",
                "http"
              ],
              "default": "grpc"
            },
            "fields": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "remove": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": []
                },
                "add": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "default": {}
                }
              },
              "additionalProperties": false
            },
            "randomSampling": {
              "description": "Expression to determine the amount of *random sampling*.\nRandom sampling will initiate a new trace span if the incoming request does not have a trace already.\nThis should evaluate to either a float between 0.0-1.0 (0-100%) or true/false.\nThis defaults to 'false'.",
              "type": [
                "string",
                "number",
                "boolean",
                "null"
              ]
            },
            "clientSampling": {
              "description": "Expression to determine the amount of *client sampling*.\nClient sampling determines whether to initiate a new trace span if the incoming request does have a trace already.\nThis should evaluate to either a float between 0.0-1.0 (0-100%) or true/false.\nThis defaults to 'true'.",
              "type": [
                "string",
                "number",
                "boolean",
                "null"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "otlpEndpoint"
          ]
        },
        "logging": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "filter": {
              "type": [
                "string",
                "null"
              ]
            },
            "fields": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "remove": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": []
                },
                "add": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "default": {}
                }
              },
              "additionalProperties": false
            },
            "level": {
              "anyOf": [
                {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  ]
                },
                {
                  "type": "null"
                }
              ]
            },
            "format": {
              "type": [
                "string",
                "null"
              ],
              "enum": [
                "text",
                "json",
                null
              ]
            }
          },
          "additionalProperties": false
        },
        "metrics": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "remove": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": []
            },
            "fields": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "add": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "default": {}
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "backend": {
          "type": "object",
          "properties": {
            "keepalives": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "time": {
                  "type": "string",
                  "default": "3m0s"
                },
                "interval": {
                  "type": "string",
                  "default": "3m0s"
                },
                "retries": {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0,
                  "default": 9
                }
              },
              "additionalProperties": false,
              "default": {
                "enabled": true,
                "time": "3m0s",
                "interval": "3m0s",
                "retries": 9
              }
            },
            "connectTimeout": {
              "type": "string",
              "default": "10s"
            },
            "poolIdleTimeout": {
              "description": "The maximum duration to keep an idle connection alive.",
              "type": "string",
              "default": "1m30s"
            },
            "poolMaxSize": {
              "description": "The maximum number of connections allowed in the pool, per hostname. If set, this will limit\nthe total number of connections kept alive to any given host.\nNote: excess connections will still be created, they will just not remain idle.\nIf unset, there is no limit",
              "type": [
                "integer",
                "null"
              ],
              "format": "uint",
              "minimum": 0,
              "default": null
            }
          },
          "additionalProperties": false,
          "default": {
            "keepalives": {
              "enabled": true,
              "time": "3m0s",
              "interval": "3m0s",
              "retries": 9
            },
            "connectTimeout": "10s",
            "poolIdleTimeout": "1m30s",
            "poolMaxSize": null
          }
        },
        "hbone": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "windowSize": {
              "type": [
                "integer",
                "null"
              ],
              "format": "uint32",
              "minimum": 0
            },
            "connectionWindowSize": {
              "type": [
                "integer",
                "null"
              ],
              "format": "uint32",
              "minimum": 0
            },
            "frameSize": {
              "type": [
                "integer",
                "null"
              ],
              "format": "uint32",
              "minimum": 0
            },
            "poolMaxStreamsPerConn": {
              "type": [
                "integer",
                "null"
              ],
              "format": "uint16",
              "minimum": 0,
              "maximum": 65535
            },
            "poolUnusedReleaseTimeout": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false,
      "default": null
    },
    "binds": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "port": {
            "type": "integer",
            "format": "uint16",
            "minimum": 0,
            "maximum": 65535
          },
          "listeners": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "namespace": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "gatewayName": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "hostname": {
                  "description": "Can be a wildcard",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "protocol": {
                  "type": "string",
                  "enum": [
                    "HTTP",
                    "HTTPS",
                    "TLS",
                    "TCP",
                    "HBONE"
                  ]
                },
                "tls": {
                  "type": [
                    "object",
                    "null"
                  ],
                  "properties": {
                    "cert": {
                      "type": "string"
                    },
                    "key": {
                      "type": "string"
                    },
                    "root": {
                      "type": [
                        "string",
                        "null"
                      ]
                    }
                  },
                  "additionalProperties": false,
                  "required": [
                    "cert",
                    "key"
                  ]
                },
                "routes": {
                  "type": [
                    "array",
                    "null"
                  ],
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": [
                          "string",
                          "null"
                        ],
                        "default": null
                      },
                      "namespace": {
                        "type": [
                          "string",
                          "null"
                        ],
                        "default": null
                      },
                      "ruleName": {
                        "type": [
                          "string",
                          "null"
                        ],
                        "default": null
                      },
                      "hostnames": {
                        "description": "Can be a wildcard",
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "matches": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "headers": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "type": "string"
                                  },
                                  "value": {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "exact": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "exact"
                                        ],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "regex": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "regex"
                                        ],
                                        "additionalProperties": false
                                      }
                                    ]
                                  }
                                },
                                "additionalProperties": false,
                                "required": [
                                  "name",
                                  "value"
                                ]
                              }
                            },
                            "path": {
                              "oneOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "exact": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "exact"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "pathPrefix": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "pathPrefix"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "regex": {
                                      "type": "array",
                                      "prefixItems": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "integer",
                                          "format": "uint",
                                          "minimum": 0
                                        }
                                      ],
                                      "minItems": 2,
                                      "maxItems": 2
                                    }
                                  },
                                  "required": [
                                    "regex"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "method": {
                              "type": "string"
                            },
                            "query": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "type": "string"
                                  },
                                  "value": {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "exact": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "exact"
                                        ],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "regex": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "regex"
                                        ],
                                        "additionalProperties": false
                                      }
                                    ]
                                  }
                                },
                                "additionalProperties": false,
                                "required": [
                                  "name",
                                  "value"
                                ]
                              }
                            }
                          },
                          "additionalProperties": false,
                          "required": [
                            "path"
                          ]
                        },
                        "default": [
                          {
                            "path": {
                              "pathPrefix": "/"
                            }
                          }
                        ]
                      },
                      "policies": {
                        "type": [
                          "object",
                          "null"
                        ],
                        "properties": {
                          "requestHeaderModifier": {
                            "description": "Headers to be modified in the request.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "add": {
                                "type": "object",
                                "additionalProperties": {
                                  "type": "string"
                                }
                              },
                              "set": {
                                "type": "object",
                                "additionalProperties": {
                                  "type": "string"
                                }
                              },
                              "remove": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "responseHeaderModifier": {
                            "description": "Headers to be modified in the response.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "add": {
                                "type": "object",
                                "additionalProperties": {
                                  "type": "string"
                                }
                              },
                              "set": {
                                "type": "object",
                                "additionalProperties": {
                                  "type": "string"
                                }
                              },
                              "remove": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "requestRedirect": {
                            "description": "Directly respond to the request with a redirect.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "scheme": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "authority": {
                                "anyOf": [
                                  {
                                    "oneOf": [
                                      {
                                        "type": "string",
                                        "enum": [
                                          "auto",
                                          "none"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "full": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "full"
                                        ],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "host": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "host"
                                        ],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "port": {
                                            "type": "integer",
                                            "format": "uint16",
                                            "minimum": 1,
                                            "maximum": 65535
                                          }
                                        },
                                        "required": [
                                          "port"
                                        ],
                                        "additionalProperties": false
                                      }
                                    ]
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "path": {
                                "anyOf": [
                                  {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "full": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "full"
                                        ],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "prefix": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "prefix"
                                        ],
                                        "additionalProperties": false
                                      }
                                    ]
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "status": {
                                "type": [
                                  "integer",
                                  "null"
                                ],
                                "format": "uint16",
                                "minimum": 1,
                                "maximum": 65535
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "urlRewrite": {
                            "description": "Modify the URL path or authority.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "authority": {
                                "anyOf": [
                                  {
                                    "oneOf": [
                                      {
                                        "type": "string",
                                        "enum": [
                                          "auto",
                                          "none"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "full": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "full"
                                        ],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "host": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "host"
                                        ],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "port": {
                                            "type": "integer",
                                            "format": "uint16",
                                            "minimum": 1,
                                            "maximum": 65535
                                          }
                                        },
                                        "required": [
                                          "port"
                                        ],
                                        "additionalProperties": false
                                      }
                                    ]
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "path": {
                                "anyOf": [
                                  {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "full": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "full"
                                        ],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "prefix": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "prefix"
                                        ],
                                        "additionalProperties": false
                                      }
                                    ]
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "requestMirror": {
                            "description": "Mirror incoming requests to another destination.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "backend": {
                                "oneOf": [
                                  {
                                    "type": "string",
                                    "enum": [
                                      "invalid"
                                    ]
                                  },
                                  {
                                    "description": "Service reference. Service must be defined in the top level services list.",
                                    "type": "object",
                                    "properties": {
                                      "service": {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "object",
                                            "properties": {
                                              "namespace": {
                                                "type": "string"
                                              },
                                              "hostname": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "namespace",
                                              "hostname"
                                            ]
                                          },
                                          "port": {
                                            "type": "integer",
                                            "format": "uint16",
                                            "minimum": 0,
                                            "maximum": 65535
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "name",
                                          "port"
                                        ]
                                      }
                                    },
                                    "required": [
                                      "service"
                                    ],
                                    "additionalProperties": false
                                  },
                                  {
                                    "description": "Hostname or IP address",
                                    "type": "object",
                                    "properties": {
                                      "host": {
                                        "description": "Hostname or IP address",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "host"
                                    ],
                                    "additionalProperties": false
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "backend": {
                                        "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "backend"
                                    ],
                                    "additionalProperties": false
                                  }
                                ]
                              },
                              "percentage": {
                                "type": "number",
                                "format": "double"
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "backend",
                              "percentage"
                            ],
                            "default": null
                          },
                          "directResponse": {
                            "description": "Directly respond to the request with a static response.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "body": {
                                "type": [
                                  "array",
                                  "string"
                                ],
                                "items": {
                                  "type": "integer",
                                  "format": "uint8",
                                  "minimum": 0,
                                  "maximum": 255
                                }
                              },
                              "status": {
                                "type": "integer",
                                "format": "uint16",
                                "minimum": 1,
                                "maximum": 65535
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "body",
                              "status"
                            ],
                            "default": null
                          },
                          "cors": {
                            "description": "Handle CORS preflight requests and append configured CORS headers to applicable requests.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "allowCredentials": {
                                "type": "boolean",
                                "default": false
                              },
                              "allowHeaders": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                },
                                "default": []
                              },
                              "allowMethods": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                },
                                "default": []
                              },
                              "allowOrigins": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                },
                                "default": []
                              },
                              "exposeHeaders": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                },
                                "default": []
                              },
                              "maxAge": {
                                "type": [
                                  "string",
                                  "null"
                                ],
                                "default": null
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "mcpAuthorization": {
                            "description": "Authorization policies for MCP access.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "rules": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "rules"
                            ],
                            "default": null
                          },
                          "authorization": {
                            "description": "Authorization policies for HTTP access.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "rules": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "rules"
                            ],
                            "default": null
                          },
                          "mcpAuthentication": {
                            "description": "Authentication for MCP clients.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "issuer": {
                                "type": "string"
                              },
                              "audiences": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              },
                              "provider": {
                                "anyOf": [
                                  {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "auth0": {
                                            "type": "object",
                                            "additionalProperties": false
                                          }
                                        },
                                        "required": [
                                          "auth0"
                                        ],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "keycloak": {
                                            "type": "object",
                                            "additionalProperties": false
                                          }
                                        },
                                        "required": [
                                          "keycloak"
                                        ],
                                        "additionalProperties": false
                                      }
                                    ]
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "resourceMetadata": {
                                "type": "object",
                                "additionalProperties": true
                              },
                              "jwks": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "file": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "file"
                                    ]
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "url": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "url"
                                    ]
                                  }
                                ]
                              },
                              "mode": {
                                "oneOf": [
                                  {
                                    "description": "A valid token, issued by a configured issuer, must be present.",
                                    "type": "string",
                                    "const": "strict"
                                  },
                                  {
                                    "description": "If a token exists, validate it.\nThis is the default option.\nWarning: this allows requests without a JWT token!",
                                    "type": "string",
                                    "const": "optional"
                                  },
                                  {
                                    "description": "Requests are never rejected. This is useful for usage of claims in later steps (authorization, logging, etc).\nWarning: this allows requests without a JWT token!",
                                    "type": "string",
                                    "const": "permissive"
                                  }
                                ],
                                "default": "optional"
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "issuer",
                              "audiences",
                              "resourceMetadata",
                              "jwks"
                            ]
                          },
                          "a2a": {
                            "description": "Mark this traffic as A2A to enable A2A processing and telemetry.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "additionalProperties": false,
                            "default": null
                          },
                          "ai": {
                            "description": "Mark this as LLM traffic to enable LLM processing.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "promptGuard": {
                                "type": [
                                  "object",
                                  "null"
                                ],
                                "properties": {
                                  "request": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "rejection": {
                                          "type": "object",
                                          "properties": {
                                            "body": {
                                              "type": [
                                                "array",
                                                "string"
                                              ],
                                              "items": {
                                                "type": "integer",
                                                "format": "uint8",
                                                "minimum": 0,
                                                "maximum": 255
                                              },
                                              "default": "The request was rejected due to inappropriate content"
                                            },
                                            "status": {
                                              "type": "integer",
                                              "format": "uint16",
                                              "minimum": 1,
                                              "maximum": 65535,
                                              "default": 403
                                            },
                                            "headers": {
                                              "description": "Optional headers to add, set, or remove from the rejection response",
                                              "type": [
                                                "object",
                                                "null"
                                              ],
                                              "properties": {
                                                "add": {
                                                  "type": "object",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  }
                                                },
                                                "set": {
                                                  "type": "object",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  }
                                                },
                                                "remove": {
                                                  "type": "array",
                                                  "items": {
                                                    "type": "string"
                                                  }
                                                }
                                              },
                                              "additionalProperties": false
                                            }
                                          },
                                          "additionalProperties": false,
                                          "default": {
                                            "body": "The request was rejected due to inappropriate content",
                                            "status": 403
                                          }
                                        }
                                      },
                                      "unevaluatedProperties": false,
                                      "oneOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "regex": {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "mask",
                                                    "reject"
                                                  ],
                                                  "default": "mask"
                                                },
                                                "rules": {
                                                  "type": "array",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "builtin": {
                                                            "type": "string",
                                                            "enum": [
                                                              "ssn",
                                                              "creditCard",
                                                              "phoneNumber",
                                                              "email",
                                                              "caSin"
                                                            ]
                                                          }
                                                        },
                                                        "additionalProperties": false,
                                                        "required": [
                                                          "builtin"
                                                        ]
                                                      },
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "pattern": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "additionalProperties": false,
                                                        "required": [
                                                          "pattern"
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                }
                                              },
                                              "additionalProperties": false,
                                              "required": [
                                                "rules"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "regex"
                                          ]
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "webhook": {
                                              "type": "object",
                                              "properties": {
                                                "target": {
                                                  "oneOf": [
                                                    {
                                                      "type": "string",
                                                      "enum": [
                                                        "invalid"
                                                      ]
                                                    },
                                                    {
                                                      "description": "Service reference. Service must be defined in the top level services list.",
                                                      "type": "object",
                                                      "properties": {
                                                        "service": {
                                                          "type": "object",
                                                          "properties": {
                                                            "name": {
                                                              "type": "object",
                                                              "properties": {
                                                                "namespace": {
                                                                  "type": "string"
                                                                },
                                                                "hostname": {
                                                                  "type": "string"
                                                                }
                                                              },
                                                              "required": [
                                                                "namespace",
                                                                "hostname"
                                                              ]
                                                            },
                                                            "port": {
                                                              "type": "integer",
                                                              "format": "uint16",
                                                              "minimum": 0,
                                                              "maximum": 65535
                                                            }
                                                          },
                                                          "additionalProperties": false,
                                                          "required": [
                                                            "name",
                                                            "port"
                                                          ]
                                                        }
                                                      },
                                                      "required": [
                                                        "service"
                                                      ],
                                                      "additionalProperties": false
                                                    },
                                                    {
                                                      "description": "Hostname or IP address",
                                                      "type": "object",
                                                      "properties": {
                                                        "host": {
                                                          "description": "Hostname or IP address",
                                                          "type": "string"
                                                        }
                                                      },
                                                      "required": [
                                                        "host"
                                                      ],
                                                      "additionalProperties": false
                                                    },
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "backend": {
                                                          "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                                          "type": "string"
                                                        }
                                                      },
                                                      "required": [
                                                        "backend"
                                                      ],
                                                      "additionalProperties": false
                                                    }
                                                  ]
                                                },
                                                "forwardHeaderMatches": {
                                                  "type": "array",
                                                  "items": {
                                                    "type": "object",
                                                    "properties": {
                                                      "name": {
                                                        "type": "string"
                                                      },
                                                      "value": {
                                                        "oneOf": [
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "exact": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "required": [
                                                              "exact"
                                                            ],
                                                            "additionalProperties": false
                                                          },
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "regex": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "required": [
                                                              "regex"
                                                            ],
                                                            "additionalProperties": false
                                                          }
                                                        ]
                                                      }
                                                    },
                                                    "additionalProperties": false,
                                                    "required": [
                                                      "name",
                                                      "value"
                                                    ]
                                                  }
                                                }
                                              },
                                              "additionalProperties": false,
                                              "required": [
                                                "target"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "webhook"
                                          ]
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "openAIModeration": {
                                              "type": "object",
                                              "properties": {
                                                "model": {
                                                  "description": "Model to use. Defaults to `omni-moderation-latest`",
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ]
                                                }
                                              },
                                              "additionalProperties": false
                                            }
                                          },
                                          "required": [
                                            "openAIModeration"
                                          ]
                                        }
                                      ]
                                    }
                                  },
                                  "response": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "rejection": {
                                          "type": "object",
                                          "properties": {
                                            "body": {
                                              "type": [
                                                "array",
                                                "string"
                                              ],
                                              "items": {
                                                "type": "integer",
                                                "format": "uint8",
                                                "minimum": 0,
                                                "maximum": 255
                                              },
                                              "default": "The request was rejected due to inappropriate content"
                                            },
                                            "status": {
                                              "type": "integer",
                                              "format": "uint16",
                                              "minimum": 1,
                                              "maximum": 65535,
                                              "default": 403
                                            },
                                            "headers": {
                                              "description": "Optional headers to add, set, or remove from the rejection response",
                                              "type": [
                                                "object",
                                                "null"
                                              ],
                                              "properties": {
                                                "add": {
                                                  "type": "object",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  }
                                                },
                                                "set": {
                                                  "type": "object",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  }
                                                },
                                                "remove": {
                                                  "type": "array",
                                                  "items": {
                                                    "type": "string"
                                                  }
                                                }
                                              },
                                              "additionalProperties": false
                                            }
                                          },
                                          "additionalProperties": false,
                                          "default": {
                                            "body": "The request was rejected due to inappropriate content",
                                            "status": 403
                                          }
                                        }
                                      },
                                      "unevaluatedProperties": false,
                                      "oneOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "regex": {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "mask",
                                                    "reject"
                                                  ],
                                                  "default": "mask"
                                                },
                                                "rules": {
                                                  "type": "array",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "builtin": {
                                                            "type": "string",
                                                            "enum": [
                                                              "ssn",
                                                              "creditCard",
                                                              "phoneNumber",
                                                              "email",
                                                              "caSin"
                                                            ]
                                                          }
                                                        },
                                                        "additionalProperties": false,
                                                        "required": [
                                                          "builtin"
                                                        ]
                                                      },
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "pattern": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "additionalProperties": false,
                                                        "required": [
                                                          "pattern"
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                }
                                              },
                                              "additionalProperties": false,
                                              "required": [
                                                "rules"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "regex"
                                          ]
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "webhook": {
                                              "type": "object",
                                              "properties": {
                                                "target": {
                                                  "oneOf": [
                                                    {
                                                      "type": "string",
                                                      "enum": [
                                                        "invalid"
                                                      ]
                                                    },
                                                    {
                                                      "description": "Service reference. Service must be defined in the top level services list.",
                                                      "type": "object",
                                                      "properties": {
                                                        "service": {
                                                          "type": "object",
                                                          "properties": {
                                                            "name": {
                                                              "type": "object",
                                                              "properties": {
                                                                "namespace": {
                                                                  "type": "string"
                                                                },
                                                                "hostname": {
                                                                  "type": "string"
                                                                }
                                                              },
                                                              "required": [
                                                                "namespace",
                                                                "hostname"
                                                              ]
                                                            },
                                                            "port": {
                                                              "type": "integer",
                                                              "format": "uint16",
                                                              "minimum": 0,
                                                              "maximum": 65535
                                                            }
                                                          },
                                                          "additionalProperties": false,
                                                          "required": [
                                                            "name",
                                                            "port"
                                                          ]
                                                        }
                                                      },
                                                      "required": [
                                                        "service"
                                                      ],
                                                      "additionalProperties": false
                                                    },
                                                    {
                                                      "description": "Hostname or IP address",
                                                      "type": "object",
                                                      "properties": {
                                                        "host": {
                                                          "description": "Hostname or IP address",
                                                          "type": "string"
                                                        }
                                                      },
                                                      "required": [
                                                        "host"
                                                      ],
                                                      "additionalProperties": false
                                                    },
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "backend": {
                                                          "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                                          "type": "string"
                                                        }
                                                      },
                                                      "required": [
                                                        "backend"
                                                      ],
                                                      "additionalProperties": false
                                                    }
                                                  ]
                                                },
                                                "forwardHeaderMatches": {
                                                  "type": "array",
                                                  "items": {
                                                    "type": "object",
                                                    "properties": {
                                                      "name": {
                                                        "type": "string"
                                                      },
                                                      "value": {
                                                        "oneOf": [
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "exact": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "required": [
                                                              "exact"
                                                            ],
                                                            "additionalProperties": false
                                                          },
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "regex": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "required": [
                                                              "regex"
                                                            ],
                                                            "additionalProperties": false
                                                          }
                                                        ]
                                                      }
                                                    },
                                                    "additionalProperties": false,
                                                    "required": [
                                                      "name",
                                                      "value"
                                                    ]
                                                  }
                                                }
                                              },
                                              "additionalProperties": false,
                                              "required": [
                                                "target"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "webhook"
                                          ]
                                        }
                                      ]
                                    }
                                  }
                                },
                                "additionalProperties": false
                              },
                              "defaults": {
                                "type": [
                                  "object",
                                  "null"
                                ],
                                "additionalProperties": true
                              },
                              "overrides": {
                                "type": [
                                  "object",
                                  "null"
                                ],
                                "additionalProperties": true
                              },
                              "prompts": {
                                "type": [
                                  "object",
                                  "null"
                                ],
                                "properties": {
                                  "append": {
                                    "type": "array",
                                    "items": {
                                      "description": "SimpleChatCompletionMessage is a simplified chat message",
                                      "type": "object",
                                      "properties": {
                                        "role": {
                                          "type": "string"
                                        },
                                        "content": {
                                          "type": "string"
                                        }
                                      },
                                      "additionalProperties": false,
                                      "required": [
                                        "role",
                                        "content"
                                      ]
                                    }
                                  },
                                  "prepend": {
                                    "type": "array",
                                    "items": {
                                      "description": "SimpleChatCompletionMessage is a simplified chat message",
                                      "type": "object",
                                      "properties": {
                                        "role": {
                                          "type": "string"
                                        },
                                        "content": {
                                          "type": "string"
                                        }
                                      },
                                      "additionalProperties": false,
                                      "required": [
                                        "role",
                                        "content"
                                      ]
                                    }
                                  }
                                },
                                "additionalProperties": false,
                                "required": [
                                  "prepend"
                                ]
                              },
                              "modelAliases": {
                                "type": "object",
                                "additionalProperties": {
                                  "type": "string"
                                }
                              },
                              "promptCaching": {
                                "type": [
                                  "object",
                                  "null"
                                ],
                                "properties": {
                                  "cacheSystem": {
                                    "type": "boolean",
                                    "default": true
                                  },
                                  "cacheMessages": {
                                    "type": "boolean",
                                    "default": true
                                  },
                                  "cacheTools": {
                                    "type": "boolean",
                                    "default": false
                                  },
                                  "minTokens": {
                                    "type": [
                                      "integer",
                                      "null"
                                    ],
                                    "format": "uint",
                                    "minimum": 0,
                                    "default": 1024
                                  }
                                },
                                "additionalProperties": false
                              },
                              "routes": {
                                "type": "object",
                                "additionalProperties": {
                                  "type": "string"
                                }
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "backendTLS": {
                            "description": "Send TLS to the backend.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "cert": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "key": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "root": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "hostname": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "insecure": {
                                "type": "boolean",
                                "default": false
                              },
                              "insecureHost": {
                                "type": "boolean",
                                "default": false
                              },
                              "alpn": {
                                "type": [
                                  "array",
                                  "null"
                                ],
                                "items": {
                                  "type": "string"
                                },
                                "default": null
                              },
                              "subjectAltNames": {
                                "type": [
                                  "array",
                                  "null"
                                ],
                                "items": {
                                  "type": "string"
                                },
                                "default": null
                              }
                            },
                            "additionalProperties": false
                          },
                          "backendAuth": {
                            "description": "Authenticate to the backend.",
                            "anyOf": [
                              {
                                "oneOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "passthrough": {
                                        "type": "object",
                                        "additionalProperties": false
                                      }
                                    },
                                    "required": [
                                      "passthrough"
                                    ],
                                    "additionalProperties": false
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "key": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "file": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "file"
                                            ]
                                          },
                                          {
                                            "type": "string"
                                          }
                                        ]
                                      }
                                    },
                                    "required": [
                                      "key"
                                    ],
                                    "additionalProperties": false
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "gcp": {
                                        "type": "object",
                                        "additionalProperties": false
                                      }
                                    },
                                    "required": [
                                      "gcp"
                                    ],
                                    "additionalProperties": false
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "aws": {
                                        "anyOf": [
                                          {
                                            "description": "Use explicit AWS credentials",
                                            "type": "object",
                                            "properties": {
                                              "accessKeyId": {
                                                "type": "string"
                                              },
                                              "secretAccessKey": {
                                                "type": "string"
                                              },
                                              "region": {
                                                "type": [
                                                  "string",
                                                  "null"
                                                ]
                                              },
                                              "sessionToken": {
                                                "type": [
                                                  "string",
                                                  "null"
                                                ]
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "accessKeyId",
                                              "secretAccessKey"
                                            ]
                                          },
                                          {
                                            "description": "Use implicit AWS authentication (environment variables, IAM roles, etc.)",
                                            "type": "object",
                                            "additionalProperties": false
                                          }
                                        ]
                                      }
                                    },
                                    "required": [
                                      "aws"
                                    ],
                                    "additionalProperties": false
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "azure": {
                                        "oneOf": [
                                          {
                                            "description": "Use explicit Azure credentials",
                                            "type": "object",
                                            "properties": {
                                              "explicitConfig": {
                                                "type": "object",
                                                "unevaluatedProperties": false,
                                                "oneOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "clientSecret": {
                                                        "type": "object",
                                                        "properties": {
                                                          "tenant_id": {
                                                            "type": "string"
                                                          },
                                                          "client_id": {
                                                            "type": "string"
                                                          },
                                                          "client_secret": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "additionalProperties": false,
                                                        "required": [
                                                          "tenant_id",
                                                          "client_id",
                                                          "client_secret"
                                                        ]
                                                      }
                                                    },
                                                    "required": [
                                                      "clientSecret"
                                                    ]
                                                  },
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "managedIdentity": {
                                                        "type": "object",
                                                        "properties": {
                                                          "userAssignedIdentity": {
                                                            "anyOf": [
                                                              {
                                                                "oneOf": [
                                                                  {
                                                                    "type": "object",
                                                                    "properties": {
                                                                      "clientId": {
                                                                        "type": "string"
                                                                      }
                                                                    },
                                                                    "required": [
                                                                      "clientId"
                                                                    ],
                                                                    "additionalProperties": false
                                                                  },
                                                                  {
                                                                    "type": "object",
                                                                    "properties": {
                                                                      "objectId": {
                                                                        "type": "string"
                                                                      }
                                                                    },
                                                                    "required": [
                                                                      "objectId"
                                                                    ],
                                                                    "additionalProperties": false
                                                                  },
                                                                  {
                                                                    "type": "object",
                                                                    "properties": {
                                                                      "resourceId": {
                                                                        "type": "string"
                                                                      }
                                                                    },
                                                                    "required": [
                                                                      "resourceId"
                                                                    ],
                                                                    "additionalProperties": false
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "type": "null"
                                                              }
                                                            ]
                                                          }
                                                        },
                                                        "additionalProperties": false
                                                      }
                                                    },
                                                    "required": [
                                                      "managedIdentity"
                                                    ]
                                                  },
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "workloadIdentity": {
                                                        "type": "object",
                                                        "additionalProperties": false
                                                      }
                                                    },
                                                    "required": [
                                                      "workloadIdentity"
                                                    ]
                                                  }
                                                ]
                                              }
                                            },
                                            "required": [
                                              "explicitConfig"
                                            ],
                                            "additionalProperties": false
                                          },
                                          {
                                            "description": "Use implicit Azure auth. Note that this is for developer use-cases only!",
                                            "type": "object",
                                            "properties": {
                                              "developerImplicit": {
                                                "type": "object",
                                                "additionalProperties": false
                                              }
                                            },
                                            "required": [
                                              "developerImplicit"
                                            ],
                                            "additionalProperties": false
                                          }
                                        ]
                                      }
                                    },
                                    "required": [
                                      "azure"
                                    ],
                                    "additionalProperties": false
                                  }
                                ]
                              },
                              {
                                "type": "null"
                              }
                            ],
                            "default": null
                          },
                          "localRateLimit": {
                            "description": "Rate limit incoming requests. State is kept local.",
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "maxTokens": {
                                  "type": "integer",
                                  "format": "uint64",
                                  "minimum": 0,
                                  "default": 0
                                },
                                "tokensPerFill": {
                                  "type": "integer",
                                  "format": "uint64",
                                  "minimum": 0,
                                  "default": 0
                                },
                                "fillInterval": {
                                  "type": "string"
                                },
                                "type": {
                                  "type": "string",
                                  "enum": [
                                    "requests",
                                    "tokens"
                                  ],
                                  "default": "requests"
                                }
                              },
                              "additionalProperties": false,
                              "required": [
                                "fillInterval"
                              ]
                            },
                            "default": []
                          },
                          "remoteRateLimit": {
                            "description": "Rate limit incoming requests. State is managed by a remote server.",
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "domain": {
                                    "type": "string"
                                  },
                                  "descriptors": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "entries": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "key": {
                                                "type": "string"
                                              },
                                              "value": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "key",
                                              "value"
                                            ]
                                          }
                                        },
                                        "type": {
                                          "type": "string",
                                          "enum": [
                                            "requests",
                                            "tokens"
                                          ],
                                          "default": "requests"
                                        }
                                      },
                                      "additionalProperties": false,
                                      "required": [
                                        "entries"
                                      ]
                                    }
                                  },
                                  "timeout": {
                                    "description": "Timeout for the request",
                                    "type": [
                                      "string",
                                      "null"
                                    ]
                                  }
                                },
                                "required": [
                                  "domain",
                                  "descriptors"
                                ],
                                "unevaluatedProperties": false,
                                "oneOf": [
                                  {
                                    "type": "string",
                                    "enum": [
                                      "invalid"
                                    ]
                                  },
                                  {
                                    "description": "Service reference. Service must be defined in the top level services list.",
                                    "type": "object",
                                    "properties": {
                                      "service": {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "object",
                                            "properties": {
                                              "namespace": {
                                                "type": "string"
                                              },
                                              "hostname": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "namespace",
                                              "hostname"
                                            ]
                                          },
                                          "port": {
                                            "type": "integer",
                                            "format": "uint16",
                                            "minimum": 0,
                                            "maximum": 65535
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "name",
                                          "port"
                                        ]
                                      }
                                    },
                                    "required": [
                                      "service"
                                    ]
                                  },
                                  {
                                    "description": "Hostname or IP address",
                                    "type": "object",
                                    "properties": {
                                      "host": {
                                        "description": "Hostname or IP address",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "host"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "backend": {
                                        "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "backend"
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "null"
                              }
                            ],
                            "default": null
                          },
                          "jwtAuth": {
                            "description": "Authenticate incoming JWT requests.",
                            "anyOf": [
                              {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "mode": {
                                        "oneOf": [
                                          {
                                            "description": "A valid token, issued by a configured issuer, must be present.",
                                            "type": "string",
                                            "const": "strict"
                                          },
                                          {
                                            "description": "If a token exists, validate it.\nThis is the default option.\nWarning: this allows requests without a JWT token!",
                                            "type": "string",
                                            "const": "optional"
                                          },
                                          {
                                            "description": "Requests are never rejected. This is useful for usage of claims in later steps (authorization, logging, etc).\nWarning: this allows requests without a JWT token!",
                                            "type": "string",
                                            "const": "permissive"
                                          }
                                        ],
                                        "default": "optional"
                                      },
                                      "providers": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "issuer": {
                                              "type": "string"
                                            },
                                            "audiences": {
                                              "type": [
                                                "array",
                                                "null"
                                              ],
                                              "items": {
                                                "type": "string"
                                              }
                                            },
                                            "jwks": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "file": {
                                                      "type": "string"
                                                    }
                                                  },
                                                  "required": [
                                                    "file"
                                                  ]
                                                },
                                                {
                                                  "type": "string"
                                                },
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "url": {
                                                      "type": "string"
                                                    }
                                                  },
                                                  "required": [
                                                    "url"
                                                  ]
                                                }
                                              ]
                                            }
                                          },
                                          "additionalProperties": false,
                                          "required": [
                                            "issuer",
                                            "jwks"
                                          ]
                                        }
                                      }
                                    },
                                    "additionalProperties": false,
                                    "required": [
                                      "providers"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "mode": {
                                        "oneOf": [
                                          {
                                            "description": "A valid token, issued by a configured issuer, must be present.",
                                            "type": "string",
                                            "const": "strict"
                                          },
                                          {
                                            "description": "If a token exists, validate it.\nThis is the default option.\nWarning: this allows requests without a JWT token!",
                                            "type": "string",
                                            "const": "optional"
                                          },
                                          {
                                            "description": "Requests are never rejected. This is useful for usage of claims in later steps (authorization, logging, etc).\nWarning: this allows requests without a JWT token!",
                                            "type": "string",
                                            "const": "permissive"
                                          }
                                        ],
                                        "default": "optional"
                                      },
                                      "issuer": {
                                        "type": "string"
                                      },
                                      "audiences": {
                                        "type": [
                                          "array",
                                          "null"
                                        ],
                                        "items": {
                                          "type": "string"
                                        }
                                      },
                                      "jwks": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "file": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "file"
                                            ]
                                          },
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "url": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "url"
                                            ]
                                          }
                                        ]
                                      }
                                    },
                                    "additionalProperties": false,
                                    "required": [
                                      "issuer",
                                      "jwks"
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "basicAuth": {
                            "description": "Authenticate incoming requests using Basic Authentication with htpasswd.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "htpasswd": {
                                "description": ".htpasswd file contents/reference",
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "file": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "file"
                                    ]
                                  },
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "realm": {
                                "description": "Realm name for the WWW-Authenticate header",
                                "type": [
                                  "string",
                                  "null"
                                ],
                                "default": null
                              },
                              "mode": {
                                "description": "Validation mode for basic authentication",
                                "oneOf": [
                                  {
                                    "description": "A valid username/password must be present.",
                                    "type": "string",
                                    "const": "strict"
                                  },
                                  {
                                    "description": "If credentials exist, validate them.\nThis is the default option.\nWarning: this allows requests without credentials!",
                                    "type": "string",
                                    "const": "optional"
                                  }
                                ],
                                "default": "optional"
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "htpasswd"
                            ]
                          },
                          "apiKey": {
                            "description": "Authenticate incoming requests using API Keys",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "keys": {
                                "description": "List of API keys",
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "key": {
                                      "type": "string"
                                    },
                                    "metadata": true
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "key"
                                  ]
                                }
                              },
                              "mode": {
                                "description": "Validation mode for API keys",
                                "oneOf": [
                                  {
                                    "description": "A valid API Key must be present.",
                                    "type": "string",
                                    "const": "strict"
                                  },
                                  {
                                    "description": "If credentials exist, validate them.\nThis is the default option.\nWarning: this allows requests without credentials!",
                                    "type": "string",
                                    "const": "optional"
                                  }
                                ],
                                "default": "optional"
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "keys"
                            ]
                          },
                          "extAuthz": {
                            "description": "Authenticate incoming requests by calling an external authorization server.",
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "protocol": {
                                    "description": "The ext_authz protocol to use. Unless you need to integrate with an HTTP-only server, gRPC is recommended.",
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "grpc": {
                                            "type": "object",
                                            "properties": {
                                              "context": {
                                                "description": "Additional context to send to the authorization service.\nThis maps to the `context_extensions` field of the request, and only allows static values.",
                                                "type": [
                                                  "object",
                                                  "null"
                                                ],
                                                "additionalProperties": {
                                                  "type": "string"
                                                }
                                              },
                                              "metadata": {
                                                "description": "Additional metadata to send to the authorization service.\nThis maps to the `metadata_context.filter_metadata` field of the request, and allows dynamic CEL expressions.\nIf unset, by default the `envoy.filters.http.jwt_authn` key is set if the JWT policy is used as well, for compatibility.",
                                                "type": [
                                                  "object",
                                                  "null"
                                                ],
                                                "additionalProperties": {
                                                  "type": "string"
                                                }
                                              }
                                            },
                                            "additionalProperties": false
                                          }
                                        },
                                        "required": [
                                          "grpc"
                                        ],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "http": {
                                            "type": "object",
                                            "properties": {
                                              "path": {
                                                "type": [
                                                  "string",
                                                  "null"
                                                ]
                                              },
                                              "redirect": {
                                                "description": "When using the HTTP protocol, and the server returns unauthorized, redirect to the URL resolved by\nthe provided expression rather than directly returning the error.",
                                                "type": [
                                                  "string",
                                                  "null"
                                                ]
                                              },
                                              "includeResponseHeaders": {
                                                "description": "Specific headers from the authorization response will be copied into the request to the backend.",
                                                "type": "array",
                                                "items": {
                                                  "type": "string"
                                                }
                                              },
                                              "addRequestHeaders": {
                                                "description": "Specific headers to add in the authorization request (empty = all headers), based on the expression",
                                                "type": "object",
                                                "additionalProperties": {
                                                  "type": "string"
                                                }
                                              },
                                              "metadata": {
                                                "description": "Metadata to include under the `extauthz` variable, based on the authorization response.",
                                                "type": "object",
                                                "additionalProperties": {
                                                  "type": "string"
                                                }
                                              }
                                            },
                                            "additionalProperties": false
                                          }
                                        },
                                        "required": [
                                          "http"
                                        ],
                                        "additionalProperties": false
                                      }
                                    ],
                                    "default": {
                                      "grpc": {}
                                    }
                                  },
                                  "failureMode": {
                                    "description": "Behavior when the authorization service is unavailable or returns an error",
                                    "oneOf": [
                                      {
                                        "type": "string",
                                        "enum": [
                                          "allow",
                                          "deny"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "denyWithStatus": {
                                            "type": "integer",
                                            "format": "uint16",
                                            "minimum": 0,
                                            "maximum": 65535
                                          }
                                        },
                                        "required": [
                                          "denyWithStatus"
                                        ],
                                        "additionalProperties": false
                                      }
                                    ],
                                    "default": "deny"
                                  },
                                  "includeRequestHeaders": {
                                    "description": "Specific headers to include in the authorization request.\nIf unset, the gRPC protocol sends all request headers. The HTTP protocol sends only 'Authorization'.",
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  },
                                  "includeRequestBody": {
                                    "description": "Options for including the request body in the authorization request",
                                    "type": [
                                      "object",
                                      "null"
                                    ],
                                    "properties": {
                                      "maxRequestBytes": {
                                        "description": "Maximum size of request body to buffer (default: 8192)",
                                        "type": "integer",
                                        "format": "uint32",
                                        "minimum": 0,
                                        "default": 0
                                      },
                                      "allowPartialMessage": {
                                        "description": "If true, send partial body when max_request_bytes is reached",
                                        "type": "boolean",
                                        "default": false
                                      },
                                      "packAsBytes": {
                                        "description": "If true, pack body as raw bytes in gRPC",
                                        "type": "boolean",
                                        "default": false
                                      }
                                    },
                                    "additionalProperties": false
                                  },
                                  "timeout": {
                                    "description": "Timeout for the authorization request (default: 200ms)",
                                    "type": [
                                      "string",
                                      "null"
                                    ]
                                  }
                                },
                                "unevaluatedProperties": false,
                                "oneOf": [
                                  {
                                    "type": "string",
                                    "enum": [
                                      "invalid"
                                    ]
                                  },
                                  {
                                    "description": "Service reference. Service must be defined in the top level services list.",
                                    "type": "object",
                                    "properties": {
                                      "service": {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "object",
                                            "properties": {
                                              "namespace": {
                                                "type": "string"
                                              },
                                              "hostname": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "namespace",
                                              "hostname"
                                            ]
                                          },
                                          "port": {
                                            "type": "integer",
                                            "format": "uint16",
                                            "minimum": 0,
                                            "maximum": 65535
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "name",
                                          "port"
                                        ]
                                      }
                                    },
                                    "required": [
                                      "service"
                                    ]
                                  },
                                  {
                                    "description": "Hostname or IP address",
                                    "type": "object",
                                    "properties": {
                                      "host": {
                                        "description": "Hostname or IP address",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "host"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "backend": {
                                        "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "backend"
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "null"
                              }
                            ],
                            "default": null
                          },
                          "extProc": {
                            "description": "Extend agentgateway with an external processor",
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "failureMode": {
                                    "type": "string",
                                    "enum": [
                                      "failClosed",
                                      "failOpen"
                                    ],
                                    "default": "failClosed"
                                  }
                                },
                                "unevaluatedProperties": false,
                                "oneOf": [
                                  {
                                    "type": "string",
                                    "enum": [
                                      "invalid"
                                    ]
                                  },
                                  {
                                    "description": "Service reference. Service must be defined in the top level services list.",
                                    "type": "object",
                                    "properties": {
                                      "service": {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "object",
                                            "properties": {
                                              "namespace": {
                                                "type": "string"
                                              },
                                              "hostname": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "namespace",
                                              "hostname"
                                            ]
                                          },
                                          "port": {
                                            "type": "integer",
                                            "format": "uint16",
                                            "minimum": 0,
                                            "maximum": 65535
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "name",
                                          "port"
                                        ]
                                      }
                                    },
                                    "required": [
                                      "service"
                                    ]
                                  },
                                  {
                                    "description": "Hostname or IP address",
                                    "type": "object",
                                    "properties": {
                                      "host": {
                                        "description": "Hostname or IP address",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "host"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "backend": {
                                        "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "backend"
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "null"
                              }
                            ],
                            "default": null
                          },
                          "transformations": {
                            "description": "Modify requests and responses",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "request": {
                                "type": [
                                  "object",
                                  "null"
                                ],
                                "properties": {
                                  "add": {
                                    "type": "object",
                                    "additionalProperties": {
                                      "type": "string"
                                    },
                                    "default": {}
                                  },
                                  "set": {
                                    "type": "object",
                                    "additionalProperties": {
                                      "type": "string"
                                    },
                                    "default": {}
                                  },
                                  "remove": {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    },
                                    "default": []
                                  },
                                  "body": {
                                    "type": [
                                      "string",
                                      "null"
                                    ],
                                    "default": null
                                  }
                                },
                                "additionalProperties": false
                              },
                              "response": {
                                "type": [
                                  "object",
                                  "null"
                                ],
                                "properties": {
                                  "add": {
                                    "type": "object",
                                    "additionalProperties": {
                                      "type": "string"
                                    },
                                    "default": {}
                                  },
                                  "set": {
                                    "type": "object",
                                    "additionalProperties": {
                                      "type": "string"
                                    },
                                    "default": {}
                                  },
                                  "remove": {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    },
                                    "default": []
                                  },
                                  "body": {
                                    "type": [
                                      "string",
                                      "null"
                                    ],
                                    "default": null
                                  }
                                },
                                "additionalProperties": false
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "csrf": {
                            "description": "Handle CSRF protection by validating request origins against configured allowed origins.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "additionalOrigins": {
                                "type": "array",
                                "uniqueItems": true,
                                "items": {
                                  "type": "string"
                                },
                                "default": []
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "timeout": {
                            "description": "Timeout requests that exceed the configured duration.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "requestTimeout": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "backendRequestTimeout": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "retry": {
                            "description": "Retry matching requests.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "attempts": {
                                "type": "integer",
                                "format": "uint8",
                                "minimum": 1,
                                "maximum": 255,
                                "default": 1
                              },
                              "backoff": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "codes": {
                                "type": "array",
                                "items": {
                                  "type": "integer",
                                  "format": "uint8",
                                  "minimum": 1,
                                  "maximum": 255
                                }
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "codes"
                            ],
                            "default": null
                          }
                        },
                        "additionalProperties": false
                      },
                      "backends": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "weight": {
                              "type": "integer",
                              "format": "uint",
                              "minimum": 0,
                              "default": 1
                            },
                            "policies": {
                              "type": [
                                "object",
                                "null"
                              ],
                              "properties": {
                                "requestHeaderModifier": {
                                  "description": "Headers to be modified in the request.",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "add": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "set": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "remove": {
                                      "type": "array",
                                      "items": {
                                        "type": "string"
                                      }
                                    }
                                  },
                                  "additionalProperties": false,
                                  "default": null
                                },
                                "responseHeaderModifier": {
                                  "description": "Headers to be modified in the response.",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "add": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "set": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "remove": {
                                      "type": "array",
                                      "items": {
                                        "type": "string"
                                      }
                                    }
                                  },
                                  "additionalProperties": false,
                                  "default": null
                                },
                                "requestRedirect": {
                                  "description": "Directly respond to the request with a redirect.",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "scheme": {
                                      "type": [
                                        "string",
                                        "null"
                                      ]
                                    },
                                    "authority": {
                                      "anyOf": [
                                        {
                                          "oneOf": [
                                            {
                                              "type": "string",
                                              "enum": [
                                                "auto",
                                                "none"
                                              ]
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "full": {
                                                  "type": "string"
                                                }
                                              },
                                              "required": [
                                                "full"
                                              ],
                                              "additionalProperties": false
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "host": {
                                                  "type": "string"
                                                }
                                              },
                                              "required": [
                                                "host"
                                              ],
                                              "additionalProperties": false
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "port": {
                                                  "type": "integer",
                                                  "format": "uint16",
                                                  "minimum": 1,
                                                  "maximum": 65535
                                                }
                                              },
                                              "required": [
                                                "port"
                                              ],
                                              "additionalProperties": false
                                            }
                                          ]
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "path": {
                                      "anyOf": [
                                        {
                                          "oneOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "full": {
                                                  "type": "string"
                                                }
                                              },
                                              "required": [
                                                "full"
                                              ],
                                              "additionalProperties": false
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "prefix": {
                                                  "type": "string"
                                                }
                                              },
                                              "required": [
                                                "prefix"
                                              ],
                                              "additionalProperties": false
                                            }
                                          ]
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "status": {
                                      "type": [
                                        "integer",
                                        "null"
                                      ],
                                      "format": "uint16",
                                      "minimum": 1,
                                      "maximum": 65535
                                    }
                                  },
                                  "additionalProperties": false,
                                  "default": null
                                },
                                "mcpAuthorization": {
                                  "description": "Authorization policies for MCP access.",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "rules": {
                                      "type": "array",
                                      "items": {
                                        "type": "string"
                                      }
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "rules"
                                  ],
                                  "default": null
                                },
                                "a2a": {
                                  "description": "Mark this traffic as A2A to enable A2A processing and telemetry.",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "additionalProperties": false,
                                  "default": null
                                },
                                "ai": {
                                  "description": "Mark this as LLM traffic to enable LLM processing.",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "promptGuard": {
                                      "type": [
                                        "object",
                                        "null"
                                      ],
                                      "properties": {
                                        "request": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "rejection": {
                                                "type": "object",
                                                "properties": {
                                                  "body": {
                                                    "type": [
                                                      "array",
                                                      "string"
                                                    ],
                                                    "items": {
                                                      "type": "integer",
                                                      "format": "uint8",
                                                      "minimum": 0,
                                                      "maximum": 255
                                                    },
                                                    "default": "The request was rejected due to inappropriate content"
                                                  },
                                                  "status": {
                                                    "type": "integer",
                                                    "format": "uint16",
                                                    "minimum": 1,
                                                    "maximum": 65535,
                                                    "default": 403
                                                  },
                                                  "headers": {
                                                    "description": "Optional headers to add, set, or remove from the rejection response",
                                                    "type": [
                                                      "object",
                                                      "null"
                                                    ],
                                                    "properties": {
                                                      "add": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "set": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "remove": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      }
                                                    },
                                                    "additionalProperties": false
                                                  }
                                                },
                                                "additionalProperties": false,
                                                "default": {
                                                  "body": "The request was rejected due to inappropriate content",
                                                  "status": 403
                                                }
                                              }
                                            },
                                            "unevaluatedProperties": false,
                                            "oneOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "regex": {
                                                    "type": "object",
                                                    "properties": {
                                                      "action": {
                                                        "type": "string",
                                                        "enum": [
                                                          "mask",
                                                          "reject"
                                                        ],
                                                        "default": "mask"
                                                      },
                                                      "rules": {
                                                        "type": "array",
                                                        "items": {
                                                          "anyOf": [
                                                            {
                                                              "type": "object",
                                                              "properties": {
                                                                "builtin": {
                                                                  "type": "string",
                                                                  "enum": [
                                                                    "ssn",
                                                                    "creditCard",
                                                                    "phoneNumber",
                                                                    "email",
                                                                    "caSin"
                                                                  ]
                                                                }
                                                              },
                                                              "additionalProperties": false,
                                                              "required": [
                                                                "builtin"
                                                              ]
                                                            },
                                                            {
                                                              "type": "object",
                                                              "properties": {
                                                                "pattern": {
                                                                  "type": "string"
                                                                }
                                                              },
                                                              "additionalProperties": false,
                                                              "required": [
                                                                "pattern"
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    },
                                                    "additionalProperties": false,
                                                    "required": [
                                                      "rules"
                                                    ]
                                                  }
                                                },
                                                "required": [
                                                  "regex"
                                                ]
                                              },
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "webhook": {
                                                    "type": "object",
                                                    "properties": {
                                                      "target": {
                                                        "oneOf": [
                                                          {
                                                            "type": "string",
                                                            "enum": [
                                                              "invalid"
                                                            ]
                                                          },
                                                          {
                                                            "description": "Service reference. Service must be defined in the top level services list.",
                                                            "type": "object",
                                                            "properties": {
                                                              "service": {
                                                                "type": "object",
                                                                "properties": {
                                                                  "name": {
                                                                    "type": "object",
                                                                    "properties": {
                                                                      "namespace": {
                                                                        "type": "string"
                                                                      },
                                                                      "hostname": {
                                                                        "type": "string"
                                                                      }
                                                                    },
                                                                    "required": [
                                                                      "namespace",
                                                                      "hostname"
                                                                    ]
                                                                  },
                                                                  "port": {
                                                                    "type": "integer",
                                                                    "format": "uint16",
                                                                    "minimum": 0,
                                                                    "maximum": 65535
                                                                  }
                                                                },
                                                                "additionalProperties": false,
                                                                "required": [
                                                                  "name",
                                                                  "port"
                                                                ]
                                                              }
                                                            },
                                                            "required": [
                                                              "service"
                                                            ],
                                                            "additionalProperties": false
                                                          },
                                                          {
                                                            "description": "Hostname or IP address",
                                                            "type": "object",
                                                            "properties": {
                                                              "host": {
                                                                "description": "Hostname or IP address",
                                                                "type": "string"
                                                              }
                                                            },
                                                            "required": [
                                                              "host"
                                                            ],
                                                            "additionalProperties": false
                                                          },
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "backend": {
                                                                "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                                                "type": "string"
                                                              }
                                                            },
                                                            "required": [
                                                              "backend"
                                                            ],
                                                            "additionalProperties": false
                                                          }
                                                        ]
                                                      },
                                                      "forwardHeaderMatches": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "object",
                                                          "properties": {
                                                            "name": {
                                                              "type": "string"
                                                            },
                                                            "value": {
                                                              "oneOf": [
                                                                {
                                                                  "type": "object",
                                                                  "properties": {
                                                                    "exact": {
                                                                      "type": "string"
                                                                    }
                                                                  },
                                                                  "required": [
                                                                    "exact"
                                                                  ],
                                                                  "additionalProperties": false
                                                                },
                                                                {
                                                                  "type": "object",
                                                                  "properties": {
                                                                    "regex": {
                                                                      "type": "string"
                                                                    }
                                                                  },
                                                                  "required": [
                                                                    "regex"
                                                                  ],
                                                                  "additionalProperties": false
                                                                }
                                                              ]
                                                            }
                                                          },
                                                          "additionalProperties": false,
                                                          "required": [
                                                            "name",
                                                            "value"
                                                          ]
                                                        }
                                                      }
                                                    },
                                                    "additionalProperties": false,
                                                    "required": [
                                                      "target"
                                                    ]
                                                  }
                                                },
                                                "required": [
                                                  "webhook"
                                                ]
                                              },
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "openAIModeration": {
                                                    "type": "object",
                                                    "properties": {
                                                      "model": {
                                                        "description": "Model to use. Defaults to `omni-moderation-latest`",
                                                        "type": [
                                                          "string",
                                                          "null"
                                                        ]
                                                      }
                                                    },
                                                    "additionalProperties": false
                                                  }
                                                },
                                                "required": [
                                                  "openAIModeration"
                                                ]
                                              }
                                            ]
                                          }
                                        },
                                        "response": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "rejection": {
                                                "type": "object",
                                                "properties": {
                                                  "body": {
                                                    "type": [
                                                      "array",
                                                      "string"
                                                    ],
                                                    "items": {
                                                      "type": "integer",
                                                      "format": "uint8",
                                                      "minimum": 0,
                                                      "maximum": 255
                                                    },
                                                    "default": "The request was rejected due to inappropriate content"
                                                  },
                                                  "status": {
                                                    "type": "integer",
                                                    "format": "uint16",
                                                    "minimum": 1,
                                                    "maximum": 65535,
                                                    "default": 403
                                                  },
                                                  "headers": {
                                                    "description": "Optional headers to add, set, or remove from the rejection response",
                                                    "type": [
                                                      "object",
                                                      "null"
                                                    ],
                                                    "properties": {
                                                      "add": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "set": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "remove": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      }
                                                    },
                                                    "additionalProperties": false
                                                  }
                                                },
                                                "additionalProperties": false,
                                                "default": {
                                                  "body": "The request was rejected due to inappropriate content",
                                                  "status": 403
                                                }
                                              }
                                            },
                                            "unevaluatedProperties": false,
                                            "oneOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "regex": {
                                                    "type": "object",
                                                    "properties": {
                                                      "action": {
                                                        "type": "string",
                                                        "enum": [
                                                          "mask",
                                                          "reject"
                                                        ],
                                                        "default": "mask"
                                                      },
                                                      "rules": {
                                                        "type": "array",
                                                        "items": {
                                                          "anyOf": [
                                                            {
                                                              "type": "object",
                                                              "properties": {
                                                                "builtin": {
                                                                  "type": "string",
                                                                  "enum": [
                                                                    "ssn",
                                                                    "creditCard",
                                                                    "phoneNumber",
                                                                    "email",
                                                                    "caSin"
                                                                  ]
                                                                }
                                                              },
                                                              "additionalProperties": false,
                                                              "required": [
                                                                "builtin"
                                                              ]
                                                            },
                                                            {
                                                              "type": "object",
                                                              "properties": {
                                                                "pattern": {
                                                                  "type": "string"
                                                                }
                                                              },
                                                              "additionalProperties": false,
                                                              "required": [
                                                                "pattern"
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    },
                                                    "additionalProperties": false,
                                                    "required": [
                                                      "rules"
                                                    ]
                                                  }
                                                },
                                                "required": [
                                                  "regex"
                                                ]
                                              },
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "webhook": {
                                                    "type": "object",
                                                    "properties": {
                                                      "target": {
                                                        "oneOf": [
                                                          {
                                                            "type": "string",
                                                            "enum": [
                                                              "invalid"
                                                            ]
                                                          },
                                                          {
                                                            "description": "Service reference. Service must be defined in the top level services list.",
                                                            "type": "object",
                                                            "properties": {
                                                              "service": {
                                                                "type": "object",
                                                                "properties": {
                                                                  "name": {
                                                                    "type": "object",
                                                                    "properties": {
                                                                      "namespace": {
                                                                        "type": "string"
                                                                      },
                                                                      "hostname": {
                                                                        "type": "string"
                                                                      }
                                                                    },
                                                                    "required": [
                                                                      "namespace",
                                                                      "hostname"
                                                                    ]
                                                                  },
                                                                  "port": {
                                                                    "type": "integer",
                                                                    "format": "uint16",
                                                                    "minimum": 0,
                                                                    "maximum": 65535
                                                                  }
                                                                },
                                                                "additionalProperties": false,
                                                                "required": [
                                                                  "name",
                                                                  "port"
                                                                ]
                                                              }
                                                            },
                                                            "required": [
                                                              "service"
                                                            ],
                                                            "additionalProperties": false
                                                          },
                                                          {
                                                            "description": "Hostname or IP address",
                                                            "type": "object",
                                                            "properties": {
                                                              "host": {
                                                                "description": "Hostname or IP address",
                                                                "type": "string"
                                                              }
                                                            },
                                                            "required": [
                                                              "host"
                                                            ],
                                                            "additionalProperties": false
                                                          },
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "backend": {
                                                                "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                                                "type": "string"
                                                              }
                                                            },
                                                            "required": [
                                                              "backend"
                                                            ],
                                                            "additionalProperties": false
                                                          }
                                                        ]
                                                      },
                                                      "forwardHeaderMatches": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "object",
                                                          "properties": {
                                                            "name": {
                                                              "type": "string"
                                                            },
                                                            "value": {
                                                              "oneOf": [
                                                                {
                                                                  "type": "object",
                                                                  "properties": {
                                                                    "exact": {
                                                                      "type": "string"
                                                                    }
                                                                  },
                                                                  "required": [
                                                                    "exact"
                                                                  ],
                                                                  "additionalProperties": false
                                                                },
                                                                {
                                                                  "type": "object",
                                                                  "properties": {
                                                                    "regex": {
                                                                      "type": "string"
                                                                    }
                                                                  },
                                                                  "required": [
                                                                    "regex"
                                                                  ],
                                                                  "additionalProperties": false
                                                                }
                                                              ]
                                                            }
                                                          },
                                                          "additionalProperties": false,
                                                          "required": [
                                                            "name",
                                                            "value"
                                                          ]
                                                        }
                                                      }
                                                    },
                                                    "additionalProperties": false,
                                                    "required": [
                                                      "target"
                                                    ]
                                                  }
                                                },
                                                "required": [
                                                  "webhook"
                                                ]
                                              }
                                            ]
                                          }
                                        }
                                      },
                                      "additionalProperties": false
                                    },
                                    "defaults": {
                                      "type": [
                                        "object",
                                        "null"
                                      ],
                                      "additionalProperties": true
                                    },
                                    "overrides": {
                                      "type": [
                                        "object",
                                        "null"
                                      ],
                                      "additionalProperties": true
                                    },
                                    "prompts": {
                                      "type": [
                                        "object",
                                        "null"
                                      ],
                                      "properties": {
                                        "append": {
                                          "type": "array",
                                          "items": {
                                            "description": "SimpleChatCompletionMessage is a simplified chat message",
                                            "type": "object",
                                            "properties": {
                                              "role": {
                                                "type": "string"
                                              },
                                              "content": {
                                                "type": "string"
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "role",
                                              "content"
                                            ]
                                          }
                                        },
                                        "prepend": {
                                          "type": "array",
                                          "items": {
                                            "description": "SimpleChatCompletionMessage is a simplified chat message",
                                            "type": "object",
                                            "properties": {
                                              "role": {
                                                "type": "string"
                                              },
                                              "content": {
                                                "type": "string"
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "role",
                                              "content"
                                            ]
                                          }
                                        }
                                      },
                                      "additionalProperties": false,
                                      "required": [
                                        "prepend"
                                      ]
                                    },
                                    "modelAliases": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "promptCaching": {
                                      "type": [
                                        "object",
                                        "null"
                                      ],
                                      "properties": {
                                        "cacheSystem": {
                                          "type": "boolean",
                                          "default": true
                                        },
                                        "cacheMessages": {
                                          "type": "boolean",
                                          "default": true
                                        },
                                        "cacheTools": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "minTokens": {
                                          "type": [
                                            "integer",
                                            "null"
                                          ],
                                          "format": "uint",
                                          "minimum": 0,
                                          "default": 1024
                                        }
                                      },
                                      "additionalProperties": false
                                    },
                                    "routes": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    }
                                  },
                                  "additionalProperties": false,
                                  "default": null
                                },
                                "backendTLS": {
                                  "description": "Send TLS to the backend.",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "cert": {
                                      "type": [
                                        "string",
                                        "null"
                                      ]
                                    },
                                    "key": {
                                      "type": [
                                        "string",
                                        "null"
                                      ]
                                    },
                                    "root": {
                                      "type": [
                                        "string",
                                        "null"
                                      ]
                                    },
                                    "hostname": {
                                      "type": [
                                        "string",
                                        "null"
                                      ]
                                    },
                                    "insecure": {
                                      "type": "boolean",
                                      "default": false
                                    },
                                    "insecureHost": {
                                      "type": "boolean",
                                      "default": false
                                    },
                                    "alpn": {
                                      "type": [
                                        "array",
                                        "null"
                                      ],
                                      "items": {
                                        "type": "string"
                                      },
                                      "default": null
                                    },
                                    "subjectAltNames": {
                                      "type": [
                                        "array",
                                        "null"
                                      ],
                                      "items": {
                                        "type": "string"
                                      },
                                      "default": null
                                    }
                                  },
                                  "additionalProperties": false
                                },
                                "backendAuth": {
                                  "description": "Authenticate to the backend.",
                                  "anyOf": [
                                    {
                                      "oneOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "passthrough": {
                                              "type": "object",
                                              "additionalProperties": false
                                            }
                                          },
                                          "required": [
                                            "passthrough"
                                          ],
                                          "additionalProperties": false
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "key": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "file": {
                                                      "type": "string"
                                                    }
                                                  },
                                                  "required": [
                                                    "file"
                                                  ]
                                                },
                                                {
                                                  "type": "string"
                                                }
                                              ]
                                            }
                                          },
                                          "required": [
                                            "key"
                                          ],
                                          "additionalProperties": false
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "gcp": {
                                              "type": "object",
                                              "additionalProperties": false
                                            }
                                          },
                                          "required": [
                                            "gcp"
                                          ],
                                          "additionalProperties": false
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "aws": {
                                              "anyOf": [
                                                {
                                                  "description": "Use explicit AWS credentials",
                                                  "type": "object",
                                                  "properties": {
                                                    "accessKeyId": {
                                                      "type": "string"
                                                    },
                                                    "secretAccessKey": {
                                                      "type": "string"
                                                    },
                                                    "region": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    },
                                                    "sessionToken": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    }
                                                  },
                                                  "additionalProperties": false,
                                                  "required": [
                                                    "accessKeyId",
                                                    "secretAccessKey"
                                                  ]
                                                },
                                                {
                                                  "description": "Use implicit AWS authentication (environment variables, IAM roles, etc.)",
                                                  "type": "object",
                                                  "additionalProperties": false
                                                }
                                              ]
                                            }
                                          },
                                          "required": [
                                            "aws"
                                          ],
                                          "additionalProperties": false
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "azure": {
                                              "oneOf": [
                                                {
                                                  "description": "Use explicit Azure credentials",
                                                  "type": "object",
                                                  "properties": {
                                                    "explicitConfig": {
                                                      "type": "object",
                                                      "unevaluatedProperties": false,
                                                      "oneOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "clientSecret": {
                                                              "type": "object",
                                                              "properties": {
                                                                "tenant_id": {
                                                                  "type": "string"
                                                                },
                                                                "client_id": {
                                                                  "type": "string"
                                                                },
                                                                "client_secret": {
                                                                  "type": "string"
                                                                }
                                                              },
                                                              "additionalProperties": false,
                                                              "required": [
                                                                "tenant_id",
                                                                "client_id",
                                                                "client_secret"
                                                              ]
                                                            }
                                                          },
                                                          "required": [
                                                            "clientSecret"
                                                          ]
                                                        },
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "managedIdentity": {
                                                              "type": "object",
                                                              "properties": {
                                                                "userAssignedIdentity": {
                                                                  "anyOf": [
                                                                    {
                                                                      "oneOf": [
                                                                        {
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "clientId": {
                                                                              "type": "string"
                                                                            }
                                                                          },
                                                                          "required": [
                                                                            "clientId"
                                                                          ],
                                                                          "additionalProperties": false
                                                                        },
                                                                        {
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "objectId": {
                                                                              "type": "string"
                                                                            }
                                                                          },
                                                                          "required": [
                                                                            "objectId"
                                                                          ],
                                                                          "additionalProperties": false
                                                                        },
                                                                        {
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "resourceId": {
                                                                              "type": "string"
                                                                            }
                                                                          },
                                                                          "required": [
                                                                            "resourceId"
                                                                          ],
                                                                          "additionalProperties": false
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "type": "null"
                                                                    }
                                                                  ]
                                                                }
                                                              },
                                                              "additionalProperties": false
                                                            }
                                                          },
                                                          "required": [
                                                            "managedIdentity"
                                                          ]
                                                        },
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "workloadIdentity": {
                                                              "type": "object",
                                                              "additionalProperties": false
                                                            }
                                                          },
                                                          "required": [
                                                            "workloadIdentity"
                                                          ]
                                                        }
                                                      ]
                                                    }
                                                  },
                                                  "required": [
                                                    "explicitConfig"
                                                  ],
                                                  "additionalProperties": false
                                                },
                                                {
                                                  "description": "Use implicit Azure auth. Note that this is for developer use-cases only!",
                                                  "type": "object",
                                                  "properties": {
                                                    "developerImplicit": {
                                                      "type": "object",
                                                      "additionalProperties": false
                                                    }
                                                  },
                                                  "required": [
                                                    "developerImplicit"
                                                  ],
                                                  "additionalProperties": false
                                                }
                                              ]
                                            }
                                          },
                                          "required": [
                                            "azure"
                                          ],
                                          "additionalProperties": false
                                        }
                                      ]
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ],
                                  "default": null
                                },
                                "http": {
                                  "description": "Specify HTTP settings for the backend",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "version": {
                                      "type": [
                                        "string",
                                        "null"
                                      ],
                                      "default": null
                                    },
                                    "requestTimeout": {
                                      "type": [
                                        "string",
                                        "null"
                                      ]
                                    }
                                  },
                                  "additionalProperties": false,
                                  "default": null
                                },
                                "tcp": {
                                  "description": "Specify TCP settings for the backend",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "keepalives": {
                                      "type": "object",
                                      "properties": {
                                        "enabled": {
                                          "type": "boolean",
                                          "default": true
                                        },
                                        "time": {
                                          "type": "string",
                                          "default": "3m0s"
                                        },
                                        "interval": {
                                          "type": "string",
                                          "default": "3m0s"
                                        },
                                        "retries": {
                                          "type": "integer",
                                          "format": "uint32",
                                          "minimum": 0,
                                          "default": 9
                                        }
                                      },
                                      "additionalProperties": false
                                    },
                                    "connectTimeout": {
                                      "type": "object",
                                      "properties": {
                                        "secs": {
                                          "type": "integer",
                                          "format": "uint64",
                                          "minimum": 0
                                        },
                                        "nanos": {
                                          "type": "integer",
                                          "format": "uint32",
                                          "minimum": 0
                                        }
                                      },
                                      "required": [
                                        "secs",
                                        "nanos"
                                      ]
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "keepalives",
                                    "connectTimeout"
                                  ],
                                  "default": null
                                }
                              },
                              "additionalProperties": false
                            }
                          },
                          "unevaluatedProperties": false,
                          "oneOf": [
                            {
                              "type": "string",
                              "enum": [
                                "invalid"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "service": {
                                  "type": "object",
                                  "properties": {
                                    "name": {
                                      "type": "object",
                                      "properties": {
                                        "namespace": {
                                          "type": "string"
                                        },
                                        "hostname": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "namespace",
                                        "hostname"
                                      ]
                                    },
                                    "port": {
                                      "type": "integer",
                                      "format": "uint16",
                                      "minimum": 0,
                                      "maximum": 65535
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "name",
                                    "port"
                                  ]
                                }
                              },
                              "required": [
                                "service"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "host": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "host"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "dynamic": {
                                  "type": "object",
                                  "additionalProperties": false
                                }
                              },
                              "required": [
                                "dynamic"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "mcp": {
                                  "type": "object",
                                  "properties": {
                                    "targets": {
                                      "type": "array",
                                      "items": {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "name"
                                        ],
                                        "unevaluatedProperties": false,
                                        "oneOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "sse": {
                                                "type": "object",
                                                "properties": {
                                                  "host": {
                                                    "type": "string"
                                                  },
                                                  "port": {
                                                    "type": [
                                                      "integer",
                                                      "null"
                                                    ],
                                                    "format": "uint16",
                                                    "minimum": 0,
                                                    "maximum": 65535
                                                  },
                                                  "path": {
                                                    "type": [
                                                      "string",
                                                      "null"
                                                    ]
                                                  }
                                                },
                                                "additionalProperties": false,
                                                "required": [
                                                  "host"
                                                ]
                                              }
                                            },
                                            "required": [
                                              "sse"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "mcp": {
                                                "type": "object",
                                                "properties": {
                                                  "host": {
                                                    "type": "string"
                                                  },
                                                  "port": {
                                                    "type": [
                                                      "integer",
                                                      "null"
                                                    ],
                                                    "format": "uint16",
                                                    "minimum": 0,
                                                    "maximum": 65535
                                                  },
                                                  "path": {
                                                    "type": [
                                                      "string",
                                                      "null"
                                                    ]
                                                  }
                                                },
                                                "additionalProperties": false,
                                                "required": [
                                                  "host"
                                                ]
                                              }
                                            },
                                            "required": [
                                              "mcp"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "stdio": {
                                                "type": "object",
                                                "properties": {
                                                  "cmd": {
                                                    "type": "string"
                                                  },
                                                  "args": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string"
                                                    }
                                                  },
                                                  "env": {
                                                    "type": "object",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    }
                                                  }
                                                },
                                                "additionalProperties": false,
                                                "required": [
                                                  "cmd"
                                                ]
                                              }
                                            },
                                            "required": [
                                              "stdio"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "openapi": {
                                                "type": "object",
                                                "properties": {
                                                  "host": {
                                                    "type": "string"
                                                  },
                                                  "port": {
                                                    "type": [
                                                      "integer",
                                                      "null"
                                                    ],
                                                    "format": "uint16",
                                                    "minimum": 0,
                                                    "maximum": 65535
                                                  },
                                                  "path": {
                                                    "type": [
                                                      "string",
                                                      "null"
                                                    ]
                                                  },
                                                  "schema": true
                                                },
                                                "additionalProperties": false,
                                                "required": [
                                                  "host",
                                                  "schema"
                                                ]
                                              }
                                            },
                                            "required": [
                                              "openapi"
                                            ]
                                          }
                                        ]
                                      }
                                    },
                                    "statefulMode": {
                                      "type": "string",
                                      "enum": [
                                        "stateless",
                                        "stateful"
                                      ]
                                    },
                                    "prefixMode": {
                                      "type": [
                                        "string",
                                        "null"
                                      ],
                                      "enum": [
                                        "always",
                                        "conditional",
                                        null
                                      ]
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "targets"
                                  ]
                                }
                              },
                              "required": [
                                "mcp"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "ai": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "name": {
                                          "type": "string"
                                        },
                                        "provider": {
                                          "oneOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "openAI": {
                                                  "type": "object",
                                                  "properties": {
                                                    "model": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    }
                                                  },
                                                  "additionalProperties": false
                                                }
                                              },
                                              "required": [
                                                "openAI"
                                              ],
                                              "additionalProperties": false
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "gemini": {
                                                  "type": "object",
                                                  "properties": {
                                                    "model": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    }
                                                  }
                                                }
                                              },
                                              "required": [
                                                "gemini"
                                              ],
                                              "additionalProperties": false
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "vertex": {
                                                  "type": "object",
                                                  "properties": {
                                                    "model": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    },
                                                    "region": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    },
                                                    "projectId": {
                                                      "type": "string"
                                                    }
                                                  },
                                                  "required": [
                                                    "projectId"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "vertex"
                                              ],
                                              "additionalProperties": false
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "anthropic": {
                                                  "type": "object",
                                                  "properties": {
                                                    "model": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    }
                                                  },
                                                  "additionalProperties": false
                                                }
                                              },
                                              "required": [
                                                "anthropic"
                                              ],
                                              "additionalProperties": false
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "bedrock": {
                                                  "type": "object",
                                                  "properties": {
                                                    "model": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    },
                                                    "region": {
                                                      "type": "string"
                                                    },
                                                    "guardrailIdentifier": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    },
                                                    "guardrailVersion": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    }
                                                  },
                                                  "required": [
                                                    "region"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "bedrock"
                                              ],
                                              "additionalProperties": false
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "azureOpenAI": {
                                                  "type": "object",
                                                  "properties": {
                                                    "model": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    },
                                                    "host": {
                                                      "type": "string"
                                                    },
                                                    "apiVersion": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    }
                                                  },
                                                  "additionalProperties": false,
                                                  "required": [
                                                    "host"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "azureOpenAI"
                                              ],
                                              "additionalProperties": false
                                            }
                                          ]
                                        },
                                        "hostOverride": {
                                          "type": [
                                            "string",
                                            "null"
                                          ]
                                        },
                                        "pathOverride": {
                                          "type": [
                                            "string",
                                            "null"
                                          ]
                                        },
                                        "tokenize": {
                                          "description": "Whether to tokenize on the request flow. This enables us to do more accurate rate limits,\nsince we know (part of) the cost of the request upfront.\nThis comes with the cost of an expensive operation.",
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "policies": {
                                          "type": [
                                            "object",
                                            "null"
                                          ],
                                          "properties": {
                                            "requestHeaderModifier": {
                                              "description": "Headers to be modified in the request.",
                                              "type": [
                                                "object",
                                                "null"
                                              ],
                                              "properties": {
                                                "add": {
                                                  "type": "object",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  }
                                                },
                                                "set": {
                                                  "type": "object",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  }
                                                },
                                                "remove": {
                                                  "type": "array",
                                                  "items": {
                                                    "type": "string"
                                                  }
                                                }
                                              },
                                              "additionalProperties": false,
                                              "default": null
                                            },
                                            "responseHeaderModifier": {
                                              "description": "Headers to be modified in the response.",
                                              "type": [
                                                "object",
                                                "null"
                                              ],
                                              "properties": {
                                                "add": {
                                                  "type": "object",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  }
                                                },
                                                "set": {
                                                  "type": "object",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  }
                                                },
                                                "remove": {
                                                  "type": "array",
                                                  "items": {
                                                    "type": "string"
                                                  }
                                                }
                                              },
                                              "additionalProperties": false,
                                              "default": null
                                            },
                                            "requestRedirect": {
                                              "description": "Directly respond to the request with a redirect.",
                                              "type": [
                                                "object",
                                                "null"
                                              ],
                                              "properties": {
                                                "scheme": {
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ]
                                                },
                                                "authority": {
                                                  "anyOf": [
                                                    {
                                                      "oneOf": [
                                                        {
                                                          "type": "string",
                                                          "enum": [
                                                            "auto",
                                                            "none"
                                                          ]
                                                        },
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "full": {
                                                              "type": "string"
                                                            }
                                                          },
                                                          "required": [
                                                            "full"
                                                          ],
                                                          "additionalProperties": false
                                                        },
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "host": {
                                                              "type": "string"
                                                            }
                                                          },
                                                          "required": [
                                                            "host"
                                                          ],
                                                          "additionalProperties": false
                                                        },
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "port": {
                                                              "type": "integer",
                                                              "format": "uint16",
                                                              "minimum": 1,
                                                              "maximum": 65535
                                                            }
                                                          },
                                                          "required": [
                                                            "port"
                                                          ],
                                                          "additionalProperties": false
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "null"
                                                    }
                                                  ]
                                                },
                                                "path": {
                                                  "anyOf": [
                                                    {
                                                      "oneOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "full": {
                                                              "type": "string"
                                                            }
                                                          },
                                                          "required": [
                                                            "full"
                                                          ],
                                                          "additionalProperties": false
                                                        },
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "prefix": {
                                                              "type": "string"
                                                            }
                                                          },
                                                          "required": [
                                                            "prefix"
                                                          ],
                                                          "additionalProperties": false
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "type": "null"
                                                    }
                                                  ]
                                                },
                                                "status": {
                                                  "type": [
                                                    "integer",
                                                    "null"
                                                  ],
                                                  "format": "uint16",
                                                  "minimum": 1,
                                                  "maximum": 65535
                                                }
                                              },
                                              "additionalProperties": false,
                                              "default": null
                                            },
                                            "mcpAuthorization": {
                                              "description": "Authorization policies for MCP access.",
                                              "type": [
                                                "object",
                                                "null"
                                              ],
                                              "properties": {
                                                "rules": {
                                                  "type": "array",
                                                  "items": {
                                                    "type": "string"
                                                  }
                                                }
                                              },
                                              "additionalProperties": false,
                                              "required": [
                                                "rules"
                                              ],
                                              "default": null
                                            },
                                            "a2a": {
                                              "description": "Mark this traffic as A2A to enable A2A processing and telemetry.",
                                              "type": [
                                                "object",
                                                "null"
                                              ],
                                              "additionalProperties": false,
                                              "default": null
                                            },
                                            "ai": {
                                              "description": "Mark this as LLM traffic to enable LLM processing.",
                                              "type": [
                                                "object",
                                                "null"
                                              ],
                                              "properties": {
                                                "promptGuard": {
                                                  "type": [
                                                    "object",
                                                    "null"
                                                  ],
                                                  "properties": {
                                                    "request": {
                                                      "type": "array",
                                                      "items": {
                                                        "type": "object",
                                                        "properties": {
                                                          "rejection": {
                                                            "type": "object",
                                                            "properties": {
                                                              "body": {
                                                                "type": [
                                                                  "array",
                                                                  "string"
                                                                ],
                                                                "items": {
                                                                  "type": "integer",
                                                                  "format": "uint8",
                                                                  "minimum": 0,
                                                                  "maximum": 255
                                                                },
                                                                "default": "The request was rejected due to inappropriate content"
                                                              },
                                                              "status": {
                                                                "type": "integer",
                                                                "format": "uint16",
                                                                "minimum": 1,
                                                                "maximum": 65535,
                                                                "default": 403
                                                              },
                                                              "headers": {
                                                                "description": "Optional headers to add, set, or remove from the rejection response",
                                                                "type": [
                                                                  "object",
                                                                  "null"
                                                                ],
                                                                "properties": {
                                                                  "add": {
                                                                    "type": "object",
                                                                    "additionalProperties": {
                                                                      "type": "string"
                                                                    }
                                                                  },
                                                                  "set": {
                                                                    "type": "object",
                                                                    "additionalProperties": {
                                                                      "type": "string"
                                                                    }
                                                                  },
                                                                  "remove": {
                                                                    "type": "array",
                                                                    "items": {
                                                                      "type": "string"
                                                                    }
                                                                  }
                                                                },
                                                                "additionalProperties": false
                                                              }
                                                            },
                                                            "additionalProperties": false,
                                                            "default": {
                                                              "body": "The request was rejected due to inappropriate content",
                                                              "status": 403
                                                            }
                                                          }
                                                        },
                                                        "unevaluatedProperties": false,
                                                        "oneOf": [
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "regex": {
                                                                "type": "object",
                                                                "properties": {
                                                                  "action": {
                                                                    "type": "string",
                                                                    "enum": [
                                                                      "mask",
                                                                      "reject"
                                                                    ],
                                                                    "default": "mask"
                                                                  },
                                                                  "rules": {
                                                                    "type": "array",
                                                                    "items": {
                                                                      "anyOf": [
                                                                        {
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "builtin": {
                                                                              "type": "string",
                                                                              "enum": [
                                                                                "ssn",
                                                                                "creditCard",
                                                                                "phoneNumber",
                                                                                "email",
                                                                                "caSin"
                                                                              ]
                                                                            }
                                                                          },
                                                                          "additionalProperties": false,
                                                                          "required": [
                                                                            "builtin"
                                                                          ]
                                                                        },
                                                                        {
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "pattern": {
                                                                              "type": "string"
                                                                            }
                                                                          },
                                                                          "additionalProperties": false,
                                                                          "required": [
                                                                            "pattern"
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  }
                                                                },
                                                                "additionalProperties": false,
                                                                "required": [
                                                                  "rules"
                                                                ]
                                                              }
                                                            },
                                                            "required": [
                                                              "regex"
                                                            ]
                                                          },
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "webhook": {
                                                                "type": "object",
                                                                "properties": {
                                                                  "target": {
                                                                    "oneOf": [
                                                                      {
                                                                        "type": "string",
                                                                        "enum": [
                                                                          "invalid"
                                                                        ]
                                                                      },
                                                                      {
                                                                        "description": "Service reference. Service must be defined in the top level services list.",
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "service": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                              "name": {
                                                                                "type": "object",
                                                                                "properties": {
                                                                                  "namespace": {
                                                                                    "type": "string"
                                                                                  },
                                                                                  "hostname": {
                                                                                    "type": "string"
                                                                                  }
                                                                                },
                                                                                "required": [
                                                                                  "namespace",
                                                                                  "hostname"
                                                                                ]
                                                                              },
                                                                              "port": {
                                                                                "type": "integer",
                                                                                "format": "uint16",
                                                                                "minimum": 0,
                                                                                "maximum": 65535
                                                                              }
                                                                            },
                                                                            "additionalProperties": false,
                                                                            "required": [
                                                                              "name",
                                                                              "port"
                                                                            ]
                                                                          }
                                                                        },
                                                                        "required": [
                                                                          "service"
                                                                        ],
                                                                        "additionalProperties": false
                                                                      },
                                                                      {
                                                                        "description": "Hostname or IP address",
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "host": {
                                                                            "description": "Hostname or IP address",
                                                                            "type": "string"
                                                                          }
                                                                        },
                                                                        "required": [
                                                                          "host"
                                                                        ],
                                                                        "additionalProperties": false
                                                                      },
                                                                      {
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "backend": {
                                                                            "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                                                            "type": "string"
                                                                          }
                                                                        },
                                                                        "required": [
                                                                          "backend"
                                                                        ],
                                                                        "additionalProperties": false
                                                                      }
                                                                    ]
                                                                  },
                                                                  "forwardHeaderMatches": {
                                                                    "type": "array",
                                                                    "items": {
                                                                      "type": "object",
                                                                      "properties": {
                                                                        "name": {
                                                                          "type": "string"
                                                                        },
                                                                        "value": {
                                                                          "oneOf": [
                                                                            {
                                                                              "type": "object",
                                                                              "properties": {
                                                                                "exact": {
                                                                                  "type": "string"
                                                                                }
                                                                              },
                                                                              "required": [
                                                                                "exact"
                                                                              ],
                                                                              "additionalProperties": false
                                                                            },
                                                                            {
                                                                              "type": "object",
                                                                              "properties": {
                                                                                "regex": {
                                                                                  "type": "string"
                                                                                }
                                                                              },
                                                                              "required": [
                                                                                "regex"
                                                                              ],
                                                                              "additionalProperties": false
                                                                            }
                                                                          ]
                                                                        }
                                                                      },
                                                                      "additionalProperties": false,
                                                                      "required": [
                                                                        "name",
                                                                        "value"
                                                                      ]
                                                                    }
                                                                  }
                                                                },
                                                                "additionalProperties": false,
                                                                "required": [
                                                                  "target"
                                                                ]
                                                              }
                                                            },
                                                            "required": [
                                                              "webhook"
                                                            ]
                                                          },
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "openAIModeration": {
                                                                "type": "object",
                                                                "properties": {
                                                                  "model": {
                                                                    "description": "Model to use. Defaults to `omni-moderation-latest`",
                                                                    "type": [
                                                                      "string",
                                                                      "null"
                                                                    ]
                                                                  }
                                                                },
                                                                "additionalProperties": false
                                                              }
                                                            },
                                                            "required": [
                                                              "openAIModeration"
                                                            ]
                                                          }
                                                        ]
                                                      }
                                                    },
                                                    "response": {
                                                      "type": "array",
                                                      "items": {
                                                        "type": "object",
                                                        "properties": {
                                                          "rejection": {
                                                            "type": "object",
                                                            "properties": {
                                                              "body": {
                                                                "type": [
                                                                  "array",
                                                                  "string"
                                                                ],
                                                                "items": {
                                                                  "type": "integer",
                                                                  "format": "uint8",
                                                                  "minimum": 0,
                                                                  "maximum": 255
                                                                },
                                                                "default": "The request was rejected due to inappropriate content"
                                                              },
                                                              "status": {
                                                                "type": "integer",
                                                                "format": "uint16",
                                                                "minimum": 1,
                                                                "maximum": 65535,
                                                                "default": 403
                                                              },
                                                              "headers": {
                                                                "description": "Optional headers to add, set, or remove from the rejection response",
                                                                "type": [
                                                                  "object",
                                                                  "null"
                                                                ],
                                                                "properties": {
                                                                  "add": {
                                                                    "type": "object",
                                                                    "additionalProperties": {
                                                                      "type": "string"
                                                                    }
                                                                  },
                                                                  "set": {
                                                                    "type": "object",
                                                                    "additionalProperties": {
                                                                      "type": "string"
                                                                    }
                                                                  },
                                                                  "remove": {
                                                                    "type": "array",
                                                                    "items": {
                                                                      "type": "string"
                                                                    }
                                                                  }
                                                                },
                                                                "additionalProperties": false
                                                              }
                                                            },
                                                            "additionalProperties": false,
                                                            "default": {
                                                              "body": "The request was rejected due to inappropriate content",
                                                              "status": 403
                                                            }
                                                          }
                                                        },
                                                        "unevaluatedProperties": false,
                                                        "oneOf": [
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "regex": {
                                                                "type": "object",
                                                                "properties": {
                                                                  "action": {
                                                                    "type": "string",
                                                                    "enum": [
                                                                      "mask",
                                                                      "reject"
                                                                    ],
                                                                    "default": "mask"
                                                                  },
                                                                  "rules": {
                                                                    "type": "array",
                                                                    "items": {
                                                                      "anyOf": [
                                                                        {
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "builtin": {
                                                                              "type": "string",
                                                                              "enum": [
                                                                                "ssn",
                                                                                "creditCard",
                                                                                "phoneNumber",
                                                                                "email",
                                                                                "caSin"
                                                                              ]
                                                                            }
                                                                          },
                                                                          "additionalProperties": false,
                                                                          "required": [
                                                                            "builtin"
                                                                          ]
                                                                        },
                                                                        {
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "pattern": {
                                                                              "type": "string"
                                                                            }
                                                                          },
                                                                          "additionalProperties": false,
                                                                          "required": [
                                                                            "pattern"
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  }
                                                                },
                                                                "additionalProperties": false,
                                                                "required": [
                                                                  "rules"
                                                                ]
                                                              }
                                                            },
                                                            "required": [
                                                              "regex"
                                                            ]
                                                          },
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "webhook": {
                                                                "type": "object",
                                                                "properties": {
                                                                  "target": {
                                                                    "oneOf": [
                                                                      {
                                                                        "type": "string",
                                                                        "enum": [
                                                                          "invalid"
                                                                        ]
                                                                      },
                                                                      {
                                                                        "description": "Service reference. Service must be defined in the top level services list.",
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "service": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                              "name": {
                                                                                "type": "object",
                                                                                "properties": {
                                                                                  "namespace": {
                                                                                    "type": "string"
                                                                                  },
                                                                                  "hostname": {
                                                                                    "type": "string"
                                                                                  }
                                                                                },
                                                                                "required": [
                                                                                  "namespace",
                                                                                  "hostname"
                                                                                ]
                                                                              },
                                                                              "port": {
                                                                                "type": "integer",
                                                                                "format": "uint16",
                                                                                "minimum": 0,
                                                                                "maximum": 65535
                                                                              }
                                                                            },
                                                                            "additionalProperties": false,
                                                                            "required": [
                                                                              "name",
                                                                              "port"
                                                                            ]
                                                                          }
                                                                        },
                                                                        "required": [
                                                                          "service"
                                                                        ],
                                                                        "additionalProperties": false
                                                                      },
                                                                      {
                                                                        "description": "Hostname or IP address",
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "host": {
                                                                            "description": "Hostname or IP address",
                                                                            "type": "string"
                                                                          }
                                                                        },
                                                                        "required": [
                                                                          "host"
                                                                        ],
                                                                        "additionalProperties": false
                                                                      },
                                                                      {
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "backend": {
                                                                            "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                                                            "type": "string"
                                                                          }
                                                                        },
                                                                        "required": [
                                                                          "backend"
                                                                        ],
                                                                        "additionalProperties": false
                                                                      }
                                                                    ]
                                                                  },
                                                                  "forwardHeaderMatches": {
                                                                    "type": "array",
                                                                    "items": {
                                                                      "type": "object",
                                                                      "properties": {
                                                                        "name": {
                                                                          "type": "string"
                                                                        },
                                                                        "value": {
                                                                          "oneOf": [
                                                                            {
                                                                              "type": "object",
                                                                              "properties": {
                                                                                "exact": {
                                                                                  "type": "string"
                                                                                }
                                                                              },
                                                                              "required": [
                                                                                "exact"
                                                                              ],
                                                                              "additionalProperties": false
                                                                            },
                                                                            {
                                                                              "type": "object",
                                                                              "properties": {
                                                                                "regex": {
                                                                                  "type": "string"
                                                                                }
                                                                              },
                                                                              "required": [
                                                                                "regex"
                                                                              ],
                                                                              "additionalProperties": false
                                                                            }
                                                                          ]
                                                                        }
                                                                      },
                                                                      "additionalProperties": false,
                                                                      "required": [
                                                                        "name",
                                                                        "value"
                                                                      ]
                                                                    }
                                                                  }
                                                                },
                                                                "additionalProperties": false,
                                                                "required": [
                                                                  "target"
                                                                ]
                                                              }
                                                            },
                                                            "required": [
                                                              "webhook"
                                                            ]
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  },
                                                  "additionalProperties": false
                                                },
                                                "defaults": {
                                                  "type": [
                                                    "object",
                                                    "null"
                                                  ],
                                                  "additionalProperties": true
                                                },
                                                "overrides": {
                                                  "type": [
                                                    "object",
                                                    "null"
                                                  ],
                                                  "additionalProperties": true
                                                },
                                                "prompts": {
                                                  "type": [
                                                    "object",
                                                    "null"
                                                  ],
                                                  "properties": {
                                                    "append": {
                                                      "type": "array",
                                                      "items": {
                                                        "description": "SimpleChatCompletionMessage is a simplified chat message",
                                                        "type": "object",
                                                        "properties": {
                                                          "role": {
                                                            "type": "string"
                                                          },
                                                          "content": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "additionalProperties": false,
                                                        "required": [
                                                          "role",
                                                          "content"
                                                        ]
                                                      }
                                                    },
                                                    "prepend": {
                                                      "type": "array",
                                                      "items": {
                                                        "description": "SimpleChatCompletionMessage is a simplified chat message",
                                                        "type": "object",
                                                        "properties": {
                                                          "role": {
                                                            "type": "string"
                                                          },
                                                          "content": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "additionalProperties": false,
                                                        "required": [
                                                          "role",
                                                          "content"
                                                        ]
                                                      }
                                                    }
                                                  },
                                                  "additionalProperties": false,
                                                  "required": [
                                                    "prepend"
                                                  ]
                                                },
                                                "modelAliases": {
                                                  "type": "object",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  }
                                                },
                                                "promptCaching": {
                                                  "type": [
                                                    "object",
                                                    "null"
                                                  ],
                                                  "properties": {
                                                    "cacheSystem": {
                                                      "type": "boolean",
                                                      "default": true
                                                    },
                                                    "cacheMessages": {
                                                      "type": "boolean",
                                                      "default": true
                                                    },
                                                    "cacheTools": {
                                                      "type": "boolean",
                                                      "default": false
                                                    },
                                                    "minTokens": {
                                                      "type": [
                                                        "integer",
                                                        "null"
                                                      ],
                                                      "format": "uint",
                                                      "minimum": 0,
                                                      "default": 1024
                                                    }
                                                  },
                                                  "additionalProperties": false
                                                },
                                                "routes": {
                                                  "type": "object",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  }
                                                }
                                              },
                                              "additionalProperties": false,
                                              "default": null
                                            },
                                            "backendTLS": {
                                              "description": "Send TLS to the backend.",
                                              "type": [
                                                "object",
                                                "null"
                                              ],
                                              "properties": {
                                                "cert": {
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ]
                                                },
                                                "key": {
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ]
                                                },
                                                "root": {
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ]
                                                },
                                                "hostname": {
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ]
                                                },
                                                "insecure": {
                                                  "type": "boolean",
                                                  "default": false
                                                },
                                                "insecureHost": {
                                                  "type": "boolean",
                                                  "default": false
                                                },
                                                "alpn": {
                                                  "type": [
                                                    "array",
                                                    "null"
                                                  ],
                                                  "items": {
                                                    "type": "string"
                                                  },
                                                  "default": null
                                                },
                                                "subjectAltNames": {
                                                  "type": [
                                                    "array",
                                                    "null"
                                                  ],
                                                  "items": {
                                                    "type": "string"
                                                  },
                                                  "default": null
                                                }
                                              },
                                              "additionalProperties": false
                                            },
                                            "backendAuth": {
                                              "description": "Authenticate to the backend.",
                                              "anyOf": [
                                                {
                                                  "oneOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "passthrough": {
                                                          "type": "object",
                                                          "additionalProperties": false
                                                        }
                                                      },
                                                      "required": [
                                                        "passthrough"
                                                      ],
                                                      "additionalProperties": false
                                                    },
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "key": {
                                                          "anyOf": [
                                                            {
                                                              "type": "object",
                                                              "properties": {
                                                                "file": {
                                                                  "type": "string"
                                                                }
                                                              },
                                                              "required": [
                                                                "file"
                                                              ]
                                                            },
                                                            {
                                                              "type": "string"
                                                            }
                                                          ]
                                                        }
                                                      },
                                                      "required": [
                                                        "key"
                                                      ],
                                                      "additionalProperties": false
                                                    },
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "gcp": {
                                                          "type": "object",
                                                          "additionalProperties": false
                                                        }
                                                      },
                                                      "required": [
                                                        "gcp"
                                                      ],
                                                      "additionalProperties": false
                                                    },
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "aws": {
                                                          "anyOf": [
                                                            {
                                                              "description": "Use explicit AWS credentials",
                                                              "type": "object",
                                                              "properties": {
                                                                "accessKeyId": {
                                                                  "type": "string"
                                                                },
                                                                "secretAccessKey": {
                                                                  "type": "string"
                                                                },
                                                                "region": {
                                                                  "type": [
                                                                    "string",
                                                                    "null"
                                                                  ]
                                                                },
                                                                "sessionToken": {
                                                                  "type": [
                                                                    "string",
                                                                    "null"
                                                                  ]
                                                                }
                                                              },
                                                              "additionalProperties": false,
                                                              "required": [
                                                                "accessKeyId",
                                                                "secretAccessKey"
                                                              ]
                                                            },
                                                            {
                                                              "description": "Use implicit AWS authentication (environment variables, IAM roles, etc.)",
                                                              "type": "object",
                                                              "additionalProperties": false
                                                            }
                                                          ]
                                                        }
                                                      },
                                                      "required": [
                                                        "aws"
                                                      ],
                                                      "additionalProperties": false
                                                    },
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "azure": {
                                                          "oneOf": [
                                                            {
                                                              "description": "Use explicit Azure credentials",
                                                              "type": "object",
                                                              "properties": {
                                                                "explicitConfig": {
                                                                  "type": "object",
                                                                  "unevaluatedProperties": false,
                                                                  "oneOf": [
                                                                    {
                                                                      "type": "object",
                                                                      "properties": {
                                                                        "clientSecret": {
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "tenant_id": {
                                                                              "type": "string"
                                                                            },
                                                                            "client_id": {
                                                                              "type": "string"
                                                                            },
                                                                            "client_secret": {
                                                                              "type": "string"
                                                                            }
                                                                          },
                                                                          "additionalProperties": false,
                                                                          "required": [
                                                                            "tenant_id",
                                                                            "client_id",
                                                                            "client_secret"
                                                                          ]
                                                                        }
                                                                      },
                                                                      "required": [
                                                                        "clientSecret"
                                                                      ]
                                                                    },
                                                                    {
                                                                      "type": "object",
                                                                      "properties": {
                                                                        "managedIdentity": {
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "userAssignedIdentity": {
                                                                              "anyOf": [
                                                                                {
                                                                                  "oneOf": [
                                                                                    {
                                                                                      "type": "object",
                                                                                      "properties": {
                                                                                        "clientId": {
                                                                                          "type": "string"
                                                                                        }
                                                                                      },
                                                                                      "required": [
                                                                                        "clientId"
                                                                                      ],
                                                                                      "additionalProperties": false
                                                                                    },
                                                                                    {
                                                                                      "type": "object",
                                                                                      "properties": {
                                                                                        "objectId": {
                                                                                          "type": "string"
                                                                                        }
                                                                                      },
                                                                                      "required": [
                                                                                        "objectId"
                                                                                      ],
                                                                                      "additionalProperties": false
                                                                                    },
                                                                                    {
                                                                                      "type": "object",
                                                                                      "properties": {
                                                                                        "resourceId": {
                                                                                          "type": "string"
                                                                                        }
                                                                                      },
                                                                                      "required": [
                                                                                        "resourceId"
                                                                                      ],
                                                                                      "additionalProperties": false
                                                                                    }
                                                                                  ]
                                                                                },
                                                                                {
                                                                                  "type": "null"
                                                                                }
                                                                              ]
                                                                            }
                                                                          },
                                                                          "additionalProperties": false
                                                                        }
                                                                      },
                                                                      "required": [
                                                                        "managedIdentity"
                                                                      ]
                                                                    },
                                                                    {
                                                                      "type": "object",
                                                                      "properties": {
                                                                        "workloadIdentity": {
                                                                          "type": "object",
                                                                          "additionalProperties": false
                                                                        }
                                                                      },
                                                                      "required": [
                                                                        "workloadIdentity"
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              },
                                                              "required": [
                                                                "explicitConfig"
                                                              ],
                                                              "additionalProperties": false
                                                            },
                                                            {
                                                              "description": "Use implicit Azure auth. Note that this is for developer use-cases only!",
                                                              "type": "object",
                                                              "properties": {
                                                                "developerImplicit": {
                                                                  "type": "object",
                                                                  "additionalProperties": false
                                                                }
                                                              },
                                                              "required": [
                                                                "developerImplicit"
                                                              ],
                                                              "additionalProperties": false
                                                            }
                                                          ]
                                                        }
                                                      },
                                                      "required": [
                                                        "azure"
                                                      ],
                                                      "additionalProperties": false
                                                    }
                                                  ]
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null
                                            },
                                            "http": {
                                              "description": "Specify HTTP settings for the backend",
                                              "type": [
                                                "object",
                                                "null"
                                              ],
                                              "properties": {
                                                "version": {
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ],
                                                  "default": null
                                                },
                                                "requestTimeout": {
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ]
                                                }
                                              },
                                              "additionalProperties": false,
                                              "default": null
                                            },
                                            "tcp": {
                                              "description": "Specify TCP settings for the backend",
                                              "type": [
                                                "object",
                                                "null"
                                              ],
                                              "properties": {
                                                "keepalives": {
                                                  "type": "object",
                                                  "properties": {
                                                    "enabled": {
                                                      "type": "boolean",
                                                      "default": true
                                                    },
                                                    "time": {
                                                      "type": "string",
                                                      "default": "3m0s"
                                                    },
                                                    "interval": {
                                                      "type": "string",
                                                      "default": "3m0s"
                                                    },
                                                    "retries": {
                                                      "type": "integer",
                                                      "format": "uint32",
                                                      "minimum": 0,
                                                      "default": 9
                                                    }
                                                  },
                                                  "additionalProperties": false
                                                },
                                                "connectTimeout": {
                                                  "type": "object",
                                                  "properties": {
                                                    "secs": {
                                                      "type": "integer",
                                                      "format": "uint64",
                                                      "minimum": 0
                                                    },
                                                    "nanos": {
                                                      "type": "integer",
                                                      "format": "uint32",
                                                      "minimum": 0
                                                    }
                                                  },
                                                  "required": [
                                                    "secs",
                                                    "nanos"
                                                  ]
                                                }
                                              },
                                              "additionalProperties": false,
                                              "required": [
                                                "keepalives",
                                                "connectTimeout"
                                              ],
                                              "default": null
                                            }
                                          },
                                          "additionalProperties": false
                                        }
                                      },
                                      "additionalProperties": false,
                                      "required": [
                                        "name",
                                        "provider"
                                      ]
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "groups": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "providers": {
                                                "type": "array",
                                                "items": {
                                                  "type": "object",
                                                  "properties": {
                                                    "name": {
                                                      "type": "string"
                                                    },
                                                    "provider": {
                                                      "oneOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "openAI": {
                                                              "type": "object",
                                                              "properties": {
                                                                "model": {
                                                                  "type": [
                                                                    "string",
                                                                    "null"
                                                                  ]
                                                                }
                                                              },
                                                              "additionalProperties": false
                                                            }
                                                          },
                                                          "required": [
                                                            "openAI"
                                                          ],
                                                          "additionalProperties": false
                                                        },
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "gemini": {
                                                              "type": "object",
                                                              "properties": {
                                                                "model": {
                                                                  "type": [
                                                                    "string",
                                                                    "null"
                                                                  ]
                                                                }
                                                              }
                                                            }
                                                          },
                                                          "required": [
                                                            "gemini"
                                                          ],
                                                          "additionalProperties": false
                                                        },
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "vertex": {
                                                              "type": "object",
                                                              "properties": {
                                                                "model": {
                                                                  "type": [
                                                                    "string",
                                                                    "null"
                                                                  ]
                                                                },
                                                                "region": {
                                                                  "type": [
                                                                    "string",
                                                                    "null"
                                                                  ]
                                                                },
                                                                "projectId": {
                                                                  "type": "string"
                                                                }
                                                              },
                                                              "required": [
                                                                "projectId"
                                                              ]
                                                            }
                                                          },
                                                          "required": [
                                                            "vertex"
                                                          ],
                                                          "additionalProperties": false
                                                        },
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "anthropic": {
                                                              "type": "object",
                                                              "properties": {
                                                                "model": {
                                                                  "type": [
                                                                    "string",
                                                                    "null"
                                                                  ]
                                                                }
                                                              },
                                                              "additionalProperties": false
                                                            }
                                                          },
                                                          "required": [
                                                            "anthropic"
                                                          ],
                                                          "additionalProperties": false
                                                        },
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "bedrock": {
                                                              "type": "object",
                                                              "properties": {
                                                                "model": {
                                                                  "type": [
                                                                    "string",
                                                                    "null"
                                                                  ]
                                                                },
                                                                "region": {
                                                                  "type": "string"
                                                                },
                                                                "guardrailIdentifier": {
                                                                  "type": [
                                                                    "string",
                                                                    "null"
                                                                  ]
                                                                },
                                                                "guardrailVersion": {
                                                                  "type": [
                                                                    "string",
                                                                    "null"
                                                                  ]
                                                                }
                                                              },
                                                              "required": [
                                                                "region"
                                                              ]
                                                            }
                                                          },
                                                          "required": [
                                                            "bedrock"
                                                          ],
                                                          "additionalProperties": false
                                                        },
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "azureOpenAI": {
                                                              "type": "object",
                                                              "properties": {
                                                                "model": {
                                                                  "type": [
                                                                    "string",
                                                                    "null"
                                                                  ]
                                                                },
                                                                "host": {
                                                                  "type": "string"
                                                                },
                                                                "apiVersion": {
                                                                  "type": [
                                                                    "string",
                                                                    "null"
                                                                  ]
                                                                }
                                                              },
                                                              "additionalProperties": false,
                                                              "required": [
                                                                "host"
                                                              ]
                                                            }
                                                          },
                                                          "required": [
                                                            "azureOpenAI"
                                                          ],
                                                          "additionalProperties": false
                                                        }
                                                      ]
                                                    },
                                                    "hostOverride": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    },
                                                    "pathOverride": {
                                                      "type": [
                                                        "string",
                                                        "null"
                                                      ]
                                                    },
                                                    "tokenize": {
                                                      "description": "Whether to tokenize on the request flow. This enables us to do more accurate rate limits,\nsince we know (part of) the cost of the request upfront.\nThis comes with the cost of an expensive operation.",
                                                      "type": "boolean",
                                                      "default": false
                                                    },
                                                    "policies": {
                                                      "type": [
                                                        "object",
                                                        "null"
                                                      ],
                                                      "properties": {
                                                        "requestHeaderModifier": {
                                                          "description": "Headers to be modified in the request.",
                                                          "type": [
                                                            "object",
                                                            "null"
                                                          ],
                                                          "properties": {
                                                            "add": {
                                                              "type": "object",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "set": {
                                                              "type": "object",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "remove": {
                                                              "type": "array",
                                                              "items": {
                                                                "type": "string"
                                                              }
                                                            }
                                                          },
                                                          "additionalProperties": false,
                                                          "default": null
                                                        },
                                                        "responseHeaderModifier": {
                                                          "description": "Headers to be modified in the response.",
                                                          "type": [
                                                            "object",
                                                            "null"
                                                          ],
                                                          "properties": {
                                                            "add": {
                                                              "type": "object",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "set": {
                                                              "type": "object",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "remove": {
                                                              "type": "array",
                                                              "items": {
                                                                "type": "string"
                                                              }
                                                            }
                                                          },
                                                          "additionalProperties": false,
                                                          "default": null
                                                        },
                                                        "requestRedirect": {
                                                          "description": "Directly respond to the request with a redirect.",
                                                          "type": [
                                                            "object",
                                                            "null"
                                                          ],
                                                          "properties": {
                                                            "scheme": {
                                                              "type": [
                                                                "string",
                                                                "null"
                                                              ]
                                                            },
                                                            "authority": {
                                                              "anyOf": [
                                                                {
                                                                  "oneOf": [
                                                                    {
                                                                      "type": "string",
                                                                      "enum": [
                                                                        "auto",
                                                                        "none"
                                                                      ]
                                                                    },
                                                                    {
                                                                      "type": "object",
                                                                      "properties": {
                                                                        "full": {
                                                                          "type": "string"
                                                                        }
                                                                      },
                                                                      "required": [
                                                                        "full"
                                                                      ],
                                                                      "additionalProperties": false
                                                                    },
                                                                    {
                                                                      "type": "object",
                                                                      "properties": {
                                                                        "host": {
                                                                          "type": "string"
                                                                        }
                                                                      },
                                                                      "required": [
                                                                        "host"
                                                                      ],
                                                                      "additionalProperties": false
                                                                    },
                                                                    {
                                                                      "type": "object",
                                                                      "properties": {
                                                                        "port": {
                                                                          "type": "integer",
                                                                          "format": "uint16",
                                                                          "minimum": 1,
                                                                          "maximum": 65535
                                                                        }
                                                                      },
                                                                      "required": [
                                                                        "port"
                                                                      ],
                                                                      "additionalProperties": false
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "type": "null"
                                                                }
                                                              ]
                                                            },
                                                            "path": {
                                                              "anyOf": [
                                                                {
                                                                  "oneOf": [
                                                                    {
                                                                      "type": "object",
                                                                      "properties": {
                                                                        "full": {
                                                                          "type": "string"
                                                                        }
                                                                      },
                                                                      "required": [
                                                                        "full"
                                                                      ],
                                                                      "additionalProperties": false
                                                                    },
                                                                    {
                                                                      "type": "object",
                                                                      "properties": {
                                                                        "prefix": {
                                                                          "type": "string"
                                                                        }
                                                                      },
                                                                      "required": [
                                                                        "prefix"
                                                                      ],
                                                                      "additionalProperties": false
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "type": "null"
                                                                }
                                                              ]
                                                            },
                                                            "status": {
                                                              "type": [
                                                                "integer",
                                                                "null"
                                                              ],
                                                              "format": "uint16",
                                                              "minimum": 1,
                                                              "maximum": 65535
                                                            }
                                                          },
                                                          "additionalProperties": false,
                                                          "default": null
                                                        },
                                                        "mcpAuthorization": {
                                                          "description": "Authorization policies for MCP access.",
                                                          "type": [
                                                            "object",
                                                            "null"
                                                          ],
                                                          "properties": {
                                                            "rules": {
                                                              "type": "array",
                                                              "items": {
                                                                "type": "string"
                                                              }
                                                            }
                                                          },
                                                          "additionalProperties": false,
                                                          "required": [
                                                            "rules"
                                                          ],
                                                          "default": null
                                                        },
                                                        "a2a": {
                                                          "description": "Mark this traffic as A2A to enable A2A processing and telemetry.",
                                                          "type": [
                                                            "object",
                                                            "null"
                                                          ],
                                                          "additionalProperties": false,
                                                          "default": null
                                                        },
                                                        "ai": {
                                                          "description": "Mark this as LLM traffic to enable LLM processing.",
                                                          "type": [
                                                            "object",
                                                            "null"
                                                          ],
                                                          "properties": {
                                                            "promptGuard": {
                                                              "type": [
                                                                "object",
                                                                "null"
                                                              ],
                                                              "properties": {
                                                                "request": {
                                                                  "type": "array",
                                                                  "items": {
                                                                    "type": "object",
                                                                    "properties": {
                                                                      "rejection": {
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "body": {
                                                                            "type": [
                                                                              "array",
                                                                              "string"
                                                                            ],
                                                                            "items": {
                                                                              "type": "integer",
                                                                              "format": "uint8",
                                                                              "minimum": 0,
                                                                              "maximum": 255
                                                                            },
                                                                            "default": "The request was rejected due to inappropriate content"
                                                                          },
                                                                          "status": {
                                                                            "type": "integer",
                                                                            "format": "uint16",
                                                                            "minimum": 1,
                                                                            "maximum": 65535,
                                                                            "default": 403
                                                                          },
                                                                          "headers": {
                                                                            "description": "Optional headers to add, set, or remove from the rejection response",
                                                                            "type": [
                                                                              "object",
                                                                              "null"
                                                                            ],
                                                                            "properties": {
                                                                              "add": {
                                                                                "type": "object",
                                                                                "additionalProperties": {
                                                                                  "type": "string"
                                                                                }
                                                                              },
                                                                              "set": {
                                                                                "type": "object",
                                                                                "additionalProperties": {
                                                                                  "type": "string"
                                                                                }
                                                                              },
                                                                              "remove": {
                                                                                "type": "array",
                                                                                "items": {
                                                                                  "type": "string"
                                                                                }
                                                                              }
                                                                            },
                                                                            "additionalProperties": false
                                                                          }
                                                                        },
                                                                        "additionalProperties": false,
                                                                        "default": {
                                                                          "body": "The request was rejected due to inappropriate content",
                                                                          "status": 403
                                                                        }
                                                                      }
                                                                    },
                                                                    "unevaluatedProperties": false,
                                                                    "oneOf": [
                                                                      {
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "regex": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                              "action": {
                                                                                "type": "string",
                                                                                "enum": [
                                                                                  "mask",
                                                                                  "reject"
                                                                                ],
                                                                                "default": "mask"
                                                                              },
                                                                              "rules": {
                                                                                "type": "array",
                                                                                "items": {
                                                                                  "anyOf": [
                                                                                    {
                                                                                      "type": "object",
                                                                                      "properties": {
                                                                                        "builtin": {
                                                                                          "type": "string",
                                                                                          "enum": [
                                                                                            "ssn",
                                                                                            "creditCard",
                                                                                            "phoneNumber",
                                                                                            "email",
                                                                                            "caSin"
                                                                                          ]
                                                                                        }
                                                                                      },
                                                                                      "additionalProperties": false,
                                                                                      "required": [
                                                                                        "builtin"
                                                                                      ]
                                                                                    },
                                                                                    {
                                                                                      "type": "object",
                                                                                      "properties": {
                                                                                        "pattern": {
                                                                                          "type": "string"
                                                                                        }
                                                                                      },
                                                                                      "additionalProperties": false,
                                                                                      "required": [
                                                                                        "pattern"
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              }
                                                                            },
                                                                            "additionalProperties": false,
                                                                            "required": [
                                                                              "rules"
                                                                            ]
                                                                          }
                                                                        },
                                                                        "required": [
                                                                          "regex"
                                                                        ]
                                                                      },
                                                                      {
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "webhook": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                              "target": {
                                                                                "oneOf": [
                                                                                  {
                                                                                    "type": "string",
                                                                                    "enum": [
                                                                                      "invalid"
                                                                                    ]
                                                                                  },
                                                                                  {
                                                                                    "description": "Service reference. Service must be defined in the top level services list.",
                                                                                    "type": "object",
                                                                                    "properties": {
                                                                                      "service": {
                                                                                        "type": "object",
                                                                                        "properties": {
                                                                                          "name": {
                                                                                            "type": "object",
                                                                                            "properties": {
                                                                                              "namespace": {
                                                                                                "type": "string"
                                                                                              },
                                                                                              "hostname": {
                                                                                                "type": "string"
                                                                                              }
                                                                                            },
                                                                                            "required": [
                                                                                              "namespace",
                                                                                              "hostname"
                                                                                            ]
                                                                                          },
                                                                                          "port": {
                                                                                            "type": "integer",
                                                                                            "format": "uint16",
                                                                                            "minimum": 0,
                                                                                            "maximum": 65535
                                                                                          }
                                                                                        },
                                                                                        "additionalProperties": false,
                                                                                        "required": [
                                                                                          "name",
                                                                                          "port"
                                                                                        ]
                                                                                      }
                                                                                    },
                                                                                    "required": [
                                                                                      "service"
                                                                                    ],
                                                                                    "additionalProperties": false
                                                                                  },
                                                                                  {
                                                                                    "description": "Hostname or IP address",
                                                                                    "type": "object",
                                                                                    "properties": {
                                                                                      "host": {
                                                                                        "description": "Hostname or IP address",
                                                                                        "type": "string"
                                                                                      }
                                                                                    },
                                                                                    "required": [
                                                                                      "host"
                                                                                    ],
                                                                                    "additionalProperties": false
                                                                                  },
                                                                                  {
                                                                                    "type": "object",
                                                                                    "properties": {
                                                                                      "backend": {
                                                                                        "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                                                                        "type": "string"
                                                                                      }
                                                                                    },
                                                                                    "required": [
                                                                                      "backend"
                                                                                    ],
                                                                                    "additionalProperties": false
                                                                                  }
                                                                                ]
                                                                              },
                                                                              "forwardHeaderMatches": {
                                                                                "type": "array",
                                                                                "items": {
                                                                                  "type": "object",
                                                                                  "properties": {
                                                                                    "name": {
                                                                                      "type": "string"
                                                                                    },
                                                                                    "value": {
                                                                                      "oneOf": [
                                                                                        {
                                                                                          "type": "object",
                                                                                          "properties": {
                                                                                            "exact": {
                                                                                              "type": "string"
                                                                                            }
                                                                                          },
                                                                                          "required": [
                                                                                            "exact"
                                                                                          ],
                                                                                          "additionalProperties": false
                                                                                        },
                                                                                        {
                                                                                          "type": "object",
                                                                                          "properties": {
                                                                                            "regex": {
                                                                                              "type": "string"
                                                                                            }
                                                                                          },
                                                                                          "required": [
                                                                                            "regex"
                                                                                          ],
                                                                                          "additionalProperties": false
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  },
                                                                                  "additionalProperties": false,
                                                                                  "required": [
                                                                                    "name",
                                                                                    "value"
                                                                                  ]
                                                                                }
                                                                              }
                                                                            },
                                                                            "additionalProperties": false,
                                                                            "required": [
                                                                              "target"
                                                                            ]
                                                                          }
                                                                        },
                                                                        "required": [
                                                                          "webhook"
                                                                        ]
                                                                      },
                                                                      {
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "openAIModeration": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                              "model": {
                                                                                "description": "Model to use. Defaults to `omni-moderation-latest`",
                                                                                "type": [
                                                                                  "string",
                                                                                  "null"
                                                                                ]
                                                                              }
                                                                            },
                                                                            "additionalProperties": false
                                                                          }
                                                                        },
                                                                        "required": [
                                                                          "openAIModeration"
                                                                        ]
                                                                      }
                                                                    ]
                                                                  }
                                                                },
                                                                "response": {
                                                                  "type": "array",
                                                                  "items": {
                                                                    "type": "object",
                                                                    "properties": {
                                                                      "rejection": {
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "body": {
                                                                            "type": [
                                                                              "array",
                                                                              "string"
                                                                            ],
                                                                            "items": {
                                                                              "type": "integer",
                                                                              "format": "uint8",
                                                                              "minimum": 0,
                                                                              "maximum": 255
                                                                            },
                                                                            "default": "The request was rejected due to inappropriate content"
                                                                          },
                                                                          "status": {
                                                                            "type": "integer",
                                                                            "format": "uint16",
                                                                            "minimum": 1,
                                                                            "maximum": 65535,
                                                                            "default": 403
                                                                          },
                                                                          "headers": {
                                                                            "description": "Optional headers to add, set, or remove from the rejection response",
                                                                            "type": [
                                                                              "object",
                                                                              "null"
                                                                            ],
                                                                            "properties": {
                                                                              "add": {
                                                                                "type": "object",
                                                                                "additionalProperties": {
                                                                                  "type": "string"
                                                                                }
                                                                              },
                                                                              "set": {
                                                                                "type": "object",
                                                                                "additionalProperties": {
                                                                                  "type": "string"
                                                                                }
                                                                              },
                                                                              "remove": {
                                                                                "type": "array",
                                                                                "items": {
                                                                                  "type": "string"
                                                                                }
                                                                              }
                                                                            },
                                                                            "additionalProperties": false
                                                                          }
                                                                        },
                                                                        "additionalProperties": false,
                                                                        "default": {
                                                                          "body": "The request was rejected due to inappropriate content",
                                                                          "status": 403
                                                                        }
                                                                      }
                                                                    },
                                                                    "unevaluatedProperties": false,
                                                                    "oneOf": [
                                                                      {
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "regex": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                              "action": {
                                                                                "type": "string",
                                                                                "enum": [
                                                                                  "mask",
                                                                                  "reject"
                                                                                ],
                                                                                "default": "mask"
                                                                              },
                                                                              "rules": {
                                                                                "type": "array",
                                                                                "items": {
                                                                                  "anyOf": [
                                                                                    {
                                                                                      "type": "object",
                                                                                      "properties": {
                                                                                        "builtin": {
                                                                                          "type": "string",
                                                                                          "enum": [
                                                                                            "ssn",
                                                                                            "creditCard",
                                                                                            "phoneNumber",
                                                                                            "email",
                                                                                            "caSin"
                                                                                          ]
                                                                                        }
                                                                                      },
                                                                                      "additionalProperties": false,
                                                                                      "required": [
                                                                                        "builtin"
                                                                                      ]
                                                                                    },
                                                                                    {
                                                                                      "type": "object",
                                                                                      "properties": {
                                                                                        "pattern": {
                                                                                          "type": "string"
                                                                                        }
                                                                                      },
                                                                                      "additionalProperties": false,
                                                                                      "required": [
                                                                                        "pattern"
                                                                                      ]
                                                                                    }
                                                                                  ]
                                                                                }
                                                                              }
                                                                            },
                                                                            "additionalProperties": false,
                                                                            "required": [
                                                                              "rules"
                                                                            ]
                                                                          }
                                                                        },
                                                                        "required": [
                                                                          "regex"
                                                                        ]
                                                                      },
                                                                      {
                                                                        "type": "object",
                                                                        "properties": {
                                                                          "webhook": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                              "target": {
                                                                                "oneOf": [
                                                                                  {
                                                                                    "type": "string",
                                                                                    "enum": [
                                                                                      "invalid"
                                                                                    ]
                                                                                  },
                                                                                  {
                                                                                    "description": "Service reference. Service must be defined in the top level services list.",
                                                                                    "type": "object",
                                                                                    "properties": {
                                                                                      "service": {
                                                                                        "type": "object",
                                                                                        "properties": {
                                                                                          "name": {
                                                                                            "type": "object",
                                                                                            "properties": {
                                                                                              "namespace": {
                                                                                                "type": "string"
                                                                                              },
                                                                                              "hostname": {
                                                                                                "type": "string"
                                                                                              }
                                                                                            },
                                                                                            "required": [
                                                                                              "namespace",
                                                                                              "hostname"
                                                                                            ]
                                                                                          },
                                                                                          "port": {
                                                                                            "type": "integer",
                                                                                            "format": "uint16",
                                                                                            "minimum": 0,
                                                                                            "maximum": 65535
                                                                                          }
                                                                                        },
                                                                                        "additionalProperties": false,
                                                                                        "required": [
                                                                                          "name",
                                                                                          "port"
                                                                                        ]
                                                                                      }
                                                                                    },
                                                                                    "required": [
                                                                                      "service"
                                                                                    ],
                                                                                    "additionalProperties": false
                                                                                  },
                                                                                  {
                                                                                    "description": "Hostname or IP address",
                                                                                    "type": "object",
                                                                                    "properties": {
                                                                                      "host": {
                                                                                        "description": "Hostname or IP address",
                                                                                        "type": "string"
                                                                                      }
                                                                                    },
                                                                                    "required": [
                                                                                      "host"
                                                                                    ],
                                                                                    "additionalProperties": false
                                                                                  },
                                                                                  {
                                                                                    "type": "object",
                                                                                    "properties": {
                                                                                      "backend": {
                                                                                        "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                                                                        "type": "string"
                                                                                      }
                                                                                    },
                                                                                    "required": [
                                                                                      "backend"
                                                                                    ],
                                                                                    "additionalProperties": false
                                                                                  }
                                                                                ]
                                                                              },
                                                                              "forwardHeaderMatches": {
                                                                                "type": "array",
                                                                                "items": {
                                                                                  "type": "object",
                                                                                  "properties": {
                                                                                    "name": {
                                                                                      "type": "string"
                                                                                    },
                                                                                    "value": {
                                                                                      "oneOf": [
                                                                                        {
                                                                                          "type": "object",
                                                                                          "properties": {
                                                                                            "exact": {
                                                                                              "type": "string"
                                                                                            }
                                                                                          },
                                                                                          "required": [
                                                                                            "exact"
                                                                                          ],
                                                                                          "additionalProperties": false
                                                                                        },
                                                                                        {
                                                                                          "type": "object",
                                                                                          "properties": {
                                                                                            "regex": {
                                                                                              "type": "string"
                                                                                            }
                                                                                          },
                                                                                          "required": [
                                                                                            "regex"
                                                                                          ],
                                                                                          "additionalProperties": false
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  },
                                                                                  "additionalProperties": false,
                                                                                  "required": [
                                                                                    "name",
                                                                                    "value"
                                                                                  ]
                                                                                }
                                                                              }
                                                                            },
                                                                            "additionalProperties": false,
                                                                            "required": [
                                                                              "target"
                                                                            ]
                                                                          }
                                                                        },
                                                                        "required": [
                                                                          "webhook"
                                                                        ]
                                                                      }
                                                                    ]
                                                                  }
                                                                }
                                                              },
                                                              "additionalProperties": false
                                                            },
                                                            "defaults": {
                                                              "type": [
                                                                "object",
                                                                "null"
                                                              ],
                                                              "additionalProperties": true
                                                            },
                                                            "overrides": {
                                                              "type": [
                                                                "object",
                                                                "null"
                                                              ],
                                                              "additionalProperties": true
                                                            },
                                                            "prompts": {
                                                              "type": [
                                                                "object",
                                                                "null"
                                                              ],
                                                              "properties": {
                                                                "append": {
                                                                  "type": "array",
                                                                  "items": {
                                                                    "description": "SimpleChatCompletionMessage is a simplified chat message",
                                                                    "type": "object",
                                                                    "properties": {
                                                                      "role": {
                                                                        "type": "string"
                                                                      },
                                                                      "content": {
                                                                        "type": "string"
                                                                      }
                                                                    },
                                                                    "additionalProperties": false,
                                                                    "required": [
                                                                      "role",
                                                                      "content"
                                                                    ]
                                                                  }
                                                                },
                                                                "prepend": {
                                                                  "type": "array",
                                                                  "items": {
                                                                    "description": "SimpleChatCompletionMessage is a simplified chat message",
                                                                    "type": "object",
                                                                    "properties": {
                                                                      "role": {
                                                                        "type": "string"
                                                                      },
                                                                      "content": {
                                                                        "type": "string"
                                                                      }
                                                                    },
                                                                    "additionalProperties": false,
                                                                    "required": [
                                                                      "role",
                                                                      "content"
                                                                    ]
                                                                  }
                                                                }
                                                              },
                                                              "additionalProperties": false,
                                                              "required": [
                                                                "prepend"
                                                              ]
                                                            },
                                                            "modelAliases": {
                                                              "type": "object",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "promptCaching": {
                                                              "type": [
                                                                "object",
                                                                "null"
                                                              ],
                                                              "properties": {
                                                                "cacheSystem": {
                                                                  "type": "boolean",
                                                                  "default": true
                                                                },
                                                                "cacheMessages": {
                                                                  "type": "boolean",
                                                                  "default": true
                                                                },
                                                                "cacheTools": {
                                                                  "type": "boolean",
                                                                  "default": false
                                                                },
                                                                "minTokens": {
                                                                  "type": [
                                                                    "integer",
                                                                    "null"
                                                                  ],
                                                                  "format": "uint",
                                                                  "minimum": 0,
                                                                  "default": 1024
                                                                }
                                                              },
                                                              "additionalProperties": false
                                                            },
                                                            "routes": {
                                                              "type": "object",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              }
                                                            }
                                                          },
                                                          "additionalProperties": false,
                                                          "default": null
                                                        },
                                                        "backendTLS": {
                                                          "description": "Send TLS to the backend.",
                                                          "type": [
                                                            "object",
                                                            "null"
                                                          ],
                                                          "properties": {
                                                            "cert": {
                                                              "type": [
                                                                "string",
                                                                "null"
                                                              ]
                                                            },
                                                            "key": {
                                                              "type": [
                                                                "string",
                                                                "null"
                                                              ]
                                                            },
                                                            "root": {
                                                              "type": [
                                                                "string",
                                                                "null"
                                                              ]
                                                            },
                                                            "hostname": {
                                                              "type": [
                                                                "string",
                                                                "null"
                                                              ]
                                                            },
                                                            "insecure": {
                                                              "type": "boolean",
                                                              "default": false
                                                            },
                                                            "insecureHost": {
                                                              "type": "boolean",
                                                              "default": false
                                                            },
                                                            "alpn": {
                                                              "type": [
                                                                "array",
                                                                "null"
                                                              ],
                                                              "items": {
                                                                "type": "string"
                                                              },
                                                              "default": null
                                                            },
                                                            "subjectAltNames": {
                                                              "type": [
                                                                "array",
                                                                "null"
                                                              ],
                                                              "items": {
                                                                "type": "string"
                                                              },
                                                              "default": null
                                                            }
                                                          },
                                                          "additionalProperties": false
                                                        },
                                                        "backendAuth": {
                                                          "description": "Authenticate to the backend.",
                                                          "anyOf": [
                                                            {
                                                              "oneOf": [
                                                                {
                                                                  "type": "object",
                                                                  "properties": {
                                                                    "passthrough": {
                                                                      "type": "object",
                                                                      "additionalProperties": false
                                                                    }
                                                                  },
                                                                  "required": [
                                                                    "passthrough"
                                                                  ],
                                                                  "additionalProperties": false
                                                                },
                                                                {
                                                                  "type": "object",
                                                                  "properties": {
                                                                    "key": {
                                                                      "anyOf": [
                                                                        {
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "file": {
                                                                              "type": "string"
                                                                            }
                                                                          },
                                                                          "required": [
                                                                            "file"
                                                                          ]
                                                                        },
                                                                        {
                                                                          "type": "string"
                                                                        }
                                                                      ]
                                                                    }
                                                                  },
                                                                  "required": [
                                                                    "key"
                                                                  ],
                                                                  "additionalProperties": false
                                                                },
                                                                {
                                                                  "type": "object",
                                                                  "properties": {
                                                                    "gcp": {
                                                                      "type": "object",
                                                                      "additionalProperties": false
                                                                    }
                                                                  },
                                                                  "required": [
                                                                    "gcp"
                                                                  ],
                                                                  "additionalProperties": false
                                                                },
                                                                {
                                                                  "type": "object",
                                                                  "properties": {
                                                                    "aws": {
                                                                      "anyOf": [
                                                                        {
                                                                          "description": "Use explicit AWS credentials",
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "accessKeyId": {
                                                                              "type": "string"
                                                                            },
                                                                            "secretAccessKey": {
                                                                              "type": "string"
                                                                            },
                                                                            "region": {
                                                                              "type": [
                                                                                "string",
                                                                                "null"
                                                                              ]
                                                                            },
                                                                            "sessionToken": {
                                                                              "type": [
                                                                                "string",
                                                                                "null"
                                                                              ]
                                                                            }
                                                                          },
                                                                          "additionalProperties": false,
                                                                          "required": [
                                                                            "accessKeyId",
                                                                            "secretAccessKey"
                                                                          ]
                                                                        },
                                                                        {
                                                                          "description": "Use implicit AWS authentication (environment variables, IAM roles, etc.)",
                                                                          "type": "object",
                                                                          "additionalProperties": false
                                                                        }
                                                                      ]
                                                                    }
                                                                  },
                                                                  "required": [
                                                                    "aws"
                                                                  ],
                                                                  "additionalProperties": false
                                                                },
                                                                {
                                                                  "type": "object",
                                                                  "properties": {
                                                                    "azure": {
                                                                      "oneOf": [
                                                                        {
                                                                          "description": "Use explicit Azure credentials",
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "explicitConfig": {
                                                                              "type": "object",
                                                                              "unevaluatedProperties": false,
                                                                              "oneOf": [
                                                                                {
                                                                                  "type": "object",
                                                                                  "properties": {
                                                                                    "clientSecret": {
                                                                                      "type": "object",
                                                                                      "properties": {
                                                                                        "tenant_id": {
                                                                                          "type": "string"
                                                                                        },
                                                                                        "client_id": {
                                                                                          "type": "string"
                                                                                        },
                                                                                        "client_secret": {
                                                                                          "type": "string"
                                                                                        }
                                                                                      },
                                                                                      "additionalProperties": false,
                                                                                      "required": [
                                                                                        "tenant_id",
                                                                                        "client_id",
                                                                                        "client_secret"
                                                                                      ]
                                                                                    }
                                                                                  },
                                                                                  "required": [
                                                                                    "clientSecret"
                                                                                  ]
                                                                                },
                                                                                {
                                                                                  "type": "object",
                                                                                  "properties": {
                                                                                    "managedIdentity": {
                                                                                      "type": "object",
                                                                                      "properties": {
                                                                                        "userAssignedIdentity": {
                                                                                          "anyOf": [
                                                                                            {
                                                                                              "oneOf": [
                                                                                                {
                                                                                                  "type": "object",
                                                                                                  "properties": {
                                                                                                    "clientId": {
                                                                                                      "type": "string"
                                                                                                    }
                                                                                                  },
                                                                                                  "required": [
                                                                                                    "clientId"
                                                                                                  ],
                                                                                                  "additionalProperties": false
                                                                                                },
                                                                                                {
                                                                                                  "type": "object",
                                                                                                  "properties": {
                                                                                                    "objectId": {
                                                                                                      "type": "string"
                                                                                                    }
                                                                                                  },
                                                                                                  "required": [
                                                                                                    "objectId"
                                                                                                  ],
                                                                                                  "additionalProperties": false
                                                                                                },
                                                                                                {
                                                                                                  "type": "object",
                                                                                                  "properties": {
                                                                                                    "resourceId": {
                                                                                                      "type": "string"
                                                                                                    }
                                                                                                  },
                                                                                                  "required": [
                                                                                                    "resourceId"
                                                                                                  ],
                                                                                                  "additionalProperties": false
                                                                                                }
                                                                                              ]
                                                                                            },
                                                                                            {
                                                                                              "type": "null"
                                                                                            }
                                                                                          ]
                                                                                        }
                                                                                      },
                                                                                      "additionalProperties": false
                                                                                    }
                                                                                  },
                                                                                  "required": [
                                                                                    "managedIdentity"
                                                                                  ]
                                                                                },
                                                                                {
                                                                                  "type": "object",
                                                                                  "properties": {
                                                                                    "workloadIdentity": {
                                                                                      "type": "object",
                                                                                      "additionalProperties": false
                                                                                    }
                                                                                  },
                                                                                  "required": [
                                                                                    "workloadIdentity"
                                                                                  ]
                                                                                }
                                                                              ]
                                                                            }
                                                                          },
                                                                          "required": [
                                                                            "explicitConfig"
                                                                          ],
                                                                          "additionalProperties": false
                                                                        },
                                                                        {
                                                                          "description": "Use implicit Azure auth. Note that this is for developer use-cases only!",
                                                                          "type": "object",
                                                                          "properties": {
                                                                            "developerImplicit": {
                                                                              "type": "object",
                                                                              "additionalProperties": false
                                                                            }
                                                                          },
                                                                          "required": [
                                                                            "developerImplicit"
                                                                          ],
                                                                          "additionalProperties": false
                                                                        }
                                                                      ]
                                                                    }
                                                                  },
                                                                  "required": [
                                                                    "azure"
                                                                  ],
                                                                  "additionalProperties": false
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "type": "null"
                                                            }
                                                          ],
                                                          "default": null
                                                        },
                                                        "http": {
                                                          "description": "Specify HTTP settings for the backend",
                                                          "type": [
                                                            "object",
                                                            "null"
                                                          ],
                                                          "properties": {
                                                            "version": {
                                                              "type": [
                                                                "string",
                                                                "null"
                                                              ],
                                                              "default": null
                                                            },
                                                            "requestTimeout": {
                                                              "type": [
                                                                "string",
                                                                "null"
                                                              ]
                                                            }
                                                          },
                                                          "additionalProperties": false,
                                                          "default": null
                                                        },
                                                        "tcp": {
                                                          "description": "Specify TCP settings for the backend",
                                                          "type": [
                                                            "object",
                                                            "null"
                                                          ],
                                                          "properties": {
                                                            "keepalives": {
                                                              "type": "object",
                                                              "properties": {
                                                                "enabled": {
                                                                  "type": "boolean",
                                                                  "default": true
                                                                },
                                                                "time": {
                                                                  "type": "string",
                                                                  "default": "3m0s"
                                                                },
                                                                "interval": {
                                                                  "type": "string",
                                                                  "default": "3m0s"
                                                                },
                                                                "retries": {
                                                                  "type": "integer",
                                                                  "format": "uint32",
                                                                  "minimum": 0,
                                                                  "default": 9
                                                                }
                                                              },
                                                              "additionalProperties": false
                                                            },
                                                            "connectTimeout": {
                                                              "type": "object",
                                                              "properties": {
                                                                "secs": {
                                                                  "type": "integer",
                                                                  "format": "uint64",
                                                                  "minimum": 0
                                                                },
                                                                "nanos": {
                                                                  "type": "integer",
                                                                  "format": "uint32",
                                                                  "minimum": 0
                                                                }
                                                              },
                                                              "required": [
                                                                "secs",
                                                                "nanos"
                                                              ]
                                                            }
                                                          },
                                                          "additionalProperties": false,
                                                          "required": [
                                                            "keepalives",
                                                            "connectTimeout"
                                                          ],
                                                          "default": null
                                                        }
                                                      },
                                                      "additionalProperties": false
                                                    }
                                                  },
                                                  "additionalProperties": false,
                                                  "required": [
                                                    "name",
                                                    "provider"
                                                  ]
                                                }
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "providers"
                                            ]
                                          }
                                        }
                                      },
                                      "additionalProperties": false,
                                      "required": [
                                        "groups"
                                      ]
                                    }
                                  ]
                                }
                              },
                              "required": [
                                "ai"
                              ]
                            }
                          ]
                        }
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "tcpRoutes": {
                  "type": [
                    "array",
                    "null"
                  ],
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": [
                          "string",
                          "null"
                        ],
                        "default": null
                      },
                      "namespace": {
                        "type": [
                          "string",
                          "null"
                        ],
                        "default": null
                      },
                      "ruleName": {
                        "type": [
                          "string",
                          "null"
                        ],
                        "default": null
                      },
                      "hostnames": {
                        "description": "Can be a wildcard",
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "policies": {
                        "type": [
                          "object",
                          "null"
                        ],
                        "properties": {
                          "backendTLS": {
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "cert": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "key": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "root": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "hostname": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "insecure": {
                                "type": "boolean",
                                "default": false
                              },
                              "insecureHost": {
                                "type": "boolean",
                                "default": false
                              },
                              "alpn": {
                                "type": [
                                  "array",
                                  "null"
                                ],
                                "items": {
                                  "type": "string"
                                },
                                "default": null
                              },
                              "subjectAltNames": {
                                "type": [
                                  "array",
                                  "null"
                                ],
                                "items": {
                                  "type": "string"
                                },
                                "default": null
                              }
                            },
                            "additionalProperties": false
                          }
                        },
                        "additionalProperties": false
                      },
                      "backends": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "weight": {
                              "type": "integer",
                              "format": "uint",
                              "minimum": 0,
                              "default": 1
                            },
                            "policies": {
                              "type": [
                                "object",
                                "null"
                              ],
                              "properties": {
                                "backendTLS": {
                                  "description": "Send TLS to the backend.",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "cert": {
                                      "type": [
                                        "string",
                                        "null"
                                      ]
                                    },
                                    "key": {
                                      "type": [
                                        "string",
                                        "null"
                                      ]
                                    },
                                    "root": {
                                      "type": [
                                        "string",
                                        "null"
                                      ]
                                    },
                                    "hostname": {
                                      "type": [
                                        "string",
                                        "null"
                                      ]
                                    },
                                    "insecure": {
                                      "type": "boolean",
                                      "default": false
                                    },
                                    "insecureHost": {
                                      "type": "boolean",
                                      "default": false
                                    },
                                    "alpn": {
                                      "type": [
                                        "array",
                                        "null"
                                      ],
                                      "items": {
                                        "type": "string"
                                      },
                                      "default": null
                                    },
                                    "subjectAltNames": {
                                      "type": [
                                        "array",
                                        "null"
                                      ],
                                      "items": {
                                        "type": "string"
                                      },
                                      "default": null
                                    }
                                  },
                                  "additionalProperties": false
                                }
                              },
                              "additionalProperties": false
                            }
                          },
                          "unevaluatedProperties": false,
                          "oneOf": [
                            {
                              "type": "string",
                              "enum": [
                                "invalid"
                              ]
                            },
                            {
                              "description": "Service reference. Service must be defined in the top level services list.",
                              "type": "object",
                              "properties": {
                                "service": {
                                  "type": "object",
                                  "properties": {
                                    "name": {
                                      "type": "object",
                                      "properties": {
                                        "namespace": {
                                          "type": "string"
                                        },
                                        "hostname": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "namespace",
                                        "hostname"
                                      ]
                                    },
                                    "port": {
                                      "type": "integer",
                                      "format": "uint16",
                                      "minimum": 0,
                                      "maximum": 65535
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "name",
                                    "port"
                                  ]
                                }
                              },
                              "required": [
                                "service"
                              ]
                            },
                            {
                              "description": "Hostname or IP address",
                              "type": "object",
                              "properties": {
                                "host": {
                                  "description": "Hostname or IP address",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "host"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "backend": {
                                  "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "backend"
                              ]
                            }
                          ]
                        }
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "policies": {
                  "type": [
                    "object",
                    "null"
                  ],
                  "properties": {
                    "jwtAuth": {
                      "description": "Authenticate incoming JWT requests.",
                      "anyOf": [
                        {
                          "anyOf": [
                            {
                              "type": "object",
                              "properties": {
                                "mode": {
                                  "oneOf": [
                                    {
                                      "description": "A valid token, issued by a configured issuer, must be present.",
                                      "type": "string",
                                      "const": "strict"
                                    },
                                    {
                                      "description": "If a token exists, validate it.\nThis is the default option.\nWarning: this allows requests without a JWT token!",
                                      "type": "string",
                                      "const": "optional"
                                    },
                                    {
                                      "description": "Requests are never rejected. This is useful for usage of claims in later steps (authorization, logging, etc).\nWarning: this allows requests without a JWT token!",
                                      "type": "string",
                                      "const": "permissive"
                                    }
                                  ],
                                  "default": "optional"
                                },
                                "providers": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "issuer": {
                                        "type": "string"
                                      },
                                      "audiences": {
                                        "type": [
                                          "array",
                                          "null"
                                        ],
                                        "items": {
                                          "type": "string"
                                        }
                                      },
                                      "jwks": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "file": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "file"
                                            ]
                                          },
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "url": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "url"
                                            ]
                                          }
                                        ]
                                      }
                                    },
                                    "additionalProperties": false,
                                    "required": [
                                      "issuer",
                                      "jwks"
                                    ]
                                  }
                                }
                              },
                              "additionalProperties": false,
                              "required": [
                                "providers"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "mode": {
                                  "oneOf": [
                                    {
                                      "description": "A valid token, issued by a configured issuer, must be present.",
                                      "type": "string",
                                      "const": "strict"
                                    },
                                    {
                                      "description": "If a token exists, validate it.\nThis is the default option.\nWarning: this allows requests without a JWT token!",
                                      "type": "string",
                                      "const": "optional"
                                    },
                                    {
                                      "description": "Requests are never rejected. This is useful for usage of claims in later steps (authorization, logging, etc).\nWarning: this allows requests without a JWT token!",
                                      "type": "string",
                                      "const": "permissive"
                                    }
                                  ],
                                  "default": "optional"
                                },
                                "issuer": {
                                  "type": "string"
                                },
                                "audiences": {
                                  "type": [
                                    "array",
                                    "null"
                                  ],
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "jwks": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "file": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "file"
                                      ]
                                    },
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "url": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "url"
                                      ]
                                    }
                                  ]
                                }
                              },
                              "additionalProperties": false,
                              "required": [
                                "issuer",
                                "jwks"
                              ]
                            }
                          ]
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "extAuthz": {
                      "description": "Authenticate incoming requests by calling an external authorization server.",
                      "anyOf": [
                        {
                          "type": "object",
                          "properties": {
                            "protocol": {
                              "description": "The ext_authz protocol to use. Unless you need to integrate with an HTTP-only server, gRPC is recommended.",
                              "oneOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "grpc": {
                                      "type": "object",
                                      "properties": {
                                        "context": {
                                          "description": "Additional context to send to the authorization service.\nThis maps to the `context_extensions` field of the request, and only allows static values.",
                                          "type": [
                                            "object",
                                            "null"
                                          ],
                                          "additionalProperties": {
                                            "type": "string"
                                          }
                                        },
                                        "metadata": {
                                          "description": "Additional metadata to send to the authorization service.\nThis maps to the `metadata_context.filter_metadata` field of the request, and allows dynamic CEL expressions.\nIf unset, by default the `envoy.filters.http.jwt_authn` key is set if the JWT policy is used as well, for compatibility.",
                                          "type": [
                                            "object",
                                            "null"
                                          ],
                                          "additionalProperties": {
                                            "type": "string"
                                          }
                                        }
                                      },
                                      "additionalProperties": false
                                    }
                                  },
                                  "required": [
                                    "grpc"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "http": {
                                      "type": "object",
                                      "properties": {
                                        "path": {
                                          "type": [
                                            "string",
                                            "null"
                                          ]
                                        },
                                        "redirect": {
                                          "description": "When using the HTTP protocol, and the server returns unauthorized, redirect to the URL resolved by\nthe provided expression rather than directly returning the error.",
                                          "type": [
                                            "string",
                                            "null"
                                          ]
                                        },
                                        "includeResponseHeaders": {
                                          "description": "Specific headers from the authorization response will be copied into the request to the backend.",
                                          "type": "array",
                                          "items": {
                                            "type": "string"
                                          }
                                        },
                                        "addRequestHeaders": {
                                          "description": "Specific headers to add in the authorization request (empty = all headers), based on the expression",
                                          "type": "object",
                                          "additionalProperties": {
                                            "type": "string"
                                          }
                                        },
                                        "metadata": {
                                          "description": "Metadata to include under the `extauthz` variable, based on the authorization response.",
                                          "type": "object",
                                          "additionalProperties": {
                                            "type": "string"
                                          }
                                        }
                                      },
                                      "additionalProperties": false
                                    }
                                  },
                                  "required": [
                                    "http"
                                  ],
                                  "additionalProperties": false
                                }
                              ],
                              "default": {
                                "grpc": {}
                              }
                            },
                            "failureMode": {
                              "description": "Behavior when the authorization service is unavailable or returns an error",
                              "oneOf": [
                                {
                                  "type": "string",
                                  "enum": [
                                    "allow",
                                    "deny"
                                  ]
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "denyWithStatus": {
                                      "type": "integer",
                                      "format": "uint16",
                                      "minimum": 0,
                                      "maximum": 65535
                                    }
                                  },
                                  "required": [
                                    "denyWithStatus"
                                  ],
                                  "additionalProperties": false
                                }
                              ],
                              "default": "deny"
                            },
                            "includeRequestHeaders": {
                              "description": "Specific headers to include in the authorization request.\nIf unset, the gRPC protocol sends all request headers. The HTTP protocol sends only 'Authorization'.",
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "includeRequestBody": {
                              "description": "Options for including the request body in the authorization request",
                              "type": [
                                "object",
                                "null"
                              ],
                              "properties": {
                                "maxRequestBytes": {
                                  "description": "Maximum size of request body to buffer (default: 8192)",
                                  "type": "integer",
                                  "format": "uint32",
                                  "minimum": 0,
                                  "default": 0
                                },
                                "allowPartialMessage": {
                                  "description": "If true, send partial body when max_request_bytes is reached",
                                  "type": "boolean",
                                  "default": false
                                },
                                "packAsBytes": {
                                  "description": "If true, pack body as raw bytes in gRPC",
                                  "type": "boolean",
                                  "default": false
                                }
                              },
                              "additionalProperties": false
                            },
                            "timeout": {
                              "description": "Timeout for the authorization request (default: 200ms)",
                              "type": [
                                "string",
                                "null"
                              ]
                            }
                          },
                          "unevaluatedProperties": false,
                          "oneOf": [
                            {
                              "type": "string",
                              "enum": [
                                "invalid"
                              ]
                            },
                            {
                              "description": "Service reference. Service must be defined in the top level services list.",
                              "type": "object",
                              "properties": {
                                "service": {
                                  "type": "object",
                                  "properties": {
                                    "name": {
                                      "type": "object",
                                      "properties": {
                                        "namespace": {
                                          "type": "string"
                                        },
                                        "hostname": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "namespace",
                                        "hostname"
                                      ]
                                    },
                                    "port": {
                                      "type": "integer",
                                      "format": "uint16",
                                      "minimum": 0,
                                      "maximum": 65535
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "name",
                                    "port"
                                  ]
                                }
                              },
                              "required": [
                                "service"
                              ]
                            },
                            {
                              "description": "Hostname or IP address",
                              "type": "object",
                              "properties": {
                                "host": {
                                  "description": "Hostname or IP address",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "host"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "backend": {
                                  "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "backend"
                              ]
                            }
                          ]
                        },
                        {
                          "type": "null"
                        }
                      ],
                      "default": null
                    },
                    "extProc": {
                      "description": "Extend agentgateway with an external processor",
                      "anyOf": [
                        {
                          "type": "object",
                          "properties": {
                            "failureMode": {
                              "type": "string",
                              "enum": [
                                "failClosed",
                                "failOpen"
                              ],
                              "default": "failClosed"
                            }
                          },
                          "unevaluatedProperties": false,
                          "oneOf": [
                            {
                              "type": "string",
                              "enum": [
                                "invalid"
                              ]
                            },
                            {
                              "description": "Service reference. Service must be defined in the top level services list.",
                              "type": "object",
                              "properties": {
                                "service": {
                                  "type": "object",
                                  "properties": {
                                    "name": {
                                      "type": "object",
                                      "properties": {
                                        "namespace": {
                                          "type": "string"
                                        },
                                        "hostname": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "namespace",
                                        "hostname"
                                      ]
                                    },
                                    "port": {
                                      "type": "integer",
                                      "format": "uint16",
                                      "minimum": 0,
                                      "maximum": 65535
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "name",
                                    "port"
                                  ]
                                }
                              },
                              "required": [
                                "service"
                              ]
                            },
                            {
                              "description": "Hostname or IP address",
                              "type": "object",
                              "properties": {
                                "host": {
                                  "description": "Hostname or IP address",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "host"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "backend": {
                                  "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "backend"
                              ]
                            }
                          ]
                        },
                        {
                          "type": "null"
                        }
                      ],
                      "default": null
                    },
                    "transformations": {
                      "description": "Modify requests and responses",
                      "type": [
                        "object",
                        "null"
                      ],
                      "properties": {
                        "request": {
                          "type": [
                            "object",
                            "null"
                          ],
                          "properties": {
                            "add": {
                              "type": "object",
                              "additionalProperties": {
                                "type": "string"
                              },
                              "default": {}
                            },
                            "set": {
                              "type": "object",
                              "additionalProperties": {
                                "type": "string"
                              },
                              "default": {}
                            },
                            "remove": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              },
                              "default": []
                            },
                            "body": {
                              "type": [
                                "string",
                                "null"
                              ],
                              "default": null
                            }
                          },
                          "additionalProperties": false
                        },
                        "response": {
                          "type": [
                            "object",
                            "null"
                          ],
                          "properties": {
                            "add": {
                              "type": "object",
                              "additionalProperties": {
                                "type": "string"
                              },
                              "default": {}
                            },
                            "set": {
                              "type": "object",
                              "additionalProperties": {
                                "type": "string"
                              },
                              "default": {}
                            },
                            "remove": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              },
                              "default": []
                            },
                            "body": {
                              "type": [
                                "string",
                                "null"
                              ],
                              "default": null
                            }
                          },
                          "additionalProperties": false
                        }
                      },
                      "additionalProperties": false,
                      "default": null
                    },
                    "basicAuth": {
                      "description": "Authenticate incoming requests using Basic Authentication with htpasswd.",
                      "type": [
                        "object",
                        "null"
                      ],
                      "properties": {
                        "htpasswd": {
                          "description": ".htpasswd file contents/reference",
                          "anyOf": [
                            {
                              "type": "object",
                              "properties": {
                                "file": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "file"
                              ]
                            },
                            {
                              "type": "string"
                            }
                          ]
                        },
                        "realm": {
                          "description": "Realm name for the WWW-Authenticate header",
                          "type": [
                            "string",
                            "null"
                          ],
                          "default": null
                        },
                        "mode": {
                          "description": "Validation mode for basic authentication",
                          "oneOf": [
                            {
                              "description": "A valid username/password must be present.",
                              "type": "string",
                              "const": "strict"
                            },
                            {
                              "description": "If credentials exist, validate them.\nThis is the default option.\nWarning: this allows requests without credentials!",
                              "type": "string",
                              "const": "optional"
                            }
                          ],
                          "default": "optional"
                        }
                      },
                      "additionalProperties": false,
                      "required": [
                        "htpasswd"
                      ]
                    },
                    "apiKey": {
                      "description": "Authenticate incoming requests using API Keys",
                      "type": [
                        "object",
                        "null"
                      ],
                      "properties": {
                        "keys": {
                          "description": "List of API keys",
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "key": {
                                "type": "string"
                              },
                              "metadata": true
                            },
                            "additionalProperties": false,
                            "required": [
                              "key"
                            ]
                          }
                        },
                        "mode": {
                          "description": "Validation mode for API keys",
                          "oneOf": [
                            {
                              "description": "A valid API Key must be present.",
                              "type": "string",
                              "const": "strict"
                            },
                            {
                              "description": "If credentials exist, validate them.\nThis is the default option.\nWarning: this allows requests without credentials!",
                              "type": "string",
                              "const": "optional"
                            }
                          ],
                          "default": "optional"
                        }
                      },
                      "additionalProperties": false,
                      "required": [
                        "keys"
                      ]
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            }
          },
          "tunnelProtocol": {
            "type": "string",
            "enum": [
              "direct",
              "hboneWaypoint",
              "hboneGateway",
              "proxy"
            ],
            "default": "direct"
          }
        },
        "additionalProperties": false,
        "required": [
          "port",
          "listeners"
        ]
      }
    },
    "frontendPolicies": {
      "type": "object",
      "properties": {
        "http": {
          "description": "Settings for handling incoming HTTP requests.",
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "maxBufferSize": {
              "type": "integer",
              "format": "uint",
              "minimum": 0,
              "default": 2097152
            },
            "http1MaxHeaders": {
              "description": "The maximum number of headers allowed in a request. Changing this value results in a performance\ndegradation, even if set to a lower value than the default (100)",
              "type": [
                "integer",
                "null"
              ],
              "format": "uint",
              "minimum": 0,
              "default": null
            },
            "http1IdleTimeout": {
              "type": "string",
              "default": "10m0s"
            },
            "http2WindowSize": {
              "type": [
                "integer",
                "null"
              ],
              "format": "uint32",
              "minimum": 0,
              "default": null
            },
            "http2ConnectionWindowSize": {
              "type": [
                "integer",
                "null"
              ],
              "format": "uint32",
              "minimum": 0,
              "default": null
            },
            "http2FrameSize": {
              "type": [
                "integer",
                "null"
              ],
              "format": "uint32",
              "minimum": 0,
              "default": null
            },
            "http2KeepaliveInterval": {
              "type": [
                "string",
                "null"
              ],
              "default": null
            },
            "http2KeepaliveTimeout": {
              "type": [
                "string",
                "null"
              ],
              "default": null
            }
          },
          "additionalProperties": false,
          "default": null
        },
        "tls": {
          "description": "Settings for handling incoming TLS connections.",
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "tlsHandshakeTimeout": {
              "type": "string",
              "default": "15s"
            },
            "alpn": {
              "type": [
                "array",
                "null"
              ],
              "items": {
                "type": "array",
                "items": {
                  "type": "integer",
                  "format": "uint8",
                  "minimum": 0,
                  "maximum": 255
                }
              },
              "default": null
            }
          },
          "additionalProperties": false,
          "default": null
        },
        "tcp": {
          "description": "Settings for handling incoming TCP connections.",
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "keepalives": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "time": {
                  "type": "string",
                  "default": "3m0s"
                },
                "interval": {
                  "type": "string",
                  "default": "3m0s"
                },
                "retries": {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0,
                  "default": 9
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false,
          "required": [
            "keepalives"
          ],
          "default": null
        },
        "accessLog": {
          "description": "Settings for request access logs.",
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "filter": {
              "type": [
                "string",
                "null"
              ]
            },
            "add": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "remove": {
              "type": "array",
              "uniqueItems": true,
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false,
          "default": null
        },
        "tracing": {
          "type": "null",
          "default": null
        }
      },
      "additionalProperties": false
    },
    "policies": {
      "description": "policies defines additional policies that can be attached to various other configurations.\nThis is an advanced feature; users should typically use the inline `policies` field under route/gateway.",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "namespace": {
                "type": "string"
              }
            },
            "additionalProperties": false,
            "required": [
              "name",
              "namespace"
            ]
          },
          "target": {
            "oneOf": [
              {
                "type": "object",
                "properties": {
                  "gateway": {
                    "type": "object",
                    "properties": {
                      "gatewayName": {
                        "type": "string"
                      },
                      "gatewayNamespace": {
                        "type": "string"
                      },
                      "listenerName": {
                        "type": [
                          "string",
                          "null"
                        ]
                      }
                    },
                    "additionalProperties": false,
                    "required": [
                      "gatewayName",
                      "gatewayNamespace"
                    ]
                  }
                },
                "required": [
                  "gateway"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "route": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "namespace": {
                        "type": "string"
                      },
                      "ruleName": {
                        "type": [
                          "string",
                          "null"
                        ]
                      }
                    },
                    "additionalProperties": false,
                    "required": [
                      "name",
                      "namespace"
                    ]
                  }
                },
                "required": [
                  "route"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "backend": {
                    "oneOf": [
                      {
                        "type": "string",
                        "enum": [
                          "invalid"
                        ]
                      },
                      {
                        "type": "object",
                        "properties": {
                          "backend": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "namespace": {
                                "type": "string"
                              },
                              "section": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "name",
                              "namespace"
                            ]
                          }
                        },
                        "required": [
                          "backend"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "service": {
                            "type": "object",
                            "properties": {
                              "hostname": {
                                "type": "string"
                              },
                              "namespace": {
                                "type": "string"
                              },
                              "port": {
                                "type": [
                                  "integer",
                                  "null"
                                ],
                                "format": "uint16",
                                "minimum": 0,
                                "maximum": 65535
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "hostname",
                              "namespace"
                            ]
                          }
                        },
                        "required": [
                          "service"
                        ],
                        "additionalProperties": false
                      }
                    ]
                  }
                },
                "required": [
                  "backend"
                ],
                "additionalProperties": false
              }
            ]
          },
          "phase": {
            "description": "phase defines at what level the policy runs at. Gateway policies run pre-routing, while\nRoute policies apply post-routing.\nOnly a subset of policies are eligible as Gateway policies.\nIn general, normal (route level) policies should be used, except you need the policy to influence\nrouting.",
            "type": "string",
            "enum": [
              "route",
              "gateway"
            ],
            "default": "route"
          },
          "policy": {
            "type": "object",
            "properties": {
              "requestHeaderModifier": {
                "description": "Headers to be modified in the request.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "add": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "set": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "remove": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "responseHeaderModifier": {
                "description": "Headers to be modified in the response.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "add": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "set": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "remove": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "requestRedirect": {
                "description": "Directly respond to the request with a redirect.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "scheme": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "authority": {
                    "anyOf": [
                      {
                        "oneOf": [
                          {
                            "type": "string",
                            "enum": [
                              "auto",
                              "none"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "full": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "full"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "host": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "host"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "port": {
                                "type": "integer",
                                "format": "uint16",
                                "minimum": 1,
                                "maximum": 65535
                              }
                            },
                            "required": [
                              "port"
                            ],
                            "additionalProperties": false
                          }
                        ]
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "path": {
                    "anyOf": [
                      {
                        "oneOf": [
                          {
                            "type": "object",
                            "properties": {
                              "full": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "full"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "prefix": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "prefix"
                            ],
                            "additionalProperties": false
                          }
                        ]
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "status": {
                    "type": [
                      "integer",
                      "null"
                    ],
                    "format": "uint16",
                    "minimum": 1,
                    "maximum": 65535
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "urlRewrite": {
                "description": "Modify the URL path or authority.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "authority": {
                    "anyOf": [
                      {
                        "oneOf": [
                          {
                            "type": "string",
                            "enum": [
                              "auto",
                              "none"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "full": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "full"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "host": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "host"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "port": {
                                "type": "integer",
                                "format": "uint16",
                                "minimum": 1,
                                "maximum": 65535
                              }
                            },
                            "required": [
                              "port"
                            ],
                            "additionalProperties": false
                          }
                        ]
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "path": {
                    "anyOf": [
                      {
                        "oneOf": [
                          {
                            "type": "object",
                            "properties": {
                              "full": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "full"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "prefix": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "prefix"
                            ],
                            "additionalProperties": false
                          }
                        ]
                      },
                      {
                        "type": "null"
                      }
                    ]
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "requestMirror": {
                "description": "Mirror incoming requests to another destination.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "backend": {
                    "oneOf": [
                      {
                        "type": "string",
                        "enum": [
                          "invalid"
                        ]
                      },
                      {
                        "description": "Service reference. Service must be defined in the top level services list.",
                        "type": "object",
                        "properties": {
                          "service": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "object",
                                "properties": {
                                  "namespace": {
                                    "type": "string"
                                  },
                                  "hostname": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "namespace",
                                  "hostname"
                                ]
                              },
                              "port": {
                                "type": "integer",
                                "format": "uint16",
                                "minimum": 0,
                                "maximum": 65535
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "name",
                              "port"
                            ]
                          }
                        },
                        "required": [
                          "service"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "description": "Hostname or IP address",
                        "type": "object",
                        "properties": {
                          "host": {
                            "description": "Hostname or IP address",
                            "type": "string"
                          }
                        },
                        "required": [
                          "host"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "backend": {
                            "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                            "type": "string"
                          }
                        },
                        "required": [
                          "backend"
                        ],
                        "additionalProperties": false
                      }
                    ]
                  },
                  "percentage": {
                    "type": "number",
                    "format": "double"
                  }
                },
                "additionalProperties": false,
                "required": [
                  "backend",
                  "percentage"
                ],
                "default": null
              },
              "directResponse": {
                "description": "Directly respond to the request with a static response.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "body": {
                    "type": [
                      "array",
                      "string"
                    ],
                    "items": {
                      "type": "integer",
                      "format": "uint8",
                      "minimum": 0,
                      "maximum": 255
                    }
                  },
                  "status": {
                    "type": "integer",
                    "format": "uint16",
                    "minimum": 1,
                    "maximum": 65535
                  }
                },
                "additionalProperties": false,
                "required": [
                  "body",
                  "status"
                ],
                "default": null
              },
              "cors": {
                "description": "Handle CORS preflight requests and append configured CORS headers to applicable requests.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "allowCredentials": {
                    "type": "boolean",
                    "default": false
                  },
                  "allowHeaders": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "default": []
                  },
                  "allowMethods": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "default": []
                  },
                  "allowOrigins": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "default": []
                  },
                  "exposeHeaders": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "default": []
                  },
                  "maxAge": {
                    "type": [
                      "string",
                      "null"
                    ],
                    "default": null
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "mcpAuthorization": {
                "description": "Authorization policies for MCP access.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "rules": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": false,
                "required": [
                  "rules"
                ],
                "default": null
              },
              "authorization": {
                "description": "Authorization policies for HTTP access.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "rules": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": false,
                "required": [
                  "rules"
                ],
                "default": null
              },
              "mcpAuthentication": {
                "description": "Authentication for MCP clients.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "issuer": {
                    "type": "string"
                  },
                  "audiences": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "provider": {
                    "anyOf": [
                      {
                        "oneOf": [
                          {
                            "type": "object",
                            "properties": {
                              "auth0": {
                                "type": "object",
                                "additionalProperties": false
                              }
                            },
                            "required": [
                              "auth0"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "keycloak": {
                                "type": "object",
                                "additionalProperties": false
                              }
                            },
                            "required": [
                              "keycloak"
                            ],
                            "additionalProperties": false
                          }
                        ]
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "resourceMetadata": {
                    "type": "object",
                    "additionalProperties": true
                  },
                  "jwks": {
                    "anyOf": [
                      {
                        "type": "object",
                        "properties": {
                          "file": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "file"
                        ]
                      },
                      {
                        "type": "string"
                      },
                      {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "url"
                        ]
                      }
                    ]
                  },
                  "mode": {
                    "oneOf": [
                      {
                        "description": "A valid token, issued by a configured issuer, must be present.",
                        "type": "string",
                        "const": "strict"
                      },
                      {
                        "description": "If a token exists, validate it.\nThis is the default option.\nWarning: this allows requests without a JWT token!",
                        "type": "string",
                        "const": "optional"
                      },
                      {
                        "description": "Requests are never rejected. This is useful for usage of claims in later steps (authorization, logging, etc).\nWarning: this allows requests without a JWT token!",
                        "type": "string",
                        "const": "permissive"
                      }
                    ],
                    "default": "optional"
                  }
                },
                "additionalProperties": false,
                "required": [
                  "issuer",
                  "audiences",
                  "resourceMetadata",
                  "jwks"
                ]
              },
              "a2a": {
                "description": "Mark this traffic as A2A to enable A2A processing and telemetry.",
                "type": [
                  "object",
                  "null"
                ],
                "additionalProperties": false,
                "default": null
              },
              "ai": {
                "description": "Mark this as LLM traffic to enable LLM processing.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "promptGuard": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "properties": {
                      "request": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "rejection": {
                              "type": "object",
                              "properties": {
                                "body": {
                                  "type": [
                                    "array",
                                    "string"
                                  ],
                                  "items": {
                                    "type": "integer",
                                    "format": "uint8",
                                    "minimum": 0,
                                    "maximum": 255
                                  },
                                  "default": "The request was rejected due to inappropriate content"
                                },
                                "status": {
                                  "type": "integer",
                                  "format": "uint16",
                                  "minimum": 1,
                                  "maximum": 65535,
                                  "default": 403
                                },
                                "headers": {
                                  "description": "Optional headers to add, set, or remove from the rejection response",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "add": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "set": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "remove": {
                                      "type": "array",
                                      "items": {
                                        "type": "string"
                                      }
                                    }
                                  },
                                  "additionalProperties": false
                                }
                              },
                              "additionalProperties": false,
                              "default": {
                                "body": "The request was rejected due to inappropriate content",
                                "status": 403
                              }
                            }
                          },
                          "unevaluatedProperties": false,
                          "oneOf": [
                            {
                              "type": "object",
                              "properties": {
                                "regex": {
                                  "type": "object",
                                  "properties": {
                                    "action": {
                                      "type": "string",
                                      "enum": [
                                        "mask",
                                        "reject"
                                      ],
                                      "default": "mask"
                                    },
                                    "rules": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "builtin": {
                                                "type": "string",
                                                "enum": [
                                                  "ssn",
                                                  "creditCard",
                                                  "phoneNumber",
                                                  "email",
                                                  "caSin"
                                                ]
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "builtin"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "pattern": {
                                                "type": "string"
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "pattern"
                                            ]
                                          }
                                        ]
                                      }
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "rules"
                                  ]
                                }
                              },
                              "required": [
                                "regex"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "webhook": {
                                  "type": "object",
                                  "properties": {
                                    "target": {
                                      "oneOf": [
                                        {
                                          "type": "string",
                                          "enum": [
                                            "invalid"
                                          ]
                                        },
                                        {
                                          "description": "Service reference. Service must be defined in the top level services list.",
                                          "type": "object",
                                          "properties": {
                                            "service": {
                                              "type": "object",
                                              "properties": {
                                                "name": {
                                                  "type": "object",
                                                  "properties": {
                                                    "namespace": {
                                                      "type": "string"
                                                    },
                                                    "hostname": {
                                                      "type": "string"
                                                    }
                                                  },
                                                  "required": [
                                                    "namespace",
                                                    "hostname"
                                                  ]
                                                },
                                                "port": {
                                                  "type": "integer",
                                                  "format": "uint16",
                                                  "minimum": 0,
                                                  "maximum": 65535
                                                }
                                              },
                                              "additionalProperties": false,
                                              "required": [
                                                "name",
                                                "port"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "service"
                                          ],
                                          "additionalProperties": false
                                        },
                                        {
                                          "description": "Hostname or IP address",
                                          "type": "object",
                                          "properties": {
                                            "host": {
                                              "description": "Hostname or IP address",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "host"
                                          ],
                                          "additionalProperties": false
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "backend": {
                                              "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "backend"
                                          ],
                                          "additionalProperties": false
                                        }
                                      ]
                                    },
                                    "forwardHeaderMatches": {
                                      "type": "array",
                                      "items": {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          },
                                          "value": {
                                            "oneOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "exact": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "exact"
                                                ],
                                                "additionalProperties": false
                                              },
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "regex": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "regex"
                                                ],
                                                "additionalProperties": false
                                              }
                                            ]
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "name",
                                          "value"
                                        ]
                                      }
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "target"
                                  ]
                                }
                              },
                              "required": [
                                "webhook"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "openAIModeration": {
                                  "type": "object",
                                  "properties": {
                                    "model": {
                                      "description": "Model to use. Defaults to `omni-moderation-latest`",
                                      "type": [
                                        "string",
                                        "null"
                                      ]
                                    }
                                  },
                                  "additionalProperties": false
                                }
                              },
                              "required": [
                                "openAIModeration"
                              ]
                            }
                          ]
                        }
                      },
                      "response": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "rejection": {
                              "type": "object",
                              "properties": {
                                "body": {
                                  "type": [
                                    "array",
                                    "string"
                                  ],
                                  "items": {
                                    "type": "integer",
                                    "format": "uint8",
                                    "minimum": 0,
                                    "maximum": 255
                                  },
                                  "default": "The request was rejected due to inappropriate content"
                                },
                                "status": {
                                  "type": "integer",
                                  "format": "uint16",
                                  "minimum": 1,
                                  "maximum": 65535,
                                  "default": 403
                                },
                                "headers": {
                                  "description": "Optional headers to add, set, or remove from the rejection response",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "add": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "set": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "remove": {
                                      "type": "array",
                                      "items": {
                                        "type": "string"
                                      }
                                    }
                                  },
                                  "additionalProperties": false
                                }
                              },
                              "additionalProperties": false,
                              "default": {
                                "body": "The request was rejected due to inappropriate content",
                                "status": 403
                              }
                            }
                          },
                          "unevaluatedProperties": false,
                          "oneOf": [
                            {
                              "type": "object",
                              "properties": {
                                "regex": {
                                  "type": "object",
                                  "properties": {
                                    "action": {
                                      "type": "string",
                                      "enum": [
                                        "mask",
                                        "reject"
                                      ],
                                      "default": "mask"
                                    },
                                    "rules": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "builtin": {
                                                "type": "string",
                                                "enum": [
                                                  "ssn",
                                                  "creditCard",
                                                  "phoneNumber",
                                                  "email",
                                                  "caSin"
                                                ]
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "builtin"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "pattern": {
                                                "type": "string"
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "pattern"
                                            ]
                                          }
                                        ]
                                      }
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "rules"
                                  ]
                                }
                              },
                              "required": [
                                "regex"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "webhook": {
                                  "type": "object",
                                  "properties": {
                                    "target": {
                                      "oneOf": [
                                        {
                                          "type": "string",
                                          "enum": [
                                            "invalid"
                                          ]
                                        },
                                        {
                                          "description": "Service reference. Service must be defined in the top level services list.",
                                          "type": "object",
                                          "properties": {
                                            "service": {
                                              "type": "object",
                                              "properties": {
                                                "name": {
                                                  "type": "object",
                                                  "properties": {
                                                    "namespace": {
                                                      "type": "string"
                                                    },
                                                    "hostname": {
                                                      "type": "string"
                                                    }
                                                  },
                                                  "required": [
                                                    "namespace",
                                                    "hostname"
                                                  ]
                                                },
                                                "port": {
                                                  "type": "integer",
                                                  "format": "uint16",
                                                  "minimum": 0,
                                                  "maximum": 65535
                                                }
                                              },
                                              "additionalProperties": false,
                                              "required": [
                                                "name",
                                                "port"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "service"
                                          ],
                                          "additionalProperties": false
                                        },
                                        {
                                          "description": "Hostname or IP address",
                                          "type": "object",
                                          "properties": {
                                            "host": {
                                              "description": "Hostname or IP address",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "host"
                                          ],
                                          "additionalProperties": false
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "backend": {
                                              "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "backend"
                                          ],
                                          "additionalProperties": false
                                        }
                                      ]
                                    },
                                    "forwardHeaderMatches": {
                                      "type": "array",
                                      "items": {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          },
                                          "value": {
                                            "oneOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "exact": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "exact"
                                                ],
                                                "additionalProperties": false
                                              },
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "regex": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "regex"
                                                ],
                                                "additionalProperties": false
                                              }
                                            ]
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "name",
                                          "value"
                                        ]
                                      }
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "target"
                                  ]
                                }
                              },
                              "required": [
                                "webhook"
                              ]
                            }
                          ]
                        }
                      }
                    },
                    "additionalProperties": false
                  },
                  "defaults": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": true
                  },
                  "overrides": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": true
                  },
                  "prompts": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "properties": {
                      "append": {
                        "type": "array",
                        "items": {
                          "description": "SimpleChatCompletionMessage is a simplified chat message",
                          "type": "object",
                          "properties": {
                            "role": {
                              "type": "string"
                            },
                            "content": {
                              "type": "string"
                            }
                          },
                          "additionalProperties": false,
                          "required": [
                            "role",
                            "content"
                          ]
                        }
                      },
                      "prepend": {
                        "type": "array",
                        "items": {
                          "description": "SimpleChatCompletionMessage is a simplified chat message",
                          "type": "object",
                          "properties": {
                            "role": {
                              "type": "string"
                            },
                            "content": {
                              "type": "string"
                            }
                          },
                          "additionalProperties": false,
                          "required": [
                            "role",
                            "content"
                          ]
                        }
                      }
                    },
                    "additionalProperties": false,
                    "required": [
                      "prepend"
                    ]
                  },
                  "modelAliases": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "promptCaching": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "properties": {
                      "cacheSystem": {
                        "type": "boolean",
                        "default": true
                      },
                      "cacheMessages": {
                        "type": "boolean",
                        "default": true
                      },
                      "cacheTools": {
                        "type": "boolean",
                        "default": false
                      },
                      "minTokens": {
                        "type": [
                          "integer",
                          "null"
                        ],
                        "format": "uint",
                        "minimum": 0,
                        "default": 1024
                      }
                    },
                    "additionalProperties": false
                  },
                  "routes": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "backendTLS": {
                "description": "Send TLS to the backend.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "cert": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "key": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "root": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "hostname": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "insecure": {
                    "type": "boolean",
                    "default": false
                  },
                  "insecureHost": {
                    "type": "boolean",
                    "default": false
                  },
                  "alpn": {
                    "type": [
                      "array",
                      "null"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "default": null
                  },
                  "subjectAltNames": {
                    "type": [
                      "array",
                      "null"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "default": null
                  }
                },
                "additionalProperties": false
              },
              "backendAuth": {
                "description": "Authenticate to the backend.",
                "anyOf": [
                  {
                    "oneOf": [
                      {
                        "type": "object",
                        "properties": {
                          "passthrough": {
                            "type": "object",
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "passthrough"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "key": {
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "file": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "file"
                                ]
                              },
                              {
                                "type": "string"
                              }
                            ]
                          }
                        },
                        "required": [
                          "key"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "gcp": {
                            "type": "object",
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "gcp"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "aws": {
                            "anyOf": [
                              {
                                "description": "Use explicit AWS credentials",
                                "type": "object",
                                "properties": {
                                  "accessKeyId": {
                                    "type": "string"
                                  },
                                  "secretAccessKey": {
                                    "type": "string"
                                  },
                                  "region": {
                                    "type": [
                                      "string",
                                      "null"
                                    ]
                                  },
                                  "sessionToken": {
                                    "type": [
                                      "string",
                                      "null"
                                    ]
                                  }
                                },
                                "additionalProperties": false,
                                "required": [
                                  "accessKeyId",
                                  "secretAccessKey"
                                ]
                              },
                              {
                                "description": "Use implicit AWS authentication (environment variables, IAM roles, etc.)",
                                "type": "object",
                                "additionalProperties": false
                              }
                            ]
                          }
                        },
                        "required": [
                          "aws"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "azure": {
                            "oneOf": [
                              {
                                "description": "Use explicit Azure credentials",
                                "type": "object",
                                "properties": {
                                  "explicitConfig": {
                                    "type": "object",
                                    "unevaluatedProperties": false,
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "clientSecret": {
                                            "type": "object",
                                            "properties": {
                                              "tenant_id": {
                                                "type": "string"
                                              },
                                              "client_id": {
                                                "type": "string"
                                              },
                                              "client_secret": {
                                                "type": "string"
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "tenant_id",
                                              "client_id",
                                              "client_secret"
                                            ]
                                          }
                                        },
                                        "required": [
                                          "clientSecret"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "managedIdentity": {
                                            "type": "object",
                                            "properties": {
                                              "userAssignedIdentity": {
                                                "anyOf": [
                                                  {
                                                    "oneOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "clientId": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "required": [
                                                          "clientId"
                                                        ],
                                                        "additionalProperties": false
                                                      },
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "objectId": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "required": [
                                                          "objectId"
                                                        ],
                                                        "additionalProperties": false
                                                      },
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "resourceId": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "required": [
                                                          "resourceId"
                                                        ],
                                                        "additionalProperties": false
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "null"
                                                  }
                                                ]
                                              }
                                            },
                                            "additionalProperties": false
                                          }
                                        },
                                        "required": [
                                          "managedIdentity"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "workloadIdentity": {
                                            "type": "object",
                                            "additionalProperties": false
                                          }
                                        },
                                        "required": [
                                          "workloadIdentity"
                                        ]
                                      }
                                    ]
                                  }
                                },
                                "required": [
                                  "explicitConfig"
                                ],
                                "additionalProperties": false
                              },
                              {
                                "description": "Use implicit Azure auth. Note that this is for developer use-cases only!",
                                "type": "object",
                                "properties": {
                                  "developerImplicit": {
                                    "type": "object",
                                    "additionalProperties": false
                                  }
                                },
                                "required": [
                                  "developerImplicit"
                                ],
                                "additionalProperties": false
                              }
                            ]
                          }
                        },
                        "required": [
                          "azure"
                        ],
                        "additionalProperties": false
                      }
                    ]
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null
              },
              "localRateLimit": {
                "description": "Rate limit incoming requests. State is kept local.",
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "maxTokens": {
                      "type": "integer",
                      "format": "uint64",
                      "minimum": 0,
                      "default": 0
                    },
                    "tokensPerFill": {
                      "type": "integer",
                      "format": "uint64",
                      "minimum": 0,
                      "default": 0
                    },
                    "fillInterval": {
                      "type": "string"
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "requests",
                        "tokens"
                      ],
                      "default": "requests"
                    }
                  },
                  "additionalProperties": false,
                  "required": [
                    "fillInterval"
                  ]
                },
                "default": []
              },
              "remoteRateLimit": {
                "description": "Rate limit incoming requests. State is managed by a remote server.",
                "anyOf": [
                  {
                    "type": "object",
                    "properties": {
                      "domain": {
                        "type": "string"
                      },
                      "descriptors": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "entries": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "key": {
                                    "type": "string"
                                  },
                                  "value": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "key",
                                  "value"
                                ]
                              }
                            },
                            "type": {
                              "type": "string",
                              "enum": [
                                "requests",
                                "tokens"
                              ],
                              "default": "requests"
                            }
                          },
                          "additionalProperties": false,
                          "required": [
                            "entries"
                          ]
                        }
                      },
                      "timeout": {
                        "description": "Timeout for the request",
                        "type": [
                          "string",
                          "null"
                        ]
                      }
                    },
                    "required": [
                      "domain",
                      "descriptors"
                    ],
                    "unevaluatedProperties": false,
                    "oneOf": [
                      {
                        "type": "string",
                        "enum": [
                          "invalid"
                        ]
                      },
                      {
                        "description": "Service reference. Service must be defined in the top level services list.",
                        "type": "object",
                        "properties": {
                          "service": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "object",
                                "properties": {
                                  "namespace": {
                                    "type": "string"
                                  },
                                  "hostname": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "namespace",
                                  "hostname"
                                ]
                              },
                              "port": {
                                "type": "integer",
                                "format": "uint16",
                                "minimum": 0,
                                "maximum": 65535
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "name",
                              "port"
                            ]
                          }
                        },
                        "required": [
                          "service"
                        ]
                      },
                      {
                        "description": "Hostname or IP address",
                        "type": "object",
                        "properties": {
                          "host": {
                            "description": "Hostname or IP address",
                            "type": "string"
                          }
                        },
                        "required": [
                          "host"
                        ]
                      },
                      {
                        "type": "object",
                        "properties": {
                          "backend": {
                            "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                            "type": "string"
                          }
                        },
                        "required": [
                          "backend"
                        ]
                      }
                    ]
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null
              },
              "jwtAuth": {
                "description": "Authenticate incoming JWT requests.",
                "anyOf": [
                  {
                    "anyOf": [
                      {
                        "type": "object",
                        "properties": {
                          "mode": {
                            "oneOf": [
                              {
                                "description": "A valid token, issued by a configured issuer, must be present.",
                                "type": "string",
                                "const": "strict"
                              },
                              {
                                "description": "If a token exists, validate it.\nThis is the default option.\nWarning: this allows requests without a JWT token!",
                                "type": "string",
                                "const": "optional"
                              },
                              {
                                "description": "Requests are never rejected. This is useful for usage of claims in later steps (authorization, logging, etc).\nWarning: this allows requests without a JWT token!",
                                "type": "string",
                                "const": "permissive"
                              }
                            ],
                            "default": "optional"
                          },
                          "providers": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "issuer": {
                                  "type": "string"
                                },
                                "audiences": {
                                  "type": [
                                    "array",
                                    "null"
                                  ],
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "jwks": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "file": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "file"
                                      ]
                                    },
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "url": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "url"
                                      ]
                                    }
                                  ]
                                }
                              },
                              "additionalProperties": false,
                              "required": [
                                "issuer",
                                "jwks"
                              ]
                            }
                          }
                        },
                        "additionalProperties": false,
                        "required": [
                          "providers"
                        ]
                      },
                      {
                        "type": "object",
                        "properties": {
                          "mode": {
                            "oneOf": [
                              {
                                "description": "A valid token, issued by a configured issuer, must be present.",
                                "type": "string",
                                "const": "strict"
                              },
                              {
                                "description": "If a token exists, validate it.\nThis is the default option.\nWarning: this allows requests without a JWT token!",
                                "type": "string",
                                "const": "optional"
                              },
                              {
                                "description": "Requests are never rejected. This is useful for usage of claims in later steps (authorization, logging, etc).\nWarning: this allows requests without a JWT token!",
                                "type": "string",
                                "const": "permissive"
                              }
                            ],
                            "default": "optional"
                          },
                          "issuer": {
                            "type": "string"
                          },
                          "audiences": {
                            "type": [
                              "array",
                              "null"
                            ],
                            "items": {
                              "type": "string"
                            }
                          },
                          "jwks": {
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "file": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "file"
                                ]
                              },
                              {
                                "type": "string"
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "url": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "url"
                                ]
                              }
                            ]
                          }
                        },
                        "additionalProperties": false,
                        "required": [
                          "issuer",
                          "jwks"
                        ]
                      }
                    ]
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "basicAuth": {
                "description": "Authenticate incoming requests using Basic Authentication with htpasswd.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "htpasswd": {
                    "description": ".htpasswd file contents/reference",
                    "anyOf": [
                      {
                        "type": "object",
                        "properties": {
                          "file": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "file"
                        ]
                      },
                      {
                        "type": "string"
                      }
                    ]
                  },
                  "realm": {
                    "description": "Realm name for the WWW-Authenticate header",
                    "type": [
                      "string",
                      "null"
                    ],
                    "default": null
                  },
                  "mode": {
                    "description": "Validation mode for basic authentication",
                    "oneOf": [
                      {
                        "description": "A valid username/password must be present.",
                        "type": "string",
                        "const": "strict"
                      },
                      {
                        "description": "If credentials exist, validate them.\nThis is the default option.\nWarning: this allows requests without credentials!",
                        "type": "string",
                        "const": "optional"
                      }
                    ],
                    "default": "optional"
                  }
                },
                "additionalProperties": false,
                "required": [
                  "htpasswd"
                ]
              },
              "apiKey": {
                "description": "Authenticate incoming requests using API Keys",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "keys": {
                    "description": "List of API keys",
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "key": {
                          "type": "string"
                        },
                        "metadata": true
                      },
                      "additionalProperties": false,
                      "required": [
                        "key"
                      ]
                    }
                  },
                  "mode": {
                    "description": "Validation mode for API keys",
                    "oneOf": [
                      {
                        "description": "A valid API Key must be present.",
                        "type": "string",
                        "const": "strict"
                      },
                      {
                        "description": "If credentials exist, validate them.\nThis is the default option.\nWarning: this allows requests without credentials!",
                        "type": "string",
                        "const": "optional"
                      }
                    ],
                    "default": "optional"
                  }
                },
                "additionalProperties": false,
                "required": [
                  "keys"
                ]
              },
              "extAuthz": {
                "description": "Authenticate incoming requests by calling an external authorization server.",
                "anyOf": [
                  {
                    "type": "object",
                    "properties": {
                      "protocol": {
                        "description": "The ext_authz protocol to use. Unless you need to integrate with an HTTP-only server, gRPC is recommended.",
                        "oneOf": [
                          {
                            "type": "object",
                            "properties": {
                              "grpc": {
                                "type": "object",
                                "properties": {
                                  "context": {
                                    "description": "Additional context to send to the authorization service.\nThis maps to the `context_extensions` field of the request, and only allows static values.",
                                    "type": [
                                      "object",
                                      "null"
                                    ],
                                    "additionalProperties": {
                                      "type": "string"
                                    }
                                  },
                                  "metadata": {
                                    "description": "Additional metadata to send to the authorization service.\nThis maps to the `metadata_context.filter_metadata` field of the request, and allows dynamic CEL expressions.\nIf unset, by default the `envoy.filters.http.jwt_authn` key is set if the JWT policy is used as well, for compatibility.",
                                    "type": [
                                      "object",
                                      "null"
                                    ],
                                    "additionalProperties": {
                                      "type": "string"
                                    }
                                  }
                                },
                                "additionalProperties": false
                              }
                            },
                            "required": [
                              "grpc"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "http": {
                                "type": "object",
                                "properties": {
                                  "path": {
                                    "type": [
                                      "string",
                                      "null"
                                    ]
                                  },
                                  "redirect": {
                                    "description": "When using the HTTP protocol, and the server returns unauthorized, redirect to the URL resolved by\nthe provided expression rather than directly returning the error.",
                                    "type": [
                                      "string",
                                      "null"
                                    ]
                                  },
                                  "includeResponseHeaders": {
                                    "description": "Specific headers from the authorization response will be copied into the request to the backend.",
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  },
                                  "addRequestHeaders": {
                                    "description": "Specific headers to add in the authorization request (empty = all headers), based on the expression",
                                    "type": "object",
                                    "additionalProperties": {
                                      "type": "string"
                                    }
                                  },
                                  "metadata": {
                                    "description": "Metadata to include under the `extauthz` variable, based on the authorization response.",
                                    "type": "object",
                                    "additionalProperties": {
                                      "type": "string"
                                    }
                                  }
                                },
                                "additionalProperties": false
                              }
                            },
                            "required": [
                              "http"
                            ],
                            "additionalProperties": false
                          }
                        ],
                        "default": {
                          "grpc": {}
                        }
                      },
                      "failureMode": {
                        "description": "Behavior when the authorization service is unavailable or returns an error",
                        "oneOf": [
                          {
                            "type": "string",
                            "enum": [
                              "allow",
                              "deny"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "denyWithStatus": {
                                "type": "integer",
                                "format": "uint16",
                                "minimum": 0,
                                "maximum": 65535
                              }
                            },
                            "required": [
                              "denyWithStatus"
                            ],
                            "additionalProperties": false
                          }
                        ],
                        "default": "deny"
                      },
                      "includeRequestHeaders": {
                        "description": "Specific headers to include in the authorization request.\nIf unset, the gRPC protocol sends all request headers. The HTTP protocol sends only 'Authorization'.",
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "includeRequestBody": {
                        "description": "Options for including the request body in the authorization request",
                        "type": [
                          "object",
                          "null"
                        ],
                        "properties": {
                          "maxRequestBytes": {
                            "description": "Maximum size of request body to buffer (default: 8192)",
                            "type": "integer",
                            "format": "uint32",
                            "minimum": 0,
                            "default": 0
                          },
                          "allowPartialMessage": {
                            "description": "If true, send partial body when max_request_bytes is reached",
                            "type": "boolean",
                            "default": false
                          },
                          "packAsBytes": {
                            "description": "If true, pack body as raw bytes in gRPC",
                            "type": "boolean",
                            "default": false
                          }
                        },
                        "additionalProperties": false
                      },
                      "timeout": {
                        "description": "Timeout for the authorization request (default: 200ms)",
                        "type": [
                          "string",
                          "null"
                        ]
                      }
                    },
                    "unevaluatedProperties": false,
                    "oneOf": [
                      {
                        "type": "string",
                        "enum": [
                          "invalid"
                        ]
                      },
                      {
                        "description": "Service reference. Service must be defined in the top level services list.",
                        "type": "object",
                        "properties": {
                          "service": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "object",
                                "properties": {
                                  "namespace": {
                                    "type": "string"
                                  },
                                  "hostname": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "namespace",
                                  "hostname"
                                ]
                              },
                              "port": {
                                "type": "integer",
                                "format": "uint16",
                                "minimum": 0,
                                "maximum": 65535
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "name",
                              "port"
                            ]
                          }
                        },
                        "required": [
                          "service"
                        ]
                      },
                      {
                        "description": "Hostname or IP address",
                        "type": "object",
                        "properties": {
                          "host": {
                            "description": "Hostname or IP address",
                            "type": "string"
                          }
                        },
                        "required": [
                          "host"
                        ]
                      },
                      {
                        "type": "object",
                        "properties": {
                          "backend": {
                            "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                            "type": "string"
                          }
                        },
                        "required": [
                          "backend"
                        ]
                      }
                    ]
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null
              },
              "extProc": {
                "description": "Extend agentgateway with an external processor",
                "anyOf": [
                  {
                    "type": "object",
                    "properties": {
                      "failureMode": {
                        "type": "string",
                        "enum": [
                          "failClosed",
                          "failOpen"
                        ],
                        "default": "failClosed"
                      }
                    },
                    "unevaluatedProperties": false,
                    "oneOf": [
                      {
                        "type": "string",
                        "enum": [
                          "invalid"
                        ]
                      },
                      {
                        "description": "Service reference. Service must be defined in the top level services list.",
                        "type": "object",
                        "properties": {
                          "service": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "object",
                                "properties": {
                                  "namespace": {
                                    "type": "string"
                                  },
                                  "hostname": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "namespace",
                                  "hostname"
                                ]
                              },
                              "port": {
                                "type": "integer",
                                "format": "uint16",
                                "minimum": 0,
                                "maximum": 65535
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "name",
                              "port"
                            ]
                          }
                        },
                        "required": [
                          "service"
                        ]
                      },
                      {
                        "description": "Hostname or IP address",
                        "type": "object",
                        "properties": {
                          "host": {
                            "description": "Hostname or IP address",
                            "type": "string"
                          }
                        },
                        "required": [
                          "host"
                        ]
                      },
                      {
                        "type": "object",
                        "properties": {
                          "backend": {
                            "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                            "type": "string"
                          }
                        },
                        "required": [
                          "backend"
                        ]
                      }
                    ]
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null
              },
              "transformations": {
                "description": "Modify requests and responses",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "request": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "properties": {
                      "add": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        },
                        "default": {}
                      },
                      "set": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        },
                        "default": {}
                      },
                      "remove": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "default": []
                      },
                      "body": {
                        "type": [
                          "string",
                          "null"
                        ],
                        "default": null
                      }
                    },
                    "additionalProperties": false
                  },
                  "response": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "properties": {
                      "add": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        },
                        "default": {}
                      },
                      "set": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        },
                        "default": {}
                      },
                      "remove": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "default": []
                      },
                      "body": {
                        "type": [
                          "string",
                          "null"
                        ],
                        "default": null
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "csrf": {
                "description": "Handle CSRF protection by validating request origins against configured allowed origins.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "additionalOrigins": {
                    "type": "array",
                    "uniqueItems": true,
                    "items": {
                      "type": "string"
                    },
                    "default": []
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "timeout": {
                "description": "Timeout requests that exceed the configured duration.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "requestTimeout": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "backendRequestTimeout": {
                    "type": [
                      "string",
                      "null"
                    ]
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "retry": {
                "description": "Retry matching requests.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "attempts": {
                    "type": "integer",
                    "format": "uint8",
                    "minimum": 1,
                    "maximum": 255,
                    "default": 1
                  },
                  "backoff": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "codes": {
                    "type": "array",
                    "items": {
                      "type": "integer",
                      "format": "uint8",
                      "minimum": 1,
                      "maximum": 255
                    }
                  }
                },
                "additionalProperties": false,
                "required": [
                  "codes"
                ],
                "default": null
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false,
        "required": [
          "name",
          "target",
          "policy"
        ]
      }
    },
    "workloads": {
      "default": []
    },
    "services": {
      "default": []
    },
    "backends": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "host": {
            "type": "string"
          },
          "policies": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "requestHeaderModifier": {
                "description": "Headers to be modified in the request.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "add": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "set": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "remove": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "responseHeaderModifier": {
                "description": "Headers to be modified in the response.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "add": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "set": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "remove": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "requestRedirect": {
                "description": "Directly respond to the request with a redirect.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "scheme": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "authority": {
                    "anyOf": [
                      {
                        "oneOf": [
                          {
                            "type": "string",
                            "enum": [
                              "auto",
                              "none"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "full": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "full"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "host": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "host"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "port": {
                                "type": "integer",
                                "format": "uint16",
                                "minimum": 1,
                                "maximum": 65535
                              }
                            },
                            "required": [
                              "port"
                            ],
                            "additionalProperties": false
                          }
                        ]
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "path": {
                    "anyOf": [
                      {
                        "oneOf": [
                          {
                            "type": "object",
                            "properties": {
                              "full": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "full"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "prefix": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "prefix"
                            ],
                            "additionalProperties": false
                          }
                        ]
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "status": {
                    "type": [
                      "integer",
                      "null"
                    ],
                    "format": "uint16",
                    "minimum": 1,
                    "maximum": 65535
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "mcpAuthorization": {
                "description": "Authorization policies for MCP access.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "rules": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": false,
                "required": [
                  "rules"
                ],
                "default": null
              },
              "a2a": {
                "description": "Mark this traffic as A2A to enable A2A processing and telemetry.",
                "type": [
                  "object",
                  "null"
                ],
                "additionalProperties": false,
                "default": null
              },
              "ai": {
                "description": "Mark this as LLM traffic to enable LLM processing.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "promptGuard": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "properties": {
                      "request": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "rejection": {
                              "type": "object",
                              "properties": {
                                "body": {
                                  "type": [
                                    "array",
                                    "string"
                                  ],
                                  "items": {
                                    "type": "integer",
                                    "format": "uint8",
                                    "minimum": 0,
                                    "maximum": 255
                                  },
                                  "default": "The request was rejected due to inappropriate content"
                                },
                                "status": {
                                  "type": "integer",
                                  "format": "uint16",
                                  "minimum": 1,
                                  "maximum": 65535,
                                  "default": 403
                                },
                                "headers": {
                                  "description": "Optional headers to add, set, or remove from the rejection response",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "add": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "set": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "remove": {
                                      "type": "array",
                                      "items": {
                                        "type": "string"
                                      }
                                    }
                                  },
                                  "additionalProperties": false
                                }
                              },
                              "additionalProperties": false,
                              "default": {
                                "body": "The request was rejected due to inappropriate content",
                                "status": 403
                              }
                            }
                          },
                          "unevaluatedProperties": false,
                          "oneOf": [
                            {
                              "type": "object",
                              "properties": {
                                "regex": {
                                  "type": "object",
                                  "properties": {
                                    "action": {
                                      "type": "string",
                                      "enum": [
                                        "mask",
                                        "reject"
                                      ],
                                      "default": "mask"
                                    },
                                    "rules": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "builtin": {
                                                "type": "string",
                                                "enum": [
                                                  "ssn",
                                                  "creditCard",
                                                  "phoneNumber",
                                                  "email",
                                                  "caSin"
                                                ]
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "builtin"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "pattern": {
                                                "type": "string"
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "pattern"
                                            ]
                                          }
                                        ]
                                      }
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "rules"
                                  ]
                                }
                              },
                              "required": [
                                "regex"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "webhook": {
                                  "type": "object",
                                  "properties": {
                                    "target": {
                                      "oneOf": [
                                        {
                                          "type": "string",
                                          "enum": [
                                            "invalid"
                                          ]
                                        },
                                        {
                                          "description": "Service reference. Service must be defined in the top level services list.",
                                          "type": "object",
                                          "properties": {
                                            "service": {
                                              "type": "object",
                                              "properties": {
                                                "name": {
                                                  "type": "object",
                                                  "properties": {
                                                    "namespace": {
                                                      "type": "string"
                                                    },
                                                    "hostname": {
                                                      "type": "string"
                                                    }
                                                  },
                                                  "required": [
                                                    "namespace",
                                                    "hostname"
                                                  ]
                                                },
                                                "port": {
                                                  "type": "integer",
                                                  "format": "uint16",
                                                  "minimum": 0,
                                                  "maximum": 65535
                                                }
                                              },
                                              "additionalProperties": false,
                                              "required": [
                                                "name",
                                                "port"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "service"
                                          ],
                                          "additionalProperties": false
                                        },
                                        {
                                          "description": "Hostname or IP address",
                                          "type": "object",
                                          "properties": {
                                            "host": {
                                              "description": "Hostname or IP address",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "host"
                                          ],
                                          "additionalProperties": false
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "backend": {
                                              "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "backend"
                                          ],
                                          "additionalProperties": false
                                        }
                                      ]
                                    },
                                    "forwardHeaderMatches": {
                                      "type": "array",
                                      "items": {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          },
                                          "value": {
                                            "oneOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "exact": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "exact"
                                                ],
                                                "additionalProperties": false
                                              },
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "regex": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "regex"
                                                ],
                                                "additionalProperties": false
                                              }
                                            ]
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "name",
                                          "value"
                                        ]
                                      }
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "target"
                                  ]
                                }
                              },
                              "required": [
                                "webhook"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "openAIModeration": {
                                  "type": "object",
                                  "properties": {
                                    "model": {
                                      "description": "Model to use. Defaults to `omni-moderation-latest`",
                                      "type": [
                                        "string",
                                        "null"
                                      ]
                                    }
                                  },
                                  "additionalProperties": false
                                }
                              },
                              "required": [
                                "openAIModeration"
                              ]
                            }
                          ]
                        }
                      },
                      "response": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "rejection": {
                              "type": "object",
                              "properties": {
                                "body": {
                                  "type": [
                                    "array",
                                    "string"
                                  ],
                                  "items": {
                                    "type": "integer",
                                    "format": "uint8",
                                    "minimum": 0,
                                    "maximum": 255
                                  },
                                  "default": "The request was rejected due to inappropriate content"
                                },
                                "status": {
                                  "type": "integer",
                                  "format": "uint16",
                                  "minimum": 1,
                                  "maximum": 65535,
                                  "default": 403
                                },
                                "headers": {
                                  "description": "Optional headers to add, set, or remove from the rejection response",
                                  "type": [
                                    "object",
                                    "null"
                                  ],
                                  "properties": {
                                    "add": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "set": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "string"
                                      }
                                    },
                                    "remove": {
                                      "type": "array",
                                      "items": {
                                        "type": "string"
                                      }
                                    }
                                  },
                                  "additionalProperties": false
                                }
                              },
                              "additionalProperties": false,
                              "default": {
                                "body": "The request was rejected due to inappropriate content",
                                "status": 403
                              }
                            }
                          },
                          "unevaluatedProperties": false,
                          "oneOf": [
                            {
                              "type": "object",
                              "properties": {
                                "regex": {
                                  "type": "object",
                                  "properties": {
                                    "action": {
                                      "type": "string",
                                      "enum": [
                                        "mask",
                                        "reject"
                                      ],
                                      "default": "mask"
                                    },
                                    "rules": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "builtin": {
                                                "type": "string",
                                                "enum": [
                                                  "ssn",
                                                  "creditCard",
                                                  "phoneNumber",
                                                  "email",
                                                  "caSin"
                                                ]
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "builtin"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "pattern": {
                                                "type": "string"
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "pattern"
                                            ]
                                          }
                                        ]
                                      }
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "rules"
                                  ]
                                }
                              },
                              "required": [
                                "regex"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "webhook": {
                                  "type": "object",
                                  "properties": {
                                    "target": {
                                      "oneOf": [
                                        {
                                          "type": "string",
                                          "enum": [
                                            "invalid"
                                          ]
                                        },
                                        {
                                          "description": "Service reference. Service must be defined in the top level services list.",
                                          "type": "object",
                                          "properties": {
                                            "service": {
                                              "type": "object",
                                              "properties": {
                                                "name": {
                                                  "type": "object",
                                                  "properties": {
                                                    "namespace": {
                                                      "type": "string"
                                                    },
                                                    "hostname": {
                                                      "type": "string"
                                                    }
                                                  },
                                                  "required": [
                                                    "namespace",
                                                    "hostname"
                                                  ]
                                                },
                                                "port": {
                                                  "type": "integer",
                                                  "format": "uint16",
                                                  "minimum": 0,
                                                  "maximum": 65535
                                                }
                                              },
                                              "additionalProperties": false,
                                              "required": [
                                                "name",
                                                "port"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "service"
                                          ],
                                          "additionalProperties": false
                                        },
                                        {
                                          "description": "Hostname or IP address",
                                          "type": "object",
                                          "properties": {
                                            "host": {
                                              "description": "Hostname or IP address",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "host"
                                          ],
                                          "additionalProperties": false
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "backend": {
                                              "description": "Explicit backend reference. Backend must be defined in the top level backends list",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "backend"
                                          ],
                                          "additionalProperties": false
                                        }
                                      ]
                                    },
                                    "forwardHeaderMatches": {
                                      "type": "array",
                                      "items": {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          },
                                          "value": {
                                            "oneOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "exact": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "exact"
                                                ],
                                                "additionalProperties": false
                                              },
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "regex": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "regex"
                                                ],
                                                "additionalProperties": false
                                              }
                                            ]
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "name",
                                          "value"
                                        ]
                                      }
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "target"
                                  ]
                                }
                              },
                              "required": [
                                "webhook"
                              ]
                            }
                          ]
                        }
                      }
                    },
                    "additionalProperties": false
                  },
                  "defaults": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": true
                  },
                  "overrides": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": true
                  },
                  "prompts": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "properties": {
                      "append": {
                        "type": "array",
                        "items": {
                          "description": "SimpleChatCompletionMessage is a simplified chat message",
                          "type": "object",
                          "properties": {
                            "role": {
                              "type": "string"
                            },
                            "content": {
                              "type": "string"
                            }
                          },
                          "additionalProperties": false,
                          "required": [
                            "role",
                            "content"
                          ]
                        }
                      },
                      "prepend": {
                        "type": "array",
                        "items": {
                          "description": "SimpleChatCompletionMessage is a simplified chat message",
                          "type": "object",
                          "properties": {
                            "role": {
                              "type": "string"
                            },
                            "content": {
                              "type": "string"
                            }
                          },
                          "additionalProperties": false,
                          "required": [
                            "role",
                            "content"
                          ]
                        }
                      }
                    },
                    "additionalProperties": false,
                    "required": [
                      "prepend"
                    ]
                  },
                  "modelAliases": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "promptCaching": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "properties": {
                      "cacheSystem": {
                        "type": "boolean",
                        "default": true
                      },
                      "cacheMessages": {
                        "type": "boolean",
                        "default": true
                      },
                      "cacheTools": {
                        "type": "boolean",
                        "default": false
                      },
                      "minTokens": {
                        "type": [
                          "integer",
                          "null"
                        ],
                        "format": "uint",
                        "minimum": 0,
                        "default": 1024
                      }
                    },
                    "additionalProperties": false
                  },
                  "routes": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "backendTLS": {
                "description": "Send TLS to the backend.",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "cert": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "key": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "root": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "hostname": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "insecure": {
                    "type": "boolean",
                    "default": false
                  },
                  "insecureHost": {
                    "type": "boolean",
                    "default": false
                  },
                  "alpn": {
                    "type": [
                      "array",
                      "null"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "default": null
                  },
                  "subjectAltNames": {
                    "type": [
                      "array",
                      "null"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "default": null
                  }
                },
                "additionalProperties": false
              },
              "backendAuth": {
                "description": "Authenticate to the backend.",
                "anyOf": [
                  {
                    "oneOf": [
                      {
                        "type": "object",
                        "properties": {
                          "passthrough": {
                            "type": "object",
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "passthrough"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "key": {
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "file": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "file"
                                ]
                              },
                              {
                                "type": "string"
                              }
                            ]
                          }
                        },
                        "required": [
                          "key"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "gcp": {
                            "type": "object",
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "gcp"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "aws": {
                            "anyOf": [
                              {
                                "description": "Use explicit AWS credentials",
                                "type": "object",
                                "properties": {
                                  "accessKeyId": {
                                    "type": "string"
                                  },
                                  "secretAccessKey": {
                                    "type": "string"
                                  },
                                  "region": {
                                    "type": [
                                      "string",
                                      "null"
                                    ]
                                  },
                                  "sessionToken": {
                                    "type": [
                                      "string",
                                      "null"
                                    ]
                                  }
                                },
                                "additionalProperties": false,
                                "required": [
                                  "accessKeyId",
                                  "secretAccessKey"
                                ]
                              },
                              {
                                "description": "Use implicit AWS authentication (environment variables, IAM roles, etc.)",
                                "type": "object",
                                "additionalProperties": false
                              }
                            ]
                          }
                        },
                        "required": [
                          "aws"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "azure": {
                            "oneOf": [
                              {
                                "description": "Use explicit Azure credentials",
                                "type": "object",
                                "properties": {
                                  "explicitConfig": {
                                    "type": "object",
                                    "unevaluatedProperties": false,
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "clientSecret": {
                                            "type": "object",
                                            "properties": {
                                              "tenant_id": {
                                                "type": "string"
                                              },
                                              "client_id": {
                                                "type": "string"
                                              },
                                              "client_secret": {
                                                "type": "string"
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "tenant_id",
                                              "client_id",
                                              "client_secret"
                                            ]
                                          }
                                        },
                                        "required": [
                                          "clientSecret"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "managedIdentity": {
                                            "type": "object",
                                            "properties": {
                                              "userAssignedIdentity": {
                                                "anyOf": [
                                                  {
                                                    "oneOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "clientId": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "required": [
                                                          "clientId"
                                                        ],
                                                        "additionalProperties": false
                                                      },
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "objectId": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "required": [
                                                          "objectId"
                                                        ],
                                                        "additionalProperties": false
                                                      },
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "resourceId": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "required": [
                                                          "resourceId"
                                                        ],
                                                        "additionalProperties": false
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "null"
                                                  }
                                                ]
                                              }
                                            },
                                            "additionalProperties": false
                                          }
                                        },
                                        "required": [
                                          "managedIdentity"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "workloadIdentity": {
                                            "type": "object",
                                            "additionalProperties": false
                                          }
                                        },
                                        "required": [
                                          "workloadIdentity"
                                        ]
                                      }
                                    ]
                                  }
                                },
                                "required": [
                                  "explicitConfig"
                                ],
                                "additionalProperties": false
                              },
                              {
                                "description": "Use implicit Azure auth. Note that this is for developer use-cases only!",
                                "type": "object",
                                "properties": {
                                  "developerImplicit": {
                                    "type": "object",
                                    "additionalProperties": false
                                  }
                                },
                                "required": [
                                  "developerImplicit"
                                ],
                                "additionalProperties": false
                              }
                            ]
                          }
                        },
                        "required": [
                          "azure"
                        ],
                        "additionalProperties": false
                      }
                    ]
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null
              },
              "http": {
                "description": "Specify HTTP settings for the backend",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "version": {
                    "type": [
                      "string",
                      "null"
                    ],
                    "default": null
                  },
                  "requestTimeout": {
                    "type": [
                      "string",
                      "null"
                    ]
                  }
                },
                "additionalProperties": false,
                "default": null
              },
              "tcp": {
                "description": "Specify TCP settings for the backend",
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "keepalives": {
                    "type": "object",
                    "properties": {
                      "enabled": {
                        "type": "boolean",
                        "default": true
                      },
                      "time": {
                        "type": "string",
                        "default": "3m0s"
                      },
                      "interval": {
                        "type": "string",
                        "default": "3m0s"
                      },
                      "retries": {
                        "type": "integer",
                        "format": "uint32",
                        "minimum": 0,
                        "default": 9
                      }
                    },
                    "additionalProperties": false
                  },
                  "connectTimeout": {
                    "type": "object",
                    "properties": {
                      "secs": {
                        "type": "integer",
                        "format": "uint64",
                        "minimum": 0
                      },
                      "nanos": {
                        "type": "integer",
                        "format": "uint32",
                        "minimum": 0
                      }
                    },
                    "required": [
                      "secs",
                      "nanos"
                    ]
                  }
                },
                "additionalProperties": false,
                "required": [
                  "keepalives",
                  "connectTimeout"
                ],
                "default": null
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false,
        "required": [
          "name",
          "host"
        ]
      }
    }
  },
  "additionalProperties": false
}